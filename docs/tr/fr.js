var uW=Object.create;var{getPrototypeOf:cW,defineProperty:c6,getOwnPropertyNames:iW}=Object;var lW=Object.prototype.hasOwnProperty;var D2=($,X,Z)=>{Z=$!=null?uW(cW($)):{};let Q=X||!$||!$.__esModule?c6(Z,"default",{value:$,enumerable:!0}):Z;for(let W of iW($))if(!lW.call(Q,W))c6(Q,W,{get:()=>$[W],enumerable:!0});return Q};var RX=($,X)=>()=>(X||$((X={exports:{}}).exports,X),X.exports);var x1=($,X)=>{for(var Z in X)c6($,Z,{get:X[Z],enumerable:!0,configurable:!0,set:(Q)=>X[Z]=()=>Q})};var qX=RX((iQ)=>{Object.defineProperty(iQ,"__esModule",{value:!0});iQ.parse=cB;iQ.serialize=iB;var dB=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,vB=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,hB=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,pB=/^[\u0020-\u003A\u003D-\u007E]*$/,mB=Object.prototype.toString,uB=(()=>{let $=function(){};return $.prototype=Object.create(null),$})();function cB($,X){let Z=new uB,Q=$.length;if(Q<2)return Z;let W=X?.decode||lB,Y=0;do{let z=$.indexOf("=",Y);if(z===-1)break;let J=$.indexOf(";",Y),B=J===-1?Q:J;if(z>B){Y=$.lastIndexOf(";",z-1)+1;continue}let w=uQ($,Y,z),q=cQ($,z,w),D=$.slice(w,q);if(Z[D]===void 0){let O=uQ($,z+1,B),M=cQ($,B,O),F=W($.slice(O,M));Z[D]=F}Y=B+1}while(Y<Q);return Z}function uQ($,X,Z){do{let Q=$.charCodeAt(X);if(Q!==32&&Q!==9)return X}while(++X<Z);return Z}function cQ($,X,Z){while(X>Z){let Q=$.charCodeAt(--X);if(Q!==32&&Q!==9)return X+1}return Z}function iB($,X,Z){let Q=Z?.encode||encodeURIComponent;if(!dB.test($))throw new TypeError(`argument name is invalid: ${$}`);let W=Q(X);if(!vB.test(W))throw new TypeError(`argument val is invalid: ${X}`);let Y=$+"="+W;if(!Z)return Y;if(Z.maxAge!==void 0){if(!Number.isInteger(Z.maxAge))throw new TypeError(`option maxAge is invalid: ${Z.maxAge}`);Y+="; Max-Age="+Z.maxAge}if(Z.domain){if(!hB.test(Z.domain))throw new TypeError(`option domain is invalid: ${Z.domain}`);Y+="; Domain="+Z.domain}if(Z.path){if(!pB.test(Z.path))throw new TypeError(`option path is invalid: ${Z.path}`);Y+="; Path="+Z.path}if(Z.expires){if(!nB(Z.expires)||!Number.isFinite(Z.expires.valueOf()))throw new TypeError(`option expires is invalid: ${Z.expires}`);Y+="; Expires="+Z.expires.toUTCString()}if(Z.httpOnly)Y+="; HttpOnly";if(Z.secure)Y+="; Secure";if(Z.partitioned)Y+="; Partitioned";if(Z.priority)switch(typeof Z.priority==="string"?Z.priority.toLowerCase():Z.sameSite){case"low":Y+="; Priority=Low";break;case"medium":Y+="; Priority=Medium";break;case"high":Y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${Z.priority}`)}if(Z.sameSite)switch(typeof Z.sameSite==="string"?Z.sameSite.toLowerCase():Z.sameSite){case!0:case"strict":Y+="; SameSite=Strict";break;case"lax":Y+="; SameSite=Lax";break;case"none":Y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${Z.sameSite}`)}return Y}function lB($){if($.indexOf("%")===-1)return $;try{return decodeURIComponent($)}catch(X){return $}}function nB($){return mB.call($)==="[object Date]"}});var T6=RX((dR,oQ)=>{var lQ=12,sB=0,UX=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function rB($){var X=$.indexOf("%");if(X===-1)return $;var Z=$.length,Q="",W=0,Y=0,z=X,J=lQ;while(X>-1&&X<Z){var B=nQ($[X+1],4),w=nQ($[X+2],0),q=B|w,D=UX[q];if(J=UX[256+J+D],Y=Y<<6|q&UX[364+D],J===lQ)Q+=$.slice(W,z),Q+=Y<=65535?String.fromCharCode(Y):String.fromCharCode(55232+(Y>>10),56320+(Y&1023)),Y=0,W=X+3,X=z=$.indexOf("%",W);else if(J===sB)return null;else{if(X+=3,X<Z&&$.charCodeAt(X)===37)continue;return null}}return Q+$.slice(W)}var aB={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function nQ($,X){var Z=aB[$];return Z===void 0?255:Z<<X}oQ.exports=rB});function G6($){return i8($)&&Symbol.asyncIterator in $}function w6($){return i8($)&&Symbol.iterator in $}function N8($){return i8($)&&(Object.getPrototypeOf($)===Object.prototype||Object.getPrototypeOf($)===null)}function H6($){return $ instanceof Promise}function w0($){return $ instanceof Date&&Number.isFinite($.getTime())}function b0($){return ArrayBuffer.isView($)}function $2($){return $ instanceof globalThis.Uint8Array}function i($,X){return X in $}function i8($){return $!==null&&typeof $==="object"}function d($){return Array.isArray($)&&!ArrayBuffer.isView($)}function C8($){return $===void 0}function U1($){return $===null}function t0($){return typeof $==="boolean"}function f($){return typeof $==="number"}function D6($){return Number.isInteger($)}function l8($){return typeof $==="bigint"}function c($){return typeof $==="string"}function A6($){return typeof $==="function"}function W0($){return typeof $==="symbol"}function H0($){return l8($)||t0($)||U1($)||f($)||c($)||W0($)||C8($)}var I8;(function($){$.ExactOptionalPropertyTypes=!1,$.AllowArrayObject=!1,$.AllowNaN=!1,$.AllowNullVoid=!1;function X(z,J){return $.ExactOptionalPropertyTypes?J in z:z[J]!==void 0}$.IsExactOptionalProperty=X;function Z(z){let J=i8(z);return $.AllowArrayObject?J:J&&!d(z)}$.IsObjectLike=Z;function Q(z){return Z(z)&&!(z instanceof Date)&&!(z instanceof Uint8Array)}$.IsRecordLike=Q;function W(z){return $.AllowNaN?f(z):Number.isFinite(z)}$.IsNumberLike=W;function Y(z){let J=C8(z);return $.AllowNullVoid?J||z===null:J}$.IsVoidLike=Y})(I8||(I8={}));var w8={};x1(w8,{Set:()=>rW,Has:()=>sW,Get:()=>aW,Entries:()=>nW,Delete:()=>tW,Clear:()=>oW});var X2=new Map;function nW(){return new Map(X2)}function oW(){return X2.clear()}function tW($){return X2.delete($)}function sW($){return X2.has($)}function rW($,X){X2.set($,X)}function aW($){return X2.get($)}var j8={};x1(j8,{Set:()=>QY,Has:()=>ZY,Get:()=>WY,Entries:()=>eW,Delete:()=>XY,Clear:()=>$Y});var Z2=new Map;function eW(){return new Map(Z2)}function $Y(){return Z2.clear()}function XY($){return Z2.delete($)}function ZY($){return Z2.has($)}function QY($,X){Z2.set($,X)}function WY($){return Z2.get($)}var K8=Symbol.for("TypeBox.Transform"),s0=Symbol.for("TypeBox.Readonly"),t8=Symbol.for("TypeBox.Optional"),D0=Symbol.for("TypeBox.Hint"),A=Symbol.for("TypeBox.Kind");function A2($={}){return{...$,[A]:$[A]??"Unsafe"}}class v extends Error{constructor($){super($)}}class i6 extends v{constructor($){super(`Duplicate type kind '${$}' detected`)}}class l6 extends v{constructor($){super(`Duplicate string format '${$}' detected`)}}var r0;(function($){function X(Q,W){if(j8.Has(Q))throw new i6(Q);return j8.Set(Q,W),(Y={})=>A2({...Y,[A]:Q})}$.Type=X;function Z(Q,W){if(w8.Has(Q))throw new l6(Q);return w8.Set(Q,W),Q}$.Format=Z})(r0||(r0={}));function a($){return{[A]:"MappedResult",properties:$}}var z0={};x1(z0,{IsUndefined:()=>b8,IsUint8Array:()=>k1,IsSymbol:()=>a6,IsString:()=>L8,IsRegExp:()=>r6,IsObject:()=>P8,IsNumber:()=>d0,IsNull:()=>s6,IsIterator:()=>t6,IsFunction:()=>o6,IsDate:()=>P2,IsBoolean:()=>C1,IsBigInt:()=>N2,IsAsyncIterator:()=>n6,IsArray:()=>Y0});function n6($){return P8($)&&!Y0($)&&!k1($)&&Symbol.asyncIterator in $}function Y0($){return Array.isArray($)}function N2($){return typeof $==="bigint"}function C1($){return typeof $==="boolean"}function P2($){return $ instanceof globalThis.Date}function o6($){return typeof $==="function"}function t6($){return P8($)&&!Y0($)&&!k1($)&&Symbol.iterator in $}function s6($){return $===null}function d0($){return typeof $==="number"}function P8($){return typeof $==="object"&&$!==null}function r6($){return $ instanceof globalThis.RegExp}function L8($){return typeof $==="string"}function a6($){return typeof $==="symbol"}function k1($){return $ instanceof globalThis.Uint8Array}function b8($){return $===void 0}function YY($){return $.map((X)=>N6(X))}function zY($){return new Date($.getTime())}function JY($){return new Uint8Array($)}function MY($){return new RegExp($.source,$.flags)}function BY($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=N6($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=N6($[Z]);return X}function N6($){return Y0($)?YY($):P2($)?zY($):k1($)?JY($):r6($)?MY($):P8($)?BY($):$}function VX($){return N6($)}function x8($){return $.map((X)=>C(X))}function C($,X={}){return{...VX($),...X}}function qY($,X){let{[X]:Z,...Q}=$;return Q}function k8($,X){return X.reduce((Z,Q)=>qY(Z,Q),$)}function L2($,X={}){return{...X,[A]:"Array",type:"array",items:C($)}}function O2($,X={}){return{...X,[A]:"AsyncIterator",type:"AsyncIterator",items:C($)}}function _2($,X,Z){return{...Z,[A]:"Constructor",type:"Constructor",parameters:x8($),returns:C(X)}}function G1($,X,Z){return{...Z,[A]:"Function",type:"Function",parameters:x8($),returns:C(X)}}function z8($={}){return{...$,[A]:"Never",not:{}}}function EX($){return P8($)&&$[s0]==="Readonly"}function a0($){return P8($)&&$[t8]==="Optional"}function UY($){return e($,"Any")}function w1($){return e($,"Array")}function F2($){return e($,"AsyncIterator")}function e6($){return e($,"BigInt")}function $$($){return e($,"Boolean")}function S2($){return e($,"Constructor")}function GY($){return e($,"Date")}function K2($){return e($,"Function")}function T1($){return e($,"Integer")}function T8($){return e($,"Intersect")}function C2($){return e($,"Iterator")}function e($,X){return P8($)&&A in $&&$[A]===X}function H1($){return e($,"Literal")}function A0($){return e($,"MappedKey")}function F8($){return e($,"MappedResult")}function Q2($){return e($,"Never")}function wY($){return e($,"Not")}function HY($){return e($,"Null")}function g1($){return e($,"Number")}function d8($){return e($,"Object")}function f1($){return e($,"Promise")}function X$($){return e($,"Record")}function Z$($){return e($,"Ref")}function Q$($){return e($,"RegExp")}function j2($){return e($,"String")}function DY($){return e($,"Symbol")}function N0($){return e($,"TemplateLiteral")}function AY($){return e($,"This")}function W2($){return P8($)&&K8 in $}function v0($){return e($,"Tuple")}function NY($){return e($,"Undefined")}function Z8($){return e($,"Union")}function PY($){return e($,"Uint8Array")}function LY($){return e($,"Unknown")}function OY($){return e($,"Unsafe")}function _Y($){return e($,"Void")}function FY($){return P8($)&&A in $&&L8($[A])}function P0($){return UY($)||w1($)||$$($)||e6($)||F2($)||S2($)||GY($)||K2($)||T1($)||T8($)||C2($)||H1($)||A0($)||F8($)||Q2($)||wY($)||HY($)||g1($)||d8($)||f1($)||X$($)||Z$($)||Q$($)||j2($)||DY($)||N0($)||AY($)||v0($)||NY($)||Z8($)||PY($)||LY($)||OY($)||_Y($)||FY($)}function KY($){return k8(C($),[t8])}function CY($){return{...C($),[t8]:"Optional"}}function jY($,X){return X===!1?KY($):CY($)}function $0($,X){let Z=X??!0;return F8($)?IX($,Z):jY($,Z)}function bY($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=$0($[Q],X);return Z}function RY($,X){return bY($.properties,X)}function IX($,X){let Z=RY($,X);return a(Z)}function b2($,X){let Z=$.every((W)=>d8(W)),Q=P0(X.unevaluatedProperties)?{unevaluatedProperties:C(X.unevaluatedProperties)}:{};return X.unevaluatedProperties===!1||P0(X.unevaluatedProperties)||Z?{...X,...Q,[A]:"Intersect",type:"object",allOf:x8($)}:{...X,...Q,[A]:"Intersect",allOf:x8($)}}function VY($){return $.every((X)=>a0(X))}function EY($){return k8($,[t8])}function xX($){return $.map((X)=>a0(X)?EY(X):X)}function IY($,X){return VY($)?$0(b2(xX($),X)):b2(xX($),X)}function P6($,X={}){if($.length===0)return z8(X);if($.length===1)return C($[0],X);if($.some((Z)=>W2(Z)))throw new Error("Cannot intersect transform types");return IY($,X)}function X0($,X={}){if($.length===0)return z8(X);if($.length===1)return C($[0],X);if($.some((Z)=>W2(Z)))throw new Error("Cannot intersect transform types");return b2($,X)}function R2($,X){return{...X,[A]:"Union",anyOf:x8($)}}function xY($){return $.some((X)=>a0(X))}function kX($){return $.map((X)=>a0(X)?kY(X):X)}function kY($){return k8($,[t8])}function TY($,X){return xY($)?$0(R2(kX($),X)):R2(kX($),X)}function e0($,X={}){return $.length===0?z8(X):$.length===1?C($[0],X):TY($,X)}function J8($,X={}){return $.length===0?z8(X):$.length===1?C($[0],X):R2($,X)}class W$ extends v{}function gY($){return $.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function Y$($,X,Z){return $[X]===Z&&$.charCodeAt(X-1)!==92}function D1($,X){return Y$($,X,"(")}function V2($,X){return Y$($,X,")")}function TX($,X){return Y$($,X,"|")}function fY($){if(!(D1($,0)&&V2($,$.length-1)))return!1;let X=0;for(let Z=0;Z<$.length;Z++){if(D1($,Z))X+=1;if(V2($,Z))X-=1;if(X===0&&Z!==$.length-1)return!1}return!0}function yY($){return $.slice(1,$.length-1)}function dY($){let X=0;for(let Z=0;Z<$.length;Z++){if(D1($,Z))X+=1;if(V2($,Z))X-=1;if(TX($,Z)&&X===0)return!0}return!1}function vY($){for(let X=0;X<$.length;X++)if(D1($,X))return!0;return!1}function hY($){let[X,Z]=[0,0],Q=[];for(let Y=0;Y<$.length;Y++){if(D1($,Y))X+=1;if(V2($,Y))X-=1;if(TX($,Y)&&X===0){let z=$.slice(Z,Y);if(z.length>0)Q.push(Y2(z));Z=Y+1}}let W=$.slice(Z);if(W.length>0)Q.push(Y2(W));if(Q.length===0)return{type:"const",const:""};if(Q.length===1)return Q[0];return{type:"or",expr:Q}}function pY($){function X(W,Y){if(!D1(W,Y))throw new W$("TemplateLiteralParser: Index must point to open parens");let z=0;for(let J=Y;J<W.length;J++){if(D1(W,J))z+=1;if(V2(W,J))z-=1;if(z===0)return[Y,J]}throw new W$("TemplateLiteralParser: Unclosed group parens in expression")}function Z(W,Y){for(let z=Y;z<W.length;z++)if(D1(W,z))return[Y,z];return[Y,W.length]}let Q=[];for(let W=0;W<$.length;W++)if(D1($,W)){let[Y,z]=X($,W),J=$.slice(Y,z+1);Q.push(Y2(J)),W=z}else{let[Y,z]=Z($,W),J=$.slice(Y,z);if(J.length>0)Q.push(Y2(J));W=z-1}return Q.length===0?{type:"const",const:""}:Q.length===1?Q[0]:{type:"and",expr:Q}}function Y2($){return fY($)?Y2(yY($)):dY($)?hY($):vY($)?pY($):{type:"const",const:gY($)}}function z2($){return Y2($.slice(1,$.length-1))}class gX extends v{}function mY($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="0"&&$.expr[1].type==="const"&&$.expr[1].const==="[1-9][0-9]*"}function uY($){return $.type==="or"&&$.expr.length===2&&$.expr[0].type==="const"&&$.expr[0].const==="true"&&$.expr[1].type==="const"&&$.expr[1].const==="false"}function cY($){return $.type==="const"&&$.const===".*"}function y1($){return mY($)||cY($)?!1:uY($)?!0:$.type==="and"?$.expr.every((X)=>y1(X)):$.type==="or"?$.expr.every((X)=>y1(X)):$.type==="const"?!0:(()=>{throw new gX("Unknown expression type")})()}function L6($){let X=z2($.pattern);return y1(X)}class fX extends v{}function*yX($){if($.length===1)return yield*$[0];for(let X of $[0])for(let Z of yX($.slice(1)))yield`${X}${Z}`}function*iY($){return yield*yX($.expr.map((X)=>[...E2(X)]))}function*lY($){for(let X of $.expr)yield*E2(X)}function*nY($){return yield $.const}function*E2($){return $.type==="and"?yield*iY($):$.type==="or"?yield*lY($):$.type==="const"?yield*nY($):(()=>{throw new fX("Unknown expression")})()}function J2($){let X=z2($.pattern);return y1(X)?[...E2(X)]:[]}function Q8($,X={}){return{...X,[A]:"Literal",const:$,type:typeof $}}function I2($={}){return{...$,[A]:"Boolean",type:"boolean"}}function d1($={}){return{...$,[A]:"BigInt",type:"bigint"}}function h0($={}){return{...$,[A]:"Number",type:"number"}}function L0($={}){return{...$,[A]:"String",type:"string"}}function*oY($){let X=$.trim().replace(/"|'/g,"");return X==="boolean"?yield I2():X==="number"?yield h0():X==="bigint"?yield d1():X==="string"?yield L0():yield(()=>{let Z=X.split("|").map((Q)=>Q8(Q.trim()));return Z.length===0?z8():Z.length===1?Z[0]:e0(Z)})()}function*tY($){if($[1]!=="{"){let X=Q8("$"),Z=z$($.slice(1));return yield*[X,...Z]}for(let X=2;X<$.length;X++)if($[X]==="}"){let Z=oY($.slice(2,X)),Q=z$($.slice(X+1));return yield*[...Z,...Q]}yield Q8($)}function*z$($){for(let X=0;X<$.length;X++)if($[X]==="$"){let Z=Q8($.slice(0,X)),Q=tY($.slice(X));return yield*[Z,...Q]}yield Q8($)}function dX($){return[...z$($)]}var vX="(true|false)",O6="(0|[1-9][0-9]*)",hX="(.*)";var A1="^(0|[1-9][0-9]*)$",j1="^(.*)$";class pX extends v{}function sY($){return $.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function mX($,X){return N0($)?$.pattern.slice(1,$.pattern.length-1):Z8($)?`(${$.anyOf.map((Z)=>mX(Z,X)).join("|")})`:g1($)?`${X}${O6}`:T1($)?`${X}${O6}`:e6($)?`${X}${O6}`:j2($)?`${X}${hX}`:H1($)?`${X}${sY($.const.toString())}`:$$($)?`${X}${vX}`:(()=>{throw new pX(`Unexpected Kind '${$[A]}'`)})()}function J$($){return`^${$.map((X)=>mX(X,"")).join("")}$`}function v1($){let Z=J2($).map((Q)=>Q8(Q));return e0(Z)}function x2($,X={}){let Z=L8($)?J$(dX($)):J$($);return{...X,[A]:"TemplateLiteral",type:"string",pattern:Z}}function rY($){return J2($).map((Z)=>Z.toString())}function aY($){let X=[];for(let Z of $)X.push(...J0(Z));return X}function eY($){return[$.toString()]}function J0($){return[...new Set(N0($)?rY($):Z8($)?aY($.anyOf):H1($)?eY($.const):g1($)?["[number]"]:T1($)?["[number]"]:[])]}function $7($,X,Z){let Q={};for(let W of Object.getOwnPropertyNames(X))Q[W]=h1($,J0(X[W]),Z);return Q}function X7($,X,Z){return $7($,X.properties,Z)}function uX($,X,Z){let Q=X7($,X,Z);return a(Q)}function iX($,X){return $.map((Z)=>lX(Z,X))}function Z7($){return $.filter((X)=>!Q2(X))}function Q7($,X){return P6(Z7(iX($,X)))}function W7($){return $.some((X)=>Q2(X))?[]:$}function Y7($,X){return e0(W7(iX($,X)))}function z7($,X){return X in $?$[X]:X==="[number]"?e0($):z8()}function J7($,X){return X==="[number]"?$:z8()}function M7($,X){return X in $?$[X]:z8()}function lX($,X){return T8($)?Q7($.allOf,X):Z8($)?Y7($.anyOf,X):v0($)?z7($.items??[],X):w1($)?J7($.items,X):d8($)?M7($.properties,X):z8()}function k2($,X){return X.map((Z)=>lX($,Z))}function cX($,X){return e0(k2($,X))}function h1($,X,Z={}){return F8(X)?C(uX($,X,Z)):A0(X)?C(nX($,X,Z)):P0(X)?C(cX($,J0(X)),Z):C(cX($,X),Z)}function B7($,X,Z){return{[X]:h1($,[X],Z)}}function q7($,X,Z){return X.reduce((Q,W)=>{return{...Q,...B7($,W,Z)}},{})}function U7($,X,Z){return q7($,X.keys,Z)}function nX($,X,Z){let Q=U7($,X,Z);return a(Q)}function T2($,X={}){return{...X,[A]:"Iterator",type:"Iterator",items:C($)}}function G7($,X={}){let Z=globalThis.Object.getOwnPropertyNames($),Q=Z.filter((J)=>a0($[J])),W=Z.filter((J)=>!Q.includes(J)),Y=P0(X.additionalProperties)?{additionalProperties:C(X.additionalProperties)}:{},z={};for(let J of Z)z[J]=C($[J]);return W.length>0?{...X,...Y,[A]:"Object",type:"object",properties:z,required:W}:{...X,...Y,[A]:"Object",type:"object",properties:z}}var M8=G7;function g2($,X={}){return{...X,[A]:"Promise",type:"Promise",item:C($)}}function w7($){return k8(C($),[s0])}function H7($){return{...C($),[s0]:"Readonly"}}function D7($,X){return X===!1?w7($):H7($)}function O0($,X){let Z=X??!0;return F8($)?oX($,Z):D7($,Z)}function A7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=O0($[Q],X);return Z}function N7($,X){return A7($.properties,X)}function oX($,X){let Z=N7($,X);return a(Z)}function p0($,X={}){let[Z,Q,W]=[!1,$.length,$.length];return $.length>0?{...X,[A]:"Tuple",type:"array",items:x8($),additionalItems:Z,minItems:Q,maxItems:W}:{...X,[A]:"Tuple",type:"array",minItems:Q,maxItems:W}}function tX($,X){return $.includes(X)}function sX($){return[...new Set($)]}function P7($,X){return $.filter((Z)=>X.includes(Z))}function L7($,X){return $.reduce((Z,Q)=>{return P7(Z,Q)},X)}function rX($){return $.length===1?$[0]:$.length>1?L7($.slice(1),$[0]):[]}function aX($){let X=[];for(let Z of $)X.push(...Z);return X}function eX($,X){return $ in X?R0($,X[$]):a(X)}function O7($){return{[$]:Q8($)}}function _7($){let X={};for(let Z of $)X[Z]=Q8(Z);return X}function F7($,X){return tX(X,$)?O7($):_7(X)}function S7($,X){let Z=F7($,X);return eX($,Z)}function f2($,X){return X.map((Z)=>R0($,Z))}function K7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=R0($,X[Q]);return Z}function R0($,X){return a0(X)?$0(R0($,k8(X,[t8]))):EX(X)?O0(R0($,k8(X,[s0]))):F8(X)?eX($,X.properties):A0(X)?S7($,X.keys):S2(X)?_2(f2($,X.parameters),R0($,X.returns)):K2(X)?G1(f2($,X.parameters),R0($,X.returns)):F2(X)?O2(R0($,X.items)):C2(X)?T2(R0($,X.items)):T8(X)?X0(f2($,X.allOf)):Z8(X)?J8(f2($,X.anyOf)):v0(X)?p0(f2($,X.items??[])):d8(X)?M8(K7($,X.properties)):w1(X)?L2(R0($,X.items)):f1(X)?g2(R0($,X.item)):X}function C7($,X){let Z={};for(let Q of $)Z[Q]=R0(Q,X);return Z}function M$($,X,Z={}){let Q=P0($)?J0($):$,W=X({[A]:"MappedKey",keys:Q}),Y=C7(Q,W);return C(M8(Y),Z)}function $Z($){let X=[];for(let Z of $)X.push(M0(Z));return X}function j7($){let X=$Z($);return aX(X)}function b7($){let X=$Z($);return rX(X)}function R7($){return $.map((X,Z)=>Z.toString())}function V7($){return["[number]"]}function E7($){return globalThis.Object.getOwnPropertyNames($)}function I7($){if(!B$)return[];return globalThis.Object.getOwnPropertyNames($).map((Z)=>{return Z[0]==="^"&&Z[Z.length-1]==="$"?Z.slice(1,Z.length-1):Z})}function M0($){return T8($)?j7($.allOf):Z8($)?b7($.anyOf):v0($)?R7($.items??[]):w1($)?V7($.items):d8($)?E7($.properties):X$($)?I7($.patternProperties):[]}var B$=!1;function N1($){B$=!0;let X=M0($);return B$=!1,`^(${X.map((Q)=>`(${Q})`).join("|")})\$`}function x7($){return $.map((X)=>X==="[number]"?h0():Q8(X))}function y2($,X={}){if(F8($))return XZ($,X);else{let Z=M0($),Q=x7(Z),W=e0(Q);return C(W,X)}}function k7($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=y2($[Q],X);return Z}function T7($,X){return k7($.properties,X)}function XZ($,X){let Z=T7($,X);return a(Z)}function _6($){let X=M0($),Z=k2($,X);return X.map((Q,W)=>[X[W],Z[W]])}function g7($){return $.allOf.every((X)=>P1(X))}function f7($){return $.anyOf.some((X)=>P1(X))}function y7($){return!P1($.not)}function P1($){return $[A]==="Intersect"?g7($):$[A]==="Union"?f7($):$[A]==="Not"?y7($):$[A]==="Undefined"?!0:!1}function d7($){switch($.errorType){case N.ArrayContains:return"Expected array to contain at least one matching value";case N.ArrayMaxContains:return`Expected array to contain no more than ${$.schema.maxContains} matching values`;case N.ArrayMinContains:return`Expected array to contain at least ${$.schema.minContains} matching values`;case N.ArrayMaxItems:return`Expected array length to be less or equal to ${$.schema.maxItems}`;case N.ArrayMinItems:return`Expected array length to be greater or equal to ${$.schema.minItems}`;case N.ArrayUniqueItems:return"Expected array elements to be unique";case N.Array:return"Expected array";case N.AsyncIterator:return"Expected AsyncIterator";case N.BigIntExclusiveMaximum:return`Expected bigint to be less than ${$.schema.exclusiveMaximum}`;case N.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${$.schema.exclusiveMinimum}`;case N.BigIntMaximum:return`Expected bigint to be less or equal to ${$.schema.maximum}`;case N.BigIntMinimum:return`Expected bigint to be greater or equal to ${$.schema.minimum}`;case N.BigIntMultipleOf:return`Expected bigint to be a multiple of ${$.schema.multipleOf}`;case N.BigInt:return"Expected bigint";case N.Boolean:return"Expected boolean";case N.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${$.schema.exclusiveMinimumTimestamp}`;case N.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${$.schema.exclusiveMaximumTimestamp}`;case N.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${$.schema.minimumTimestamp}`;case N.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${$.schema.maximumTimestamp}`;case N.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${$.schema.multipleOfTimestamp}`;case N.Date:return"Expected Date";case N.Function:return"Expected function";case N.IntegerExclusiveMaximum:return`Expected integer to be less than ${$.schema.exclusiveMaximum}`;case N.IntegerExclusiveMinimum:return`Expected integer to be greater than ${$.schema.exclusiveMinimum}`;case N.IntegerMaximum:return`Expected integer to be less or equal to ${$.schema.maximum}`;case N.IntegerMinimum:return`Expected integer to be greater or equal to ${$.schema.minimum}`;case N.IntegerMultipleOf:return`Expected integer to be a multiple of ${$.schema.multipleOf}`;case N.Integer:return"Expected integer";case N.IntersectUnevaluatedProperties:return"Unexpected property";case N.Intersect:return"Expected all values to match";case N.Iterator:return"Expected Iterator";case N.Literal:return`Expected ${typeof $.schema.const==="string"?`'${$.schema.const}'`:$.schema.const}`;case N.Never:return"Never";case N.Not:return"Value should not match";case N.Null:return"Expected null";case N.NumberExclusiveMaximum:return`Expected number to be less than ${$.schema.exclusiveMaximum}`;case N.NumberExclusiveMinimum:return`Expected number to be greater than ${$.schema.exclusiveMinimum}`;case N.NumberMaximum:return`Expected number to be less or equal to ${$.schema.maximum}`;case N.NumberMinimum:return`Expected number to be greater or equal to ${$.schema.minimum}`;case N.NumberMultipleOf:return`Expected number to be a multiple of ${$.schema.multipleOf}`;case N.Number:return"Expected number";case N.Object:return"Expected object";case N.ObjectAdditionalProperties:return"Unexpected property";case N.ObjectMaxProperties:return`Expected object to have no more than ${$.schema.maxProperties} properties`;case N.ObjectMinProperties:return`Expected object to have at least ${$.schema.minProperties} properties`;case N.ObjectRequiredProperty:return"Required property";case N.Promise:return"Expected Promise";case N.RegExp:return"Expected string to match regular expression";case N.StringFormatUnknown:return`Unknown format '${$.schema.format}'`;case N.StringFormat:return`Expected string to match '${$.schema.format}' format`;case N.StringMaxLength:return`Expected string length less or equal to ${$.schema.maxLength}`;case N.StringMinLength:return`Expected string length greater or equal to ${$.schema.minLength}`;case N.StringPattern:return`Expected string to match '${$.schema.pattern}'`;case N.String:return"Expected string";case N.Symbol:return"Expected symbol";case N.TupleLength:return`Expected tuple to have ${$.schema.maxItems||0} elements`;case N.Tuple:return"Expected tuple";case N.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${$.schema.maxByteLength}`;case N.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${$.schema.minByteLength}`;case N.Uint8Array:return"Expected Uint8Array";case N.Undefined:return"Expected undefined";case N.Union:return"Expected union value";case N.Void:return"Expected void";case N.Kind:return`Expected kind '${$.schema[A]}'`;default:return"Unknown error type"}}var v7=d7;function ZZ(){return v7}class QZ extends v{constructor($){super(`Unable to dereference schema with \$id '${$.$id}'`);this.schema=$}}function h7($,X){let Z=X.find((Q)=>Q.$id===$.$ref);if(Z===void 0)throw new QZ($);return $8(Z,X)}function $8($,X){return $[A]==="This"||$[A]==="Ref"?h7($,X):$}class WZ extends v{constructor($){super("Unable to hash value");this.value=$}}var _0;(function($){$[$.Undefined=0]="Undefined",$[$.Null=1]="Null",$[$.Boolean=2]="Boolean",$[$.Number=3]="Number",$[$.String=4]="String",$[$.Object=5]="Object",$[$.Array=6]="Array",$[$.Date=7]="Date",$[$.Uint8Array=8]="Uint8Array",$[$.Symbol=9]="Symbol",$[$.BigInt=10]="BigInt"})(_0||(_0={}));var M2=BigInt("14695981039346656037"),[p7,m7]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],u7=Array.from({length:256}).map(($,X)=>BigInt(X)),YZ=new Float64Array(1),zZ=new DataView(YZ.buffer),JZ=new Uint8Array(YZ.buffer);function*c7($){let X=$===0?1:Math.ceil(Math.floor(Math.log2($)+1)/8);for(let Z=0;Z<X;Z++)yield $>>8*(X-1-Z)&255}function i7($){s8(_0.Array);for(let X of $)B2(X)}function l7($){s8(_0.Boolean),s8($?1:0)}function n7($){s8(_0.BigInt),zZ.setBigInt64(0,$);for(let X of JZ)s8(X)}function o7($){s8(_0.Date),B2($.getTime())}function t7($){s8(_0.Null)}function s7($){s8(_0.Number),zZ.setFloat64(0,$);for(let X of JZ)s8(X)}function r7($){s8(_0.Object);for(let X of globalThis.Object.getOwnPropertyNames($).sort())B2(X),B2($[X])}function a7($){s8(_0.String);for(let X=0;X<$.length;X++)for(let Z of c7($.charCodeAt(X)))s8(Z)}function e7($){s8(_0.Symbol),B2($.description)}function $9($){s8(_0.Uint8Array);for(let X=0;X<$.length;X++)s8($[X])}function X9($){return s8(_0.Undefined)}function B2($){if(d($))return i7($);if(t0($))return l7($);if(l8($))return n7($);if(w0($))return o7($);if(U1($))return t7($);if(f($))return s7($);if(N8($))return r7($);if(c($))return a7($);if(W0($))return e7($);if($2($))return $9($);if(C8($))return X9($);throw new WZ($)}function s8($){M2=M2^u7[$],M2=M2*p7%m7}function b1($){return M2=BigInt("14695981039346656037"),B2($),M2}var N;(function($){$[$.ArrayContains=0]="ArrayContains",$[$.ArrayMaxContains=1]="ArrayMaxContains",$[$.ArrayMaxItems=2]="ArrayMaxItems",$[$.ArrayMinContains=3]="ArrayMinContains",$[$.ArrayMinItems=4]="ArrayMinItems",$[$.ArrayUniqueItems=5]="ArrayUniqueItems",$[$.Array=6]="Array",$[$.AsyncIterator=7]="AsyncIterator",$[$.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",$[$.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",$[$.BigIntMaximum=10]="BigIntMaximum",$[$.BigIntMinimum=11]="BigIntMinimum",$[$.BigIntMultipleOf=12]="BigIntMultipleOf",$[$.BigInt=13]="BigInt",$[$.Boolean=14]="Boolean",$[$.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",$[$.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",$[$.DateMaximumTimestamp=17]="DateMaximumTimestamp",$[$.DateMinimumTimestamp=18]="DateMinimumTimestamp",$[$.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",$[$.Date=20]="Date",$[$.Function=21]="Function",$[$.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",$[$.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",$[$.IntegerMaximum=24]="IntegerMaximum",$[$.IntegerMinimum=25]="IntegerMinimum",$[$.IntegerMultipleOf=26]="IntegerMultipleOf",$[$.Integer=27]="Integer",$[$.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",$[$.Intersect=29]="Intersect",$[$.Iterator=30]="Iterator",$[$.Kind=31]="Kind",$[$.Literal=32]="Literal",$[$.Never=33]="Never",$[$.Not=34]="Not",$[$.Null=35]="Null",$[$.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",$[$.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",$[$.NumberMaximum=38]="NumberMaximum",$[$.NumberMinimum=39]="NumberMinimum",$[$.NumberMultipleOf=40]="NumberMultipleOf",$[$.Number=41]="Number",$[$.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",$[$.ObjectMaxProperties=43]="ObjectMaxProperties",$[$.ObjectMinProperties=44]="ObjectMinProperties",$[$.ObjectRequiredProperty=45]="ObjectRequiredProperty",$[$.Object=46]="Object",$[$.Promise=47]="Promise",$[$.RegExp=48]="RegExp",$[$.StringFormatUnknown=49]="StringFormatUnknown",$[$.StringFormat=50]="StringFormat",$[$.StringMaxLength=51]="StringMaxLength",$[$.StringMinLength=52]="StringMinLength",$[$.StringPattern=53]="StringPattern",$[$.String=54]="String",$[$.Symbol=55]="Symbol",$[$.TupleLength=56]="TupleLength",$[$.Tuple=57]="Tuple",$[$.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",$[$.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",$[$.Uint8Array=60]="Uint8Array",$[$.Undefined=61]="Undefined",$[$.Union=62]="Union",$[$.Void=63]="Void"})(N||(N={}));class MZ extends v{constructor($){super("Unknown type");this.schema=$}}function L1($){return $.replace(/~/g,"~0").replace(/\//g,"~1")}function n($){return $!==void 0}class F6{constructor($){this.iterator=$}[Symbol.iterator](){return this.iterator}First(){let $=this.iterator.next();return $.done?void 0:$.value}}function j($,X,Z,Q){return{type:$,schema:X,path:Z,value:Q,message:ZZ()({errorType:$,path:Z,schema:X,value:Q})}}function*Z9($,X,Z,Q){}function*Q9($,X,Z,Q){if(!d(Q))return yield j(N.Array,$,Z,Q);if(n($.minItems)&&!(Q.length>=$.minItems))yield j(N.ArrayMinItems,$,Z,Q);if(n($.maxItems)&&!(Q.length<=$.maxItems))yield j(N.ArrayMaxItems,$,Z,Q);for(let z=0;z<Q.length;z++)yield*n8($.items,X,`${Z}/${z}`,Q[z]);if($.uniqueItems===!0&&!function(){let z=new Set;for(let J of Q){let B=b1(J);if(z.has(B))return!1;else z.add(B)}return!0}())yield j(N.ArrayUniqueItems,$,Z,Q);if(!(n($.contains)||n($.minContains)||n($.maxContains)))return;let W=n($.contains)?$.contains:z8(),Y=Q.reduce((z,J,B)=>n8(W,X,`${Z}${B}`,J).next().done===!0?z+1:z,0);if(Y===0)yield j(N.ArrayContains,$,Z,Q);if(f($.minContains)&&Y<$.minContains)yield j(N.ArrayMinContains,$,Z,Q);if(f($.maxContains)&&Y>$.maxContains)yield j(N.ArrayMaxContains,$,Z,Q)}function*W9($,X,Z,Q){if(!G6(Q))yield j(N.AsyncIterator,$,Z,Q)}function*Y9($,X,Z,Q){if(!l8(Q))return yield j(N.BigInt,$,Z,Q);if(n($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(N.BigIntExclusiveMaximum,$,Z,Q);if(n($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(N.BigIntExclusiveMinimum,$,Z,Q);if(n($.maximum)&&!(Q<=$.maximum))yield j(N.BigIntMaximum,$,Z,Q);if(n($.minimum)&&!(Q>=$.minimum))yield j(N.BigIntMinimum,$,Z,Q);if(n($.multipleOf)&&Q%$.multipleOf!==BigInt(0))yield j(N.BigIntMultipleOf,$,Z,Q)}function*z9($,X,Z,Q){if(!t0(Q))yield j(N.Boolean,$,Z,Q)}function*J9($,X,Z,Q){yield*n8($.returns,X,Z,Q.prototype)}function*M9($,X,Z,Q){if(!w0(Q))return yield j(N.Date,$,Z,Q);if(n($.exclusiveMaximumTimestamp)&&!(Q.getTime()<$.exclusiveMaximumTimestamp))yield j(N.DateExclusiveMaximumTimestamp,$,Z,Q);if(n($.exclusiveMinimumTimestamp)&&!(Q.getTime()>$.exclusiveMinimumTimestamp))yield j(N.DateExclusiveMinimumTimestamp,$,Z,Q);if(n($.maximumTimestamp)&&!(Q.getTime()<=$.maximumTimestamp))yield j(N.DateMaximumTimestamp,$,Z,Q);if(n($.minimumTimestamp)&&!(Q.getTime()>=$.minimumTimestamp))yield j(N.DateMinimumTimestamp,$,Z,Q);if(n($.multipleOfTimestamp)&&Q.getTime()%$.multipleOfTimestamp!==0)yield j(N.DateMultipleOfTimestamp,$,Z,Q)}function*B9($,X,Z,Q){if(!A6(Q))yield j(N.Function,$,Z,Q)}function*q9($,X,Z,Q){if(!D6(Q))return yield j(N.Integer,$,Z,Q);if(n($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(N.IntegerExclusiveMaximum,$,Z,Q);if(n($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(N.IntegerExclusiveMinimum,$,Z,Q);if(n($.maximum)&&!(Q<=$.maximum))yield j(N.IntegerMaximum,$,Z,Q);if(n($.minimum)&&!(Q>=$.minimum))yield j(N.IntegerMinimum,$,Z,Q);if(n($.multipleOf)&&Q%$.multipleOf!==0)yield j(N.IntegerMultipleOf,$,Z,Q)}function*U9($,X,Z,Q){for(let W of $.allOf){let Y=n8(W,X,Z,Q).next();if(!Y.done)yield j(N.Intersect,$,Z,Q),yield Y.value}if($.unevaluatedProperties===!1){let W=new RegExp(N1($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y))yield j(N.IntersectUnevaluatedProperties,$,`${Z}/${Y}`,Q)}if(typeof $.unevaluatedProperties==="object"){let W=new RegExp(N1($));for(let Y of Object.getOwnPropertyNames(Q))if(!W.test(Y)){let z=n8($.unevaluatedProperties,X,`${Z}/${Y}`,Q[Y]).next();if(!z.done)yield z.value}}}function*G9($,X,Z,Q){if(!w6(Q))yield j(N.Iterator,$,Z,Q)}function*w9($,X,Z,Q){if(Q!==$.const)yield j(N.Literal,$,Z,Q)}function*H9($,X,Z,Q){yield j(N.Never,$,Z,Q)}function*D9($,X,Z,Q){if(n8($.not,X,Z,Q).next().done===!0)yield j(N.Not,$,Z,Q)}function*A9($,X,Z,Q){if(!U1(Q))yield j(N.Null,$,Z,Q)}function*N9($,X,Z,Q){if(!I8.IsNumberLike(Q))return yield j(N.Number,$,Z,Q);if(n($.exclusiveMaximum)&&!(Q<$.exclusiveMaximum))yield j(N.NumberExclusiveMaximum,$,Z,Q);if(n($.exclusiveMinimum)&&!(Q>$.exclusiveMinimum))yield j(N.NumberExclusiveMinimum,$,Z,Q);if(n($.maximum)&&!(Q<=$.maximum))yield j(N.NumberMaximum,$,Z,Q);if(n($.minimum)&&!(Q>=$.minimum))yield j(N.NumberMinimum,$,Z,Q);if(n($.multipleOf)&&Q%$.multipleOf!==0)yield j(N.NumberMultipleOf,$,Z,Q)}function*P9($,X,Z,Q){if(!I8.IsObjectLike(Q))return yield j(N.Object,$,Z,Q);if(n($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield j(N.ObjectMinProperties,$,Z,Q);if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield j(N.ObjectMaxProperties,$,Z,Q);let W=Array.isArray($.required)?$.required:[],Y=Object.getOwnPropertyNames($.properties),z=Object.getOwnPropertyNames(Q);for(let J of W){if(z.includes(J))continue;yield j(N.ObjectRequiredProperty,$.properties[J],`${Z}/${L1(J)}`,void 0)}if($.additionalProperties===!1){for(let J of z)if(!Y.includes(J))yield j(N.ObjectAdditionalProperties,$,`${Z}/${L1(J)}`,Q[J])}if(typeof $.additionalProperties==="object")for(let J of z){if(Y.includes(J))continue;yield*n8($.additionalProperties,X,`${Z}/${L1(J)}`,Q[J])}for(let J of Y){let B=$.properties[J];if($.required&&$.required.includes(J)){if(yield*n8(B,X,`${Z}/${L1(J)}`,Q[J]),P1($)&&!(J in Q))yield j(N.ObjectRequiredProperty,B,`${Z}/${L1(J)}`,void 0)}else if(I8.IsExactOptionalProperty(Q,J))yield*n8(B,X,`${Z}/${L1(J)}`,Q[J])}}function*L9($,X,Z,Q){if(!H6(Q))yield j(N.Promise,$,Z,Q)}function*O9($,X,Z,Q){if(!I8.IsRecordLike(Q))return yield j(N.Object,$,Z,Q);if(n($.minProperties)&&!(Object.getOwnPropertyNames(Q).length>=$.minProperties))yield j(N.ObjectMinProperties,$,Z,Q);if(n($.maxProperties)&&!(Object.getOwnPropertyNames(Q).length<=$.maxProperties))yield j(N.ObjectMaxProperties,$,Z,Q);let[W,Y]=Object.entries($.patternProperties)[0],z=new RegExp(W);for(let[J,B]of Object.entries(Q))if(z.test(J))yield*n8(Y,X,`${Z}/${L1(J)}`,B);if(typeof $.additionalProperties==="object"){for(let[J,B]of Object.entries(Q))if(!z.test(J))yield*n8($.additionalProperties,X,`${Z}/${L1(J)}`,B)}if($.additionalProperties===!1)for(let[J,B]of Object.entries(Q)){if(z.test(J))continue;return yield j(N.ObjectAdditionalProperties,$,`${Z}/${L1(J)}`,B)}}function*_9($,X,Z,Q){yield*n8($8($,X),X,Z,Q)}function*F9($,X,Z,Q){if(!c(Q))return yield j(N.String,$,Z,Q);if(n($.minLength)&&!(Q.length>=$.minLength))yield j(N.StringMinLength,$,Z,Q);if(n($.maxLength)&&!(Q.length<=$.maxLength))yield j(N.StringMaxLength,$,Z,Q);if(!new RegExp($.source,$.flags).test(Q))return yield j(N.RegExp,$,Z,Q)}function*S9($,X,Z,Q){if(!c(Q))return yield j(N.String,$,Z,Q);if(n($.minLength)&&!(Q.length>=$.minLength))yield j(N.StringMinLength,$,Z,Q);if(n($.maxLength)&&!(Q.length<=$.maxLength))yield j(N.StringMaxLength,$,Z,Q);if(c($.pattern)){if(!new RegExp($.pattern).test(Q))yield j(N.StringPattern,$,Z,Q)}if(c($.format)){if(!w8.Has($.format))yield j(N.StringFormatUnknown,$,Z,Q);else if(!w8.Get($.format)(Q))yield j(N.StringFormat,$,Z,Q)}}function*K9($,X,Z,Q){if(!W0(Q))yield j(N.Symbol,$,Z,Q)}function*C9($,X,Z,Q){if(!c(Q))return yield j(N.String,$,Z,Q);if(!new RegExp($.pattern).test(Q))yield j(N.StringPattern,$,Z,Q)}function*j9($,X,Z,Q){yield*n8($8($,X),X,Z,Q)}function*b9($,X,Z,Q){if(!d(Q))return yield j(N.Tuple,$,Z,Q);if($.items===void 0&&Q.length!==0)return yield j(N.TupleLength,$,Z,Q);if(Q.length!==$.maxItems)return yield j(N.TupleLength,$,Z,Q);if(!$.items)return;for(let W=0;W<$.items.length;W++)yield*n8($.items[W],X,`${Z}/${W}`,Q[W])}function*R9($,X,Z,Q){if(!C8(Q))yield j(N.Undefined,$,Z,Q)}function*V9($,X,Z,Q){let W=0;for(let Y of $.anyOf){let z=[...n8(Y,X,Z,Q)];if(z.length===0)return;W+=z.length}if(W>0)yield j(N.Union,$,Z,Q)}function*E9($,X,Z,Q){if(!$2(Q))return yield j(N.Uint8Array,$,Z,Q);if(n($.maxByteLength)&&!(Q.length<=$.maxByteLength))yield j(N.Uint8ArrayMaxByteLength,$,Z,Q);if(n($.minByteLength)&&!(Q.length>=$.minByteLength))yield j(N.Uint8ArrayMinByteLength,$,Z,Q)}function*I9($,X,Z,Q){}function*x9($,X,Z,Q){if(!I8.IsVoidLike(Q))yield j(N.Void,$,Z,Q)}function*k9($,X,Z,Q){if(!j8.Get($[A])($,Q))yield j(N.Kind,$,Z,Q)}function*n8($,X,Z,Q){let W=n($.$id)?[...X,$]:X,Y=$;switch(Y[A]){case"Any":return yield*Z9(Y,W,Z,Q);case"Array":return yield*Q9(Y,W,Z,Q);case"AsyncIterator":return yield*W9(Y,W,Z,Q);case"BigInt":return yield*Y9(Y,W,Z,Q);case"Boolean":return yield*z9(Y,W,Z,Q);case"Constructor":return yield*J9(Y,W,Z,Q);case"Date":return yield*M9(Y,W,Z,Q);case"Function":return yield*B9(Y,W,Z,Q);case"Integer":return yield*q9(Y,W,Z,Q);case"Intersect":return yield*U9(Y,W,Z,Q);case"Iterator":return yield*G9(Y,W,Z,Q);case"Literal":return yield*w9(Y,W,Z,Q);case"Never":return yield*H9(Y,W,Z,Q);case"Not":return yield*D9(Y,W,Z,Q);case"Null":return yield*A9(Y,W,Z,Q);case"Number":return yield*N9(Y,W,Z,Q);case"Object":return yield*P9(Y,W,Z,Q);case"Promise":return yield*L9(Y,W,Z,Q);case"Record":return yield*O9(Y,W,Z,Q);case"Ref":return yield*_9(Y,W,Z,Q);case"RegExp":return yield*F9(Y,W,Z,Q);case"String":return yield*S9(Y,W,Z,Q);case"Symbol":return yield*K9(Y,W,Z,Q);case"TemplateLiteral":return yield*C9(Y,W,Z,Q);case"This":return yield*j9(Y,W,Z,Q);case"Tuple":return yield*b9(Y,W,Z,Q);case"Undefined":return yield*R9(Y,W,Z,Q);case"Union":return yield*V9(Y,W,Z,Q);case"Uint8Array":return yield*E9(Y,W,Z,Q);case"Unknown":return yield*I9(Y,W,Z,Q);case"Void":return yield*x9(Y,W,Z,Q);default:if(!j8.Has(Y[A]))throw new MZ($);return yield*k9(Y,W,Z,Q)}}function d2(...$){let X=$.length===3?n8($[0],$[1],"",$[2]):n8($[0],[],"",$[1]);return new F6(X)}function O1($={}){return{...$,[A]:"Any"}}function $1($={}){return{...$,[A]:"Unknown"}}var G={};x1(G,{TypeGuardUnknownTypeError:()=>BZ,IsVoid:()=>nZ,IsUnsafe:()=>lZ,IsUnknown:()=>iZ,IsUnionLiteral:()=>p9,IsUnion:()=>w$,IsUndefined:()=>uZ,IsUint8Array:()=>cZ,IsTuple:()=>mZ,IsTransform:()=>O8,IsThis:()=>pZ,IsTemplateLiteral:()=>hZ,IsSymbol:()=>vZ,IsString:()=>dZ,IsSchema:()=>p,IsRegExp:()=>yZ,IsRef:()=>fZ,IsRecursive:()=>h9,IsRecord:()=>gZ,IsReadonly:()=>y9,IsProperties:()=>G$,IsPromise:()=>TZ,IsOptional:()=>d9,IsObject:()=>kZ,IsNumber:()=>xZ,IsNull:()=>IZ,IsNot:()=>EZ,IsNever:()=>VZ,IsMappedResult:()=>RZ,IsMappedKey:()=>bZ,IsLiteralValue:()=>jZ,IsLiteralString:()=>KZ,IsLiteralNumber:()=>CZ,IsLiteralBoolean:()=>v9,IsLiteral:()=>h2,IsKindOf:()=>s,IsKind:()=>oZ,IsIterator:()=>SZ,IsIntersect:()=>FZ,IsInteger:()=>_Z,IsFunction:()=>OZ,IsDate:()=>LZ,IsConstructor:()=>PZ,IsBoolean:()=>NZ,IsBigInt:()=>AZ,IsAsyncIterator:()=>DZ,IsArray:()=>HZ,IsAny:()=>wZ});class BZ extends v{}var T9=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function qZ($){try{return new RegExp($),!0}catch{return!1}}function q$($){if(!L8($))return!1;for(let X=0;X<$.length;X++){let Z=$.charCodeAt(X);if(Z>=7&&Z<=13||Z===27||Z===127)return!1}return!0}function UZ($){return U$($)||p($)}function v2($){return b8($)||N2($)}function H8($){return b8($)||d0($)}function U$($){return b8($)||C1($)}function B8($){return b8($)||L8($)}function g9($){return b8($)||L8($)&&q$($)&&qZ($)}function f9($){return b8($)||L8($)&&q$($)}function GZ($){return b8($)||p($)}function y9($){return P8($)&&$[s0]==="Readonly"}function d9($){return P8($)&&$[t8]==="Optional"}function wZ($){return s($,"Any")&&B8($.$id)}function HZ($){return s($,"Array")&&$.type==="array"&&B8($.$id)&&p($.items)&&H8($.minItems)&&H8($.maxItems)&&U$($.uniqueItems)&&GZ($.contains)&&H8($.minContains)&&H8($.maxContains)}function DZ($){return s($,"AsyncIterator")&&$.type==="AsyncIterator"&&B8($.$id)&&p($.items)}function AZ($){return s($,"BigInt")&&$.type==="bigint"&&B8($.$id)&&v2($.exclusiveMaximum)&&v2($.exclusiveMinimum)&&v2($.maximum)&&v2($.minimum)&&v2($.multipleOf)}function NZ($){return s($,"Boolean")&&$.type==="boolean"&&B8($.$id)}function PZ($){return s($,"Constructor")&&$.type==="Constructor"&&B8($.$id)&&Y0($.parameters)&&$.parameters.every((X)=>p(X))&&p($.returns)}function LZ($){return s($,"Date")&&$.type==="Date"&&B8($.$id)&&H8($.exclusiveMaximumTimestamp)&&H8($.exclusiveMinimumTimestamp)&&H8($.maximumTimestamp)&&H8($.minimumTimestamp)&&H8($.multipleOfTimestamp)}function OZ($){return s($,"Function")&&$.type==="Function"&&B8($.$id)&&Y0($.parameters)&&$.parameters.every((X)=>p(X))&&p($.returns)}function _Z($){return s($,"Integer")&&$.type==="integer"&&B8($.$id)&&H8($.exclusiveMaximum)&&H8($.exclusiveMinimum)&&H8($.maximum)&&H8($.minimum)&&H8($.multipleOf)}function G$($){return P8($)&&Object.entries($).every(([X,Z])=>q$(X)&&p(Z))}function FZ($){return s($,"Intersect")&&(L8($.type)&&$.type!=="object"?!1:!0)&&Y0($.allOf)&&$.allOf.every((X)=>p(X)&&!O8(X))&&B8($.type)&&(U$($.unevaluatedProperties)||GZ($.unevaluatedProperties))&&B8($.$id)}function SZ($){return s($,"Iterator")&&$.type==="Iterator"&&B8($.$id)&&p($.items)}function s($,X){return P8($)&&A in $&&$[A]===X}function KZ($){return h2($)&&L8($.const)}function CZ($){return h2($)&&d0($.const)}function v9($){return h2($)&&C1($.const)}function h2($){return s($,"Literal")&&B8($.$id)&&jZ($.const)}function jZ($){return C1($)||d0($)||L8($)}function bZ($){return s($,"MappedKey")&&Y0($.keys)&&$.keys.every((X)=>d0(X)||L8(X))}function RZ($){return s($,"MappedResult")&&G$($.properties)}function VZ($){return s($,"Never")&&P8($.not)&&Object.getOwnPropertyNames($.not).length===0}function EZ($){return s($,"Not")&&p($.not)}function IZ($){return s($,"Null")&&$.type==="null"&&B8($.$id)}function xZ($){return s($,"Number")&&$.type==="number"&&B8($.$id)&&H8($.exclusiveMaximum)&&H8($.exclusiveMinimum)&&H8($.maximum)&&H8($.minimum)&&H8($.multipleOf)}function kZ($){return s($,"Object")&&$.type==="object"&&B8($.$id)&&G$($.properties)&&UZ($.additionalProperties)&&H8($.minProperties)&&H8($.maxProperties)}function TZ($){return s($,"Promise")&&$.type==="Promise"&&B8($.$id)&&p($.item)}function gZ($){return s($,"Record")&&$.type==="object"&&B8($.$id)&&UZ($.additionalProperties)&&P8($.patternProperties)&&((X)=>{let Z=Object.getOwnPropertyNames(X.patternProperties);return Z.length===1&&qZ(Z[0])&&P8(X.patternProperties)&&p(X.patternProperties[Z[0]])})($)}function h9($){return P8($)&&D0 in $&&$[D0]==="Recursive"}function fZ($){return s($,"Ref")&&B8($.$id)&&L8($.$ref)}function yZ($){return s($,"RegExp")&&B8($.$id)&&L8($.source)&&L8($.flags)&&H8($.maxLength)&&H8($.minLength)}function dZ($){return s($,"String")&&$.type==="string"&&B8($.$id)&&H8($.minLength)&&H8($.maxLength)&&g9($.pattern)&&f9($.format)}function vZ($){return s($,"Symbol")&&$.type==="symbol"&&B8($.$id)}function hZ($){return s($,"TemplateLiteral")&&$.type==="string"&&L8($.pattern)&&$.pattern[0]==="^"&&$.pattern[$.pattern.length-1]==="$"}function pZ($){return s($,"This")&&B8($.$id)&&L8($.$ref)}function O8($){return P8($)&&K8 in $}function mZ($){return s($,"Tuple")&&$.type==="array"&&B8($.$id)&&d0($.minItems)&&d0($.maxItems)&&$.minItems===$.maxItems&&(b8($.items)&&b8($.additionalItems)&&$.minItems===0||Y0($.items)&&$.items.every((X)=>p(X)))}function uZ($){return s($,"Undefined")&&$.type==="undefined"&&B8($.$id)}function p9($){return w$($)&&$.anyOf.every((X)=>KZ(X)||CZ(X))}function w$($){return s($,"Union")&&B8($.$id)&&P8($)&&Y0($.anyOf)&&$.anyOf.every((X)=>p(X))}function cZ($){return s($,"Uint8Array")&&$.type==="Uint8Array"&&B8($.$id)&&H8($.minByteLength)&&H8($.maxByteLength)}function iZ($){return s($,"Unknown")&&B8($.$id)}function lZ($){return s($,"Unsafe")}function nZ($){return s($,"Void")&&$.type==="void"&&B8($.$id)}function oZ($){return P8($)&&A in $&&L8($[A])&&!T9.includes($[A])}function p($){return P8($)&&(wZ($)||HZ($)||NZ($)||AZ($)||DZ($)||PZ($)||LZ($)||OZ($)||_Z($)||FZ($)||SZ($)||h2($)||bZ($)||RZ($)||VZ($)||EZ($)||IZ($)||xZ($)||kZ($)||TZ($)||gZ($)||fZ($)||yZ($)||dZ($)||vZ($)||hZ($)||pZ($)||mZ($)||uZ($)||w$($)||cZ($)||iZ($)||lZ($)||nZ($)||oZ($))}class eZ extends v{}var P;(function($){$[$.Union=0]="Union",$[$.True=1]="True",$[$.False=2]="False"})(P||(P={}));function V0($){return $===P.False?$:P.True}function q2($){throw new eZ($)}function g8($){return G.IsNever($)||G.IsIntersect($)||G.IsUnion($)||G.IsUnknown($)||G.IsAny($)}function f8($,X){return G.IsNever(X)?ZQ($,X):G.IsIntersect(X)?S6($,X):G.IsUnion(X)?P$($,X):G.IsUnknown(X)?zQ($,X):G.IsAny(X)?N$($,X):q2("StructuralRight")}function N$($,X){return P.True}function m9($,X){return G.IsIntersect(X)?S6($,X):G.IsUnion(X)&&X.anyOf.some((Z)=>G.IsAny(Z)||G.IsUnknown(Z))?P.True:G.IsUnion(X)?P.Union:G.IsUnknown(X)?P.True:G.IsAny(X)?P.True:P.Union}function u9($,X){return G.IsUnknown($)?P.False:G.IsAny($)?P.Union:G.IsNever($)?P.True:P.False}function c9($,X){return G.IsObject(X)&&K6(X)?P.True:g8(X)?f8($,X):!G.IsArray(X)?P.False:V0(q8($.items,X.items))}function i9($,X){return g8(X)?f8($,X):!G.IsAsyncIterator(X)?P.False:V0(q8($.items,X.items))}function l9($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsBigInt(X)?P.True:P.False}function $Q($,X){return G.IsLiteralBoolean($)?P.True:G.IsBoolean($)?P.True:P.False}function n9($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsBoolean(X)?P.True:P.False}function o9($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):!G.IsConstructor(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>V0(q8(X.parameters[Q],Z))===P.True)?P.False:V0(q8($.returns,X.returns))}function t9($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsDate(X)?P.True:P.False}function s9($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):!G.IsFunction(X)?P.False:$.parameters.length>X.parameters.length?P.False:!$.parameters.every((Z,Q)=>V0(q8(X.parameters[Q],Z))===P.True)?P.False:V0(q8($.returns,X.returns))}function XQ($,X){return G.IsLiteral($)&&z0.IsNumber($.const)?P.True:G.IsNumber($)||G.IsInteger($)?P.True:P.False}function r9($,X){return G.IsInteger(X)||G.IsNumber(X)?P.True:g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):P.False}function S6($,X){return X.allOf.every((Z)=>q8($,Z)===P.True)?P.True:P.False}function a9($,X){return $.allOf.some((Z)=>q8(Z,X)===P.True)?P.True:P.False}function e9($,X){return g8(X)?f8($,X):!G.IsIterator(X)?P.False:V0(q8($.items,X.items))}function $4($,X){return G.IsLiteral(X)&&X.const===$.const?P.True:g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsString(X)?YQ($,X):G.IsNumber(X)?QQ($,X):G.IsInteger(X)?XQ($,X):G.IsBoolean(X)?$Q($,X):P.False}function ZQ($,X){return P.False}function X4($,X){return P.True}function tZ($){let[X,Z]=[$,0];while(!0){if(!G.IsNot(X))break;X=X.not,Z+=1}return Z%2===0?X:$1()}function Z4($,X){return G.IsNot($)?q8(tZ($),X):G.IsNot(X)?q8($,tZ(X)):q2("Invalid fallthrough for Not")}function Q4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsNull(X)?P.True:P.False}function QQ($,X){return G.IsLiteralNumber($)?P.True:G.IsNumber($)||G.IsInteger($)?P.True:P.False}function W4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsInteger(X)||G.IsNumber(X)?P.True:P.False}function B0($,X){return Object.getOwnPropertyNames($.properties).length===X}function sZ($){return K6($)}function rZ($){return B0($,0)||B0($,1)&&"description"in $.properties&&G.IsUnion($.properties.description)&&$.properties.description.anyOf.length===2&&(G.IsString($.properties.description.anyOf[0])&&G.IsUndefined($.properties.description.anyOf[1])||G.IsString($.properties.description.anyOf[1])&&G.IsUndefined($.properties.description.anyOf[0]))}function H$($){return B0($,0)}function aZ($){return B0($,0)}function Y4($){return B0($,0)}function z4($){return B0($,0)}function J4($){return K6($)}function M4($){let X=h0();return B0($,0)||B0($,1)&&"length"in $.properties&&V0(q8($.properties.length,X))===P.True}function B4($){return B0($,0)}function K6($){let X=h0();return B0($,0)||B0($,1)&&"length"in $.properties&&V0(q8($.properties.length,X))===P.True}function q4($){let X=G1([O1()],O1());return B0($,0)||B0($,1)&&"then"in $.properties&&V0(q8($.properties.then,X))===P.True}function WQ($,X){return q8($,X)===P.False?P.False:G.IsOptional($)&&!G.IsOptional(X)?P.False:P.True}function r8($,X){return G.IsUnknown($)?P.False:G.IsAny($)?P.Union:G.IsNever($)||G.IsLiteralString($)&&sZ(X)||G.IsLiteralNumber($)&&H$(X)||G.IsLiteralBoolean($)&&aZ(X)||G.IsSymbol($)&&rZ(X)||G.IsBigInt($)&&Y4(X)||G.IsString($)&&sZ(X)||G.IsSymbol($)&&rZ(X)||G.IsNumber($)&&H$(X)||G.IsInteger($)&&H$(X)||G.IsBoolean($)&&aZ(X)||G.IsUint8Array($)&&J4(X)||G.IsDate($)&&z4(X)||G.IsConstructor($)&&B4(X)||G.IsFunction($)&&M4(X)?P.True:G.IsRecord($)&&G.IsString(D$($))?(()=>{return X[D0]==="Record"?P.True:P.False})():G.IsRecord($)&&G.IsNumber(D$($))?(()=>{return B0(X,0)?P.True:P.False})():P.False}function U4($,X){return g8(X)?f8($,X):G.IsRecord(X)?E0($,X):!G.IsObject(X)?P.False:(()=>{for(let Z of Object.getOwnPropertyNames(X.properties)){if(!(Z in $.properties)&&!G.IsOptional(X.properties[Z]))return P.False;if(G.IsOptional(X.properties[Z]))return P.True;if(WQ($.properties[Z],X.properties[Z])===P.False)return P.False}return P.True})()}function G4($,X){return g8(X)?f8($,X):G.IsObject(X)&&q4(X)?P.True:!G.IsPromise(X)?P.False:V0(q8($.item,X.item))}function D$($){return A1 in $.patternProperties?h0():(j1 in $.patternProperties)?L0():q2("Unknown record key pattern")}function A$($){return A1 in $.patternProperties?$.patternProperties[A1]:(j1 in $.patternProperties)?$.patternProperties[j1]:q2("Unable to get record value schema")}function E0($,X){let[Z,Q]=[D$(X),A$(X)];return G.IsLiteralString($)&&G.IsNumber(Z)&&V0(q8($,Q))===P.True?P.True:G.IsUint8Array($)&&G.IsNumber(Z)?q8($,Q):G.IsString($)&&G.IsNumber(Z)?q8($,Q):G.IsArray($)&&G.IsNumber(Z)?q8($,Q):G.IsObject($)?(()=>{for(let W of Object.getOwnPropertyNames($.properties))if(WQ(Q,$.properties[W])===P.False)return P.False;return P.True})():P.False}function w4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):!G.IsRecord(X)?P.False:q8(A$($),A$(X))}function H4($,X){let Z=G.IsRegExp($)?L0():$,Q=G.IsRegExp(X)?L0():X;return q8(Z,Q)}function YQ($,X){return G.IsLiteral($)&&z0.IsString($.const)?P.True:G.IsString($)?P.True:P.False}function D4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsString(X)?P.True:P.False}function A4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsSymbol(X)?P.True:P.False}function N4($,X){return G.IsTemplateLiteral($)?q8(v1($),X):G.IsTemplateLiteral(X)?q8($,v1(X)):q2("Invalid fallthrough for TemplateLiteral")}function P4($,X){return G.IsArray(X)&&$.items!==void 0&&$.items.every((Z)=>q8(Z,X.items)===P.True)}function L4($,X){return G.IsNever($)?P.True:G.IsUnknown($)?P.False:G.IsAny($)?P.Union:P.False}function O4($,X){return g8(X)?f8($,X):G.IsObject(X)&&K6(X)?P.True:G.IsArray(X)&&P4($,X)?P.True:!G.IsTuple(X)?P.False:z0.IsUndefined($.items)&&!z0.IsUndefined(X.items)||!z0.IsUndefined($.items)&&z0.IsUndefined(X.items)?P.False:z0.IsUndefined($.items)&&!z0.IsUndefined(X.items)?P.True:$.items.every((Z,Q)=>q8(Z,X.items[Q])===P.True)?P.True:P.False}function _4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsUint8Array(X)?P.True:P.False}function F4($,X){return g8(X)?f8($,X):G.IsObject(X)?r8($,X):G.IsRecord(X)?E0($,X):G.IsVoid(X)?C4($,X):G.IsUndefined(X)?P.True:P.False}function P$($,X){return X.anyOf.some((Z)=>q8($,Z)===P.True)?P.True:P.False}function S4($,X){return $.anyOf.every((Z)=>q8(Z,X)===P.True)?P.True:P.False}function zQ($,X){return P.True}function K4($,X){return G.IsNever(X)?ZQ($,X):G.IsIntersect(X)?S6($,X):G.IsUnion(X)?P$($,X):G.IsAny(X)?N$($,X):G.IsString(X)?YQ($,X):G.IsNumber(X)?QQ($,X):G.IsInteger(X)?XQ($,X):G.IsBoolean(X)?$Q($,X):G.IsArray(X)?u9($,X):G.IsTuple(X)?L4($,X):G.IsObject(X)?r8($,X):G.IsUnknown(X)?P.True:P.False}function C4($,X){return G.IsUndefined($)?P.True:G.IsUndefined($)?P.True:P.False}function j4($,X){return G.IsIntersect(X)?S6($,X):G.IsUnion(X)?P$($,X):G.IsUnknown(X)?zQ($,X):G.IsAny(X)?N$($,X):G.IsObject(X)?r8($,X):G.IsVoid(X)?P.True:P.False}function q8($,X){return G.IsTemplateLiteral($)||G.IsTemplateLiteral(X)?N4($,X):G.IsRegExp($)||G.IsRegExp(X)?H4($,X):G.IsNot($)||G.IsNot(X)?Z4($,X):G.IsAny($)?m9($,X):G.IsArray($)?c9($,X):G.IsBigInt($)?l9($,X):G.IsBoolean($)?n9($,X):G.IsAsyncIterator($)?i9($,X):G.IsConstructor($)?o9($,X):G.IsDate($)?t9($,X):G.IsFunction($)?s9($,X):G.IsInteger($)?r9($,X):G.IsIntersect($)?a9($,X):G.IsIterator($)?e9($,X):G.IsLiteral($)?$4($,X):G.IsNever($)?X4($,X):G.IsNull($)?Q4($,X):G.IsNumber($)?W4($,X):G.IsObject($)?U4($,X):G.IsRecord($)?w4($,X):G.IsString($)?D4($,X):G.IsSymbol($)?A4($,X):G.IsTuple($)?O4($,X):G.IsPromise($)?G4($,X):G.IsUint8Array($)?_4($,X):G.IsUndefined($)?F4($,X):G.IsUnion($)?S4($,X):G.IsUnknown($)?K4($,X):G.IsVoid($)?j4($,X):q2(`Unknown left type operand '${$[A]}'`)}function R1($,X){return q8($,X)}function b4($,X,Z,Q,W){let Y={};for(let z of globalThis.Object.getOwnPropertyNames($))Y[z]=p1($[z],X,Z,Q,W);return Y}function R4($,X,Z,Q,W){return b4($.properties,X,Z,Q,W)}function JQ($,X,Z,Q,W){let Y=R4($,X,Z,Q,W);return a(Y)}function V4($,X,Z,Q){let W=R1($,X);return W===P.Union?J8([Z,Q]):W===P.True?Z:Q}function p1($,X,Z,Q,W={}){return F8($)?JQ($,X,Z,Q,W):A0($)?C(MQ($,X,Z,Q,W)):C(V4($,X,Z,Q),W)}function E4($,X,Z,Q,W){return{[$]:p1(Q8($),X,Z,Q,W)}}function I4($,X,Z,Q,W){return $.reduce((Y,z)=>{return{...Y,...E4(z,X,Z,Q,W)}},{})}function x4($,X,Z,Q,W){return I4($.keys,X,Z,Q,W)}function MQ($,X,Z,Q,W){let Y=x4($,X,Z,Q,W);return a(Y)}class BQ extends v{constructor($){super("Unknown type");this.schema=$}}function k4($){return $[A]==="Any"||$[A]==="Unknown"}function o($){return $!==void 0}function T4($,X,Z){return!0}function g4($,X,Z){if(!d(Z))return!1;if(o($.minItems)&&!(Z.length>=$.minItems))return!1;if(o($.maxItems)&&!(Z.length<=$.maxItems))return!1;if(!Z.every((Y)=>o8($.items,X,Y)))return!1;if($.uniqueItems===!0&&!function(){let Y=new Set;for(let z of Z){let J=b1(z);if(Y.has(J))return!1;else Y.add(J)}return!0}())return!1;if(!(o($.contains)||f($.minContains)||f($.maxContains)))return!0;let Q=o($.contains)?$.contains:z8(),W=Z.reduce((Y,z)=>o8(Q,X,z)?Y+1:Y,0);if(W===0)return!1;if(f($.minContains)&&W<$.minContains)return!1;if(f($.maxContains)&&W>$.maxContains)return!1;return!0}function f4($,X,Z){return G6(Z)}function y4($,X,Z){if(!l8(Z))return!1;if(o($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(o($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(o($.maximum)&&!(Z<=$.maximum))return!1;if(o($.minimum)&&!(Z>=$.minimum))return!1;if(o($.multipleOf)&&Z%$.multipleOf!==BigInt(0))return!1;return!0}function d4($,X,Z){return t0(Z)}function v4($,X,Z){return o8($.returns,X,Z.prototype)}function h4($,X,Z){if(!w0(Z))return!1;if(o($.exclusiveMaximumTimestamp)&&!(Z.getTime()<$.exclusiveMaximumTimestamp))return!1;if(o($.exclusiveMinimumTimestamp)&&!(Z.getTime()>$.exclusiveMinimumTimestamp))return!1;if(o($.maximumTimestamp)&&!(Z.getTime()<=$.maximumTimestamp))return!1;if(o($.minimumTimestamp)&&!(Z.getTime()>=$.minimumTimestamp))return!1;if(o($.multipleOfTimestamp)&&Z.getTime()%$.multipleOfTimestamp!==0)return!1;return!0}function p4($,X,Z){return A6(Z)}function m4($,X,Z){if(!D6(Z))return!1;if(o($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(o($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(o($.maximum)&&!(Z<=$.maximum))return!1;if(o($.minimum)&&!(Z>=$.minimum))return!1;if(o($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function u4($,X,Z){let Q=$.allOf.every((W)=>o8(W,X,Z));if($.unevaluatedProperties===!1){let W=new RegExp(N1($)),Y=Object.getOwnPropertyNames(Z).every((z)=>W.test(z));return Q&&Y}else if(p($.unevaluatedProperties)){let W=new RegExp(N1($)),Y=Object.getOwnPropertyNames(Z).every((z)=>W.test(z)||o8($.unevaluatedProperties,X,Z[z]));return Q&&Y}else return Q}function c4($,X,Z){return w6(Z)}function i4($,X,Z){return Z===$.const}function l4($,X,Z){return!1}function n4($,X,Z){return!o8($.not,X,Z)}function o4($,X,Z){return U1(Z)}function t4($,X,Z){if(!I8.IsNumberLike(Z))return!1;if(o($.exclusiveMaximum)&&!(Z<$.exclusiveMaximum))return!1;if(o($.exclusiveMinimum)&&!(Z>$.exclusiveMinimum))return!1;if(o($.minimum)&&!(Z>=$.minimum))return!1;if(o($.maximum)&&!(Z<=$.maximum))return!1;if(o($.multipleOf)&&Z%$.multipleOf!==0)return!1;return!0}function s4($,X,Z){if(!I8.IsObjectLike(Z))return!1;if(o($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let Q=Object.getOwnPropertyNames($.properties);for(let W of Q){let Y=$.properties[W];if($.required&&$.required.includes(W)){if(!o8(Y,X,Z[W]))return!1;if((P1(Y)||k4(Y))&&!(W in Z))return!1}else if(I8.IsExactOptionalProperty(Z,W)&&!o8(Y,X,Z[W]))return!1}if($.additionalProperties===!1){let W=Object.getOwnPropertyNames(Z);if($.required&&$.required.length===Q.length&&W.length===Q.length)return!0;else return W.every((Y)=>Q.includes(Y))}else if(typeof $.additionalProperties==="object")return Object.getOwnPropertyNames(Z).every((Y)=>Q.includes(Y)||o8($.additionalProperties,X,Z[Y]));else return!0}function r4($,X,Z){return H6(Z)}function a4($,X,Z){if(!I8.IsRecordLike(Z))return!1;if(o($.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=$.minProperties))return!1;if(o($.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=$.maxProperties))return!1;let[Q,W]=Object.entries($.patternProperties)[0],Y=new RegExp(Q),z=Object.entries(Z).every(([w,q])=>{return Y.test(w)?o8(W,X,q):!0}),J=typeof $.additionalProperties==="object"?Object.entries(Z).every(([w,q])=>{return!Y.test(w)?o8($.additionalProperties,X,q):!0}):!0,B=$.additionalProperties===!1?Object.getOwnPropertyNames(Z).every((w)=>{return Y.test(w)}):!0;return z&&J&&B}function e4($,X,Z){return o8($8($,X),X,Z)}function $5($,X,Z){let Q=new RegExp($.source,$.flags);if(o($.minLength)){if(!(Z.length>=$.minLength))return!1}if(o($.maxLength)){if(!(Z.length<=$.maxLength))return!1}return Q.test(Z)}function X5($,X,Z){if(!c(Z))return!1;if(o($.minLength)){if(!(Z.length>=$.minLength))return!1}if(o($.maxLength)){if(!(Z.length<=$.maxLength))return!1}if(o($.pattern)){if(!new RegExp($.pattern).test(Z))return!1}if(o($.format)){if(!w8.Has($.format))return!1;return w8.Get($.format)(Z)}return!0}function Z5($,X,Z){return W0(Z)}function Q5($,X,Z){return c(Z)&&new RegExp($.pattern).test(Z)}function W5($,X,Z){return o8($8($,X),X,Z)}function Y5($,X,Z){if(!d(Z))return!1;if($.items===void 0&&Z.length!==0)return!1;if(Z.length!==$.maxItems)return!1;if(!$.items)return!0;for(let Q=0;Q<$.items.length;Q++)if(!o8($.items[Q],X,Z[Q]))return!1;return!0}function z5($,X,Z){return C8(Z)}function J5($,X,Z){return $.anyOf.some((Q)=>o8(Q,X,Z))}function M5($,X,Z){if(!$2(Z))return!1;if(o($.maxByteLength)&&!(Z.length<=$.maxByteLength))return!1;if(o($.minByteLength)&&!(Z.length>=$.minByteLength))return!1;return!0}function B5($,X,Z){return!0}function q5($,X,Z){return I8.IsVoidLike(Z)}function U5($,X,Z){if(!j8.Has($[A]))return!1;return j8.Get($[A])($,Z)}function o8($,X,Z){let Q=o($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Any":return T4(W,Q,Z);case"Array":return g4(W,Q,Z);case"AsyncIterator":return f4(W,Q,Z);case"BigInt":return y4(W,Q,Z);case"Boolean":return d4(W,Q,Z);case"Constructor":return v4(W,Q,Z);case"Date":return h4(W,Q,Z);case"Function":return p4(W,Q,Z);case"Integer":return m4(W,Q,Z);case"Intersect":return u4(W,Q,Z);case"Iterator":return c4(W,Q,Z);case"Literal":return i4(W,Q,Z);case"Never":return l4(W,Q,Z);case"Not":return n4(W,Q,Z);case"Null":return o4(W,Q,Z);case"Number":return t4(W,Q,Z);case"Object":return s4(W,Q,Z);case"Promise":return r4(W,Q,Z);case"Record":return a4(W,Q,Z);case"Ref":return e4(W,Q,Z);case"RegExp":return $5(W,Q,Z);case"String":return X5(W,Q,Z);case"Symbol":return Z5(W,Q,Z);case"TemplateLiteral":return Q5(W,Q,Z);case"This":return W5(W,Q,Z);case"Tuple":return Y5(W,Q,Z);case"Undefined":return z5(W,Q,Z);case"Union":return J5(W,Q,Z);case"Uint8Array":return M5(W,Q,Z);case"Unknown":return B5(W,Q,Z);case"Void":return q5(W,Q,Z);default:if(!j8.Has(W[A]))throw new BQ(W);return U5(W,Q,Z)}}function W8(...$){return $.length===3?o8($[0],$[1],$[2]):o8($[0],[],$[1])}function G5($){let X={};for(let Z of Object.getOwnPropertyNames($))X[Z]=U8($[Z]);for(let Z of Object.getOwnPropertySymbols($))X[Z]=U8($[Z]);return X}function w5($){return $.map((X)=>U8(X))}function H5($){return $.slice()}function D5($){return new Date($.toISOString())}function A5($){return $}function U8($){if(d($))return w5($);if(w0($))return D5($);if(N8($))return G5($);if(b0($))return H5($);if(H0($))return A5($);throw new Error("ValueClone: Unable to clone value")}class I0 extends v{constructor($,X){super(X);this.schema=$}}function X8($){return typeof $==="function"?$:U8($)}function N5($,X){if(i($,"default"))return X8($.default);else return{}}function P5($,X){if($.uniqueItems===!0&&!i($,"default"))throw new I0($,"Array with the uniqueItems constraint requires a default value");else if("contains"in $&&!i($,"default"))throw new I0($,"Array with the contains constraint requires a default value");else if("default"in $)return X8($.default);else if($.minItems!==void 0)return Array.from({length:$.minItems}).map((Z)=>{return F0($.items,X)});else return[]}function L5($,X){if(i($,"default"))return X8($.default);else return async function*(){}()}function O5($,X){if(i($,"default"))return X8($.default);else return BigInt(0)}function _5($,X){if(i($,"default"))return X8($.default);else return!1}function F5($,X){if(i($,"default"))return X8($.default);else{let Z=F0($.returns,X);if(typeof Z==="object"&&!Array.isArray(Z))return class{constructor(){for(let[Q,W]of Object.entries(Z)){let Y=this;Y[Q]=W}}};else return class{}}}function S5($,X){if(i($,"default"))return X8($.default);else if($.minimumTimestamp!==void 0)return new Date($.minimumTimestamp);else return new Date}function K5($,X){if(i($,"default"))return X8($.default);else return()=>F0($.returns,X)}function C5($,X){if(i($,"default"))return X8($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function j5($,X){if(i($,"default"))return X8($.default);else{let Z=$.allOf.reduce((Q,W)=>{let Y=F0(W,X);return typeof Y==="object"?{...Q,...Y}:Y},{});if(!W8($,X,Z))throw new I0($,"Intersect produced invalid value. Consider using a default value.");return Z}}function b5($,X){if(i($,"default"))return X8($.default);else return function*(){}()}function R5($,X){if(i($,"default"))return X8($.default);else return $.const}function V5($,X){if(i($,"default"))return X8($.default);else throw new I0($,"Never types cannot be created. Consider using a default value.")}function E5($,X){if(i($,"default"))return X8($.default);else throw new I0($,"Not types must have a default value")}function I5($,X){if(i($,"default"))return X8($.default);else return null}function x5($,X){if(i($,"default"))return X8($.default);else if($.minimum!==void 0)return $.minimum;else return 0}function k5($,X){if(i($,"default"))return X8($.default);else{let Z=new Set($.required),Q={};for(let[W,Y]of Object.entries($.properties)){if(!Z.has(W))continue;Q[W]=F0(Y,X)}return Q}}function T5($,X){if(i($,"default"))return X8($.default);else return Promise.resolve(F0($.item,X))}function g5($,X){let[Z,Q]=Object.entries($.patternProperties)[0];if(i($,"default"))return X8($.default);else if(!(Z===j1||Z===A1)){let W=Z.slice(1,Z.length-1).split("|"),Y={};for(let z of W)Y[z]=F0(Q,X);return Y}else return{}}function f5($,X){if(i($,"default"))return X8($.default);else return F0($8($,X),X)}function y5($,X){if(i($,"default"))return X8($.default);else throw new I0($,"RegExp types cannot be created. Consider using a default value.")}function d5($,X){if($.pattern!==void 0)if(!i($,"default"))throw new I0($,"String types with patterns must specify a default value");else return X8($.default);else if($.format!==void 0)if(!i($,"default"))throw new I0($,"String types with formats must specify a default value");else return X8($.default);else if(i($,"default"))return X8($.default);else if($.minLength!==void 0)return Array.from({length:$.minLength}).map(()=>" ").join("");else return""}function v5($,X){if(i($,"default"))return X8($.default);else if("value"in $)return Symbol.for($.value);else return Symbol()}function h5($,X){if(i($,"default"))return X8($.default);if(!L6($))throw new I0($,"Can only create template literals that produce a finite variants. Consider using a default value.");return J2($)[0]}function p5($,X){if(qQ++>t5)throw new I0($,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(i($,"default"))return X8($.default);else return F0($8($,X),X)}function m5($,X){if(i($,"default"))return X8($.default);if($.items===void 0)return[];else return Array.from({length:$.minItems}).map((Z,Q)=>F0($.items[Q],X))}function u5($,X){if(i($,"default"))return X8($.default);else return}function c5($,X){if(i($,"default"))return X8($.default);else if($.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return F0($.anyOf[0],X)}function i5($,X){if(i($,"default"))return X8($.default);else if($.minByteLength!==void 0)return new Uint8Array($.minByteLength);else return new Uint8Array(0)}function l5($,X){if(i($,"default"))return X8($.default);else return{}}function n5($,X){if(i($,"default"))return X8($.default);else return}function o5($,X){if(i($,"default"))return X8($.default);else throw new Error("User defined types must specify a default value")}function F0($,X){let Z=c($.$id)?[...X,$]:X,Q=$;switch(Q[A]){case"Any":return N5(Q,Z);case"Array":return P5(Q,Z);case"AsyncIterator":return L5(Q,Z);case"BigInt":return O5(Q,Z);case"Boolean":return _5(Q,Z);case"Constructor":return F5(Q,Z);case"Date":return S5(Q,Z);case"Function":return K5(Q,Z);case"Integer":return C5(Q,Z);case"Intersect":return j5(Q,Z);case"Iterator":return b5(Q,Z);case"Literal":return R5(Q,Z);case"Never":return V5(Q,Z);case"Not":return E5(Q,Z);case"Null":return I5(Q,Z);case"Number":return x5(Q,Z);case"Object":return k5(Q,Z);case"Promise":return T5(Q,Z);case"Record":return g5(Q,Z);case"Ref":return f5(Q,Z);case"RegExp":return y5(Q,Z);case"String":return d5(Q,Z);case"Symbol":return v5(Q,Z);case"TemplateLiteral":return h5(Q,Z);case"This":return p5(Q,Z);case"Tuple":return m5(Q,Z);case"Undefined":return u5(Q,Z);case"Union":return c5(Q,Z);case"Uint8Array":return i5(Q,Z);case"Unknown":return l5(Q,Z);case"Void":return n5(Q,Z);default:if(!j8.Has(Q[A]))throw new I0(Q,"Unknown type");return o5(Q,Z)}}var t5=512,qQ=0;function S0(...$){return qQ=0,$.length===2?F0($[0],$[1]):F0($[0],[])}class L$ extends v{constructor($,X){super(X);this.schema=$}}function s5($,X,Z){if($[A]==="Object"&&typeof Z==="object"&&!U1(Z)){let Q=$,W=Object.getOwnPropertyNames(Z),Y=Object.entries(Q.properties),[z,J]=[1/Y.length,Y.length];return Y.reduce((B,[w,q])=>{let D=q[A]==="Literal"&&q.const===Z[w]?J:0,O=W8(q,X,Z[w])?z:0,M=W.includes(w)?z:0;return B+(D+O+M)},0)}else return W8($,X,Z)?1:0}function r5($,X,Z){let Q=$.anyOf.map((z)=>$8(z,X)),[W,Y]=[Q[0],0];for(let z of Q){let J=s5(z,X,Z);if(J>Y)W=z,Y=J}return W}function a5($,X,Z){if("default"in $)return typeof Z==="function"?$.default:U8($.default);else{let Q=r5($,X,Z);return C6(Q,X,Z)}}function e5($,X,Z){return W8($,X,Z)?U8(Z):S0($,X)}function $z($,X,Z){return W8($,X,Z)?Z:S0($,X)}function Xz($,X,Z){if(W8($,X,Z))return U8(Z);let Q=d(Z)?U8(Z):S0($,X),W=f($.minItems)&&Q.length<$.minItems?[...Q,...Array.from({length:$.minItems-Q.length},()=>null)]:Q,z=(f($.maxItems)&&W.length>$.maxItems?W.slice(0,$.maxItems):W).map((B)=>X1($.items,X,B));if($.uniqueItems!==!0)return z;let J=[...new Set(z)];if(!W8($,X,J))throw new L$($,"Array cast produced invalid data due to uniqueItems constraint");return J}function Zz($,X,Z){if(W8($,X,Z))return S0($,X);let Q=new Set($.returns.required||[]),W=function(){};for(let[Y,z]of Object.entries($.returns.properties)){if(!Q.has(Y)&&Z.prototype[Y]===void 0)continue;W.prototype[Y]=X1(z,X,Z.prototype[Y])}return W}function Qz($,X,Z){let Q=S0($,X),W=N8(Q)&&N8(Z)?{...Q,...Z}:Z;return W8($,X,W)?W:S0($,X)}function Wz($,X,Z){throw new L$($,"Never types cannot be cast")}function Yz($,X,Z){if(W8($,X,Z))return Z;if(Z===null||typeof Z!=="object")return S0($,X);let Q=new Set($.required||[]),W={};for(let[Y,z]of Object.entries($.properties)){if(!Q.has(Y)&&Z[Y]===void 0)continue;W[Y]=X1(z,X,Z[Y])}if(typeof $.additionalProperties==="object"){let Y=Object.getOwnPropertyNames($.properties);for(let z of Object.getOwnPropertyNames(Z)){if(Y.includes(z))continue;W[z]=X1($.additionalProperties,X,Z[z])}}return W}function zz($,X,Z){if(W8($,X,Z))return U8(Z);if(Z===null||typeof Z!=="object"||Array.isArray(Z)||Z instanceof Date)return S0($,X);let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[z,J]of Object.entries(Z))Y[z]=X1(W,X,J);return Y}function Jz($,X,Z){return X1($8($,X),X,Z)}function Mz($,X,Z){return X1($8($,X),X,Z)}function Bz($,X,Z){if(W8($,X,Z))return U8(Z);if(!d(Z))return S0($,X);if($.items===void 0)return[];return $.items.map((Q,W)=>X1(Q,X,Z[W]))}function qz($,X,Z){return W8($,X,Z)?U8(Z):a5($,X,Z)}function X1($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch($[A]){case"Array":return Xz(W,Q,Z);case"Constructor":return Zz(W,Q,Z);case"Intersect":return Qz(W,Q,Z);case"Never":return Wz(W,Q,Z);case"Object":return Yz(W,Q,Z);case"Record":return zz(W,Q,Z);case"Ref":return Jz(W,Q,Z);case"This":return Mz(W,Q,Z);case"Tuple":return Bz(W,Q,Z);case"Union":return qz(W,Q,Z);case"Date":case"Symbol":case"Uint8Array":return e5($,X,Z);default:return $z(W,Q,Z)}}function C6(...$){return $.length===3?X1($[0],$[1],$[2]):X1($[0],[],$[1])}function Uz($){return p($)&&$[A]!=="Unsafe"}function Gz($,X,Z){if(!d(Z))return Z;return Z.map((Q)=>K0($.items,X,Q))}function wz($,X,Z){let Q=$.unevaluatedProperties,Y=$.allOf.map((J)=>K0(J,X,U8(Z))).reduce((J,B)=>i8(B)?{...J,...B}:B,{});if(!i8(Z)||!i8(Y)||!p(Q))return Y;let z=M0($);for(let J of Object.getOwnPropertyNames(Z)){if(z.includes(J))continue;if(W8(Q,X,Z[J]))Y[J]=K0(Q,X,Z[J])}return Y}function Hz($,X,Z){if(!i8(Z)||d(Z))return Z;let Q=$.additionalProperties;for(let W of Object.getOwnPropertyNames(Z)){if(W in $.properties){Z[W]=K0($.properties[W],X,Z[W]);continue}if(p(Q)&&W8(Q,X,Z[W])){Z[W]=K0(Q,X,Z[W]);continue}delete Z[W]}return Z}function Dz($,X,Z){if(!i8(Z))return Z;let Q=$.additionalProperties,W=Object.getOwnPropertyNames(Z),[Y,z]=Object.entries($.patternProperties)[0],J=new RegExp(Y);for(let B of W){if(J.test(B)){Z[B]=K0(z,X,Z[B]);continue}if(p(Q)&&W8(Q,X,Z[B])){Z[B]=K0(Q,X,Z[B]);continue}delete Z[B]}return Z}function Az($,X,Z){return K0($8($,X),X,Z)}function Nz($,X,Z){return K0($8($,X),X,Z)}function Pz($,X,Z){if(!d(Z))return Z;if(C8($.items))return[];let Q=Math.min(Z.length,$.items.length);for(let W=0;W<Q;W++)Z[W]=K0($.items[W],X,Z[W]);return Z.length>Q?Z.slice(0,Q):Z}function Lz($,X,Z){for(let Q of $.anyOf)if(Uz(Q)&&W8(Q,X,Z))return K0(Q,X,Z);return Z}function K0($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Array":return Gz(W,Q,Z);case"Intersect":return wz(W,Q,Z);case"Object":return Hz(W,Q,Z);case"Record":return Dz(W,Q,Z);case"Ref":return Az(W,Q,Z);case"This":return Nz(W,Q,Z);case"Tuple":return Pz(W,Q,Z);case"Union":return Lz(W,Q,Z);default:return Z}}function O$(...$){return $.length===3?K0($[0],$[1],$[2]):K0($[0],[],$[1])}function j6($){return c($)&&!isNaN($)&&!isNaN(parseFloat($))}function Oz($){return l8($)||t0($)||f($)}function p2($){return $===!0||f($)&&$===1||l8($)&&$===BigInt("1")||c($)&&($.toLowerCase()==="true"||$==="1")}function m2($){return $===!1||f($)&&($===0||Object.is($,-0))||l8($)&&$===BigInt("0")||c($)&&($.toLowerCase()==="false"||$==="0"||$==="-0")}function _z($){return c($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function Fz($){return c($)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function Sz($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test($)}function Kz($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test($)}function Cz($){return c($)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test($)}function jz($,X){let Z=GQ($);return Z===X?Z:$}function bz($,X){let Z=wQ($);return Z===X?Z:$}function Rz($,X){let Z=UQ($);return Z===X?Z:$}function Vz($,X){return c($.const)?jz(X,$.const):f($.const)?bz(X,$.const):t0($.const)?Rz(X,$.const):U8(X)}function UQ($){return p2($)?!0:m2($)?!1:$}function Ez($){return j6($)?BigInt(parseInt($)):f($)?BigInt($|0):m2($)?BigInt(0):p2($)?BigInt(1):$}function GQ($){return Oz($)?$.toString():W0($)&&$.description!==void 0?$.description.toString():$}function wQ($){return j6($)?parseFloat($):p2($)?1:m2($)?0:$}function Iz($){return j6($)?parseInt($):f($)?$|0:p2($)?1:m2($)?0:$}function xz($){return c($)&&$.toLowerCase()==="null"?null:$}function kz($){return c($)&&$==="undefined"?void 0:$}function Tz($){return w0($)?$:f($)?new Date($):p2($)?new Date(1):m2($)?new Date(0):j6($)?new Date(parseInt($)):Fz($)?new Date(`1970-01-01T${$}.000Z`):_z($)?new Date(`1970-01-01T${$}`):Kz($)?new Date(`${$}.000Z`):Sz($)?new Date($):Cz($)?new Date(`${$}T00:00:00.000Z`):$}function gz($){return $}function fz($,X,Z){return(d(Z)?Z:[Z]).map((W)=>Z1($.items,X,W))}function yz($,X,Z){return Ez(Z)}function dz($,X,Z){return UQ(Z)}function vz($,X,Z){return Tz(Z)}function hz($,X,Z){return Iz(Z)}function pz($,X,Z){return $.allOf.reduce((Q,W)=>Z1(W,X,Q),Z)}function mz($,X,Z){return Vz($,Z)}function uz($,X,Z){return xz(Z)}function cz($,X,Z){return wQ(Z)}function iz($,X,Z){if(!i8(Z))return Z;let W={};for(let Y of Object.keys(Z))W[Y]=i($.properties,Y)?Z1($.properties[Y],X,Z[Y]):Z[Y];return W}function lz($,X,Z){let Q=Object.getOwnPropertyNames($.patternProperties)[0],W=$.patternProperties[Q],Y={};for(let[z,J]of Object.entries(Z))Y[z]=Z1(W,X,J);return Y}function nz($,X,Z){return Z1($8($,X),X,Z)}function oz($,X,Z){return GQ(Z)}function tz($,X,Z){return c(Z)||f(Z)?Symbol(Z):Z}function sz($,X,Z){return Z1($8($,X),X,Z)}function rz($,X,Z){if(!(d(Z)&&!C8($.items)))return Z;return Z.map((W,Y)=>{return Y<$.items.length?Z1($.items[Y],X,W):W})}function az($,X,Z){return kz(Z)}function ez($,X,Z){for(let Q of $.anyOf){let W=Z1(Q,X,Z);if(!W8(Q,X,W))continue;return W}return Z}function Z1($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch($[A]){case"Array":return fz(W,Q,Z);case"BigInt":return yz(W,Q,Z);case"Boolean":return dz(W,Q,Z);case"Date":return vz(W,Q,Z);case"Integer":return hz(W,Q,Z);case"Intersect":return pz(W,Q,Z);case"Literal":return mz(W,Q,Z);case"Null":return uz(W,Q,Z);case"Number":return cz(W,Q,Z);case"Object":return iz(W,Q,Z);case"Record":return lz(W,Q,Z);case"Ref":return nz(W,Q,Z);case"String":return oz(W,Q,Z);case"Symbol":return tz(W,Q,Z);case"This":return sz(W,Q,Z);case"Tuple":return rz(W,Q,Z);case"Undefined":return az(W,Q,Z);case"Union":return ez(W,Q,Z);default:return gz(Z)}}function _$(...$){return $.length===3?Z1($[0],$[1],$[2]):Z1($[0],[],$[1])}function V1($,X){return X===void 0&&"default"in $?U8($.default):X}function $J($){return p($)&&$[A]!=="Unsafe"}function b6($){return p($)&&"default"in $}function XJ($,X,Z){let Q=V1($,Z);if(!d(Q))return Q;for(let W=0;W<Q.length;W++)Q[W]=x0($.items,X,Q[W]);return Q}function ZJ($,X,Z){let Q=V1($,Z);return $.allOf.reduce((W,Y)=>{let z=x0(Y,X,Q);return i8(z)?{...W,...z}:z},{})}function QJ($,X,Z){let Q=V1($,Z);if(!i8(Q))return Q;let W=$.additionalProperties,Y=Object.getOwnPropertyNames($.properties);for(let z of Y){if(!b6($.properties[z]))continue;Q[z]=x0($.properties[z],X,Q[z])}if(!b6(W))return Q;for(let z of Object.getOwnPropertyNames(Q)){if(Y.includes(z))continue;Q[z]=x0(W,X,Q[z])}return Q}function WJ($,X,Z){let Q=V1($,Z);if(!i8(Q))return Q;let W=$.additionalProperties,[Y,z]=Object.entries($.patternProperties)[0],J=new RegExp(Y);for(let B of Object.getOwnPropertyNames(Q)){if(!(J.test(B)&&b6(z)))continue;Q[B]=x0(z,X,Q[B])}if(!b6(W))return Q;for(let B of Object.getOwnPropertyNames(Q)){if(J.test(B))continue;Q[B]=x0(W,X,Q[B])}return Q}function YJ($,X,Z){return x0($8($,X),X,V1($,Z))}function zJ($,X,Z){return x0($8($,X),X,Z)}function JJ($,X,Z){let Q=V1($,Z);if(!d(Q)||C8($.items))return Q;let[W,Y]=[$.items,Math.max($.items.length,Q.length)];for(let z=0;z<Y;z++)if(z<W.length)Q[z]=x0(W[z],X,Q[z]);return Q}function MJ($,X,Z){let Q=V1($,Z);for(let W of $.anyOf){let Y=x0(W,X,Q);if($J(W)&&W8(W,Y))return Y}return Q}function x0($,X,Z){let Q=c($.$id)?[...X,$]:X,W=$;switch(W[A]){case"Array":return XJ(W,Q,Z);case"Intersect":return ZJ(W,Q,Z);case"Object":return QJ(W,Q,Z);case"Record":return WJ(W,Q,Z);case"Ref":return YJ(W,Q,Z);case"This":return zJ(W,Q,Z);case"Tuple":return JJ(W,Q,Z);case"Union":return MJ(W,Q,Z);default:return V1(W,Z)}}function F$(...$){return $.length===3?x0($[0],$[1],$[2]):x0($[0],[],$[1])}var m0={};x1(m0,{ValuePointerRootSetError:()=>S$,ValuePointerRootDeleteError:()=>K$,Set:()=>BJ,Has:()=>UJ,Get:()=>GJ,Format:()=>u2,Delete:()=>qJ});class S$ extends v{constructor($,X,Z){super("Cannot set root value");this.value=$,this.path=X,this.update=Z}}class K$ extends v{constructor($,X){super("Cannot delete root value");this.value=$,this.path=X}}function HQ($){return $.indexOf("~")===-1?$:$.replace(/~1/g,"/").replace(/~0/g,"~")}function*u2($){if($==="")return;let[X,Z]=[0,0];for(let Q=0;Q<$.length;Q++)if($.charAt(Q)==="/")if(Q===0)X=Q+1;else Z=Q,yield HQ($.slice(X,Z)),X=Q+1;else Z=Q;yield HQ($.slice(X))}function BJ($,X,Z){if(X==="")throw new S$($,X,Z);let[Q,W,Y]=[null,$,""];for(let z of u2(X)){if(W[z]===void 0)W[z]={};Q=W,W=W[z],Y=z}Q[Y]=Z}function qJ($,X){if(X==="")throw new K$($,X);let[Z,Q,W]=[null,$,""];for(let Y of u2(X)){if(Q[Y]===void 0||Q[Y]===null)return;Z=Q,Q=Q[Y],W=Y}if(Array.isArray(Z)){let Y=parseInt(W);Z.splice(Y,1)}else delete Z[W]}function UJ($,X){if(X==="")return!0;let[Z,Q,W]=[null,$,""];for(let Y of u2(X)){if(Q[Y]===void 0)return!1;Z=Q,Q=Q[Y],W=Y}return Object.getOwnPropertyNames(Z).includes(W)}function GJ($,X){if(X==="")return $;let Z=$;for(let Q of u2(X)){if(Z[Q]===void 0)return;Z=Z[Q]}return Z}var wJ=M8({type:Q8("insert"),path:L0(),value:$1()}),HJ=M8({type:Q8("update"),path:L0(),value:$1()}),DJ=M8({type:Q8("delete"),path:L0()}),YL=J8([wJ,HJ,DJ]);class C$ extends v{constructor($,X){super(X);this.value=$}}class c2 extends C${constructor($){super($,"Cannot diff objects with symbol keys");this.value=$}}function i2($,X){return{type:"update",path:$,value:X}}function DQ($,X){return{type:"insert",path:$,value:X}}function AQ($){return{type:"delete",path:$}}function*AJ($,X,Z){if(!N8(Z))return yield i2($,Z);let Q=[...globalThis.Object.keys(X),...globalThis.Object.getOwnPropertySymbols(X)],W=[...globalThis.Object.keys(Z),...globalThis.Object.getOwnPropertySymbols(Z)];for(let Y of Q){if(W0(Y))throw new c2(Y);if(C8(Z[Y])&&W.includes(Y))yield i2(`${$}/${globalThis.String(Y)}`,void 0)}for(let Y of W){if(C8(X[Y])||C8(Z[Y]))continue;if(W0(Y))throw new c2(Y);yield*R6(`${$}/${globalThis.String(Y)}`,X[Y],Z[Y])}for(let Y of W){if(W0(Y))throw new c2(Y);if(C8(X[Y]))yield DQ(`${$}/${globalThis.String(Y)}`,Z[Y])}for(let Y of Q.reverse()){if(W0(Y))throw new c2(Y);if(C8(Z[Y])&&!W.includes(Y))yield AQ(`${$}/${globalThis.String(Y)}`)}}function*NJ($,X,Z){if(!d(Z))return yield i2($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*R6(`${$}/${Q}`,X[Q],Z[Q]);for(let Q=0;Q<Z.length;Q++){if(Q<X.length)continue;yield DQ(`${$}/${Q}`,Z[Q])}for(let Q=X.length-1;Q>=0;Q--){if(Q<Z.length)continue;yield AQ(`${$}/${Q}`)}}function*PJ($,X,Z){if(!b0(Z)||X.length!==Z.length||globalThis.Object.getPrototypeOf(X).constructor.name!==globalThis.Object.getPrototypeOf(Z).constructor.name)return yield i2($,Z);for(let Q=0;Q<Math.min(X.length,Z.length);Q++)yield*R6(`${$}/${Q}`,X[Q],Z[Q])}function*LJ($,X,Z){if(X===Z)return;yield i2($,Z)}function*R6($,X,Z){if(N8(X))return yield*AJ($,X,Z);if(d(X))return yield*NJ($,X,Z);if(b0(X))return yield*PJ($,X,Z);if(H0(X))return yield*LJ($,X,Z);throw new C$(X,"Unable to create diff edits for unknown value")}function NQ($,X){return[...R6("",$,X)]}function OJ($){return $.length>0&&$[0].path===""&&$[0].type==="update"}function _J($){return $.length===0}function PQ($,X){if(OJ(X))return U8(X[0].value);if(_J(X))return U8($);let Z=U8($);for(let Q of X)switch(Q.type){case"insert":{m0.Set(Z,Q.path,Q.value);break}case"update":{m0.Set(Z,Q.path,Q.value);break}case"delete":{m0.Delete(Z,Q.path);break}}return Z}function FJ($,X){if(!N8(X))return!1;let Z=[...Object.keys($),...Object.getOwnPropertySymbols($)],Q=[...Object.keys(X),...Object.getOwnPropertySymbols(X)];if(Z.length!==Q.length)return!1;return Z.every((W)=>l2($[W],X[W]))}function SJ($,X){return w0(X)&&$.getTime()===X.getTime()}function KJ($,X){if(!d(X)||$.length!==X.length)return!1;return $.every((Z,Q)=>l2(Z,X[Q]))}function CJ($,X){if(!b0(X)||$.length!==X.length||Object.getPrototypeOf($).constructor.name!==Object.getPrototypeOf(X).constructor.name)return!1;return $.every((Z,Q)=>l2(Z,X[Q]))}function jJ($,X){return $===X}function l2($,X){if(N8($))return FJ($,X);if(w0($))return SJ($,X);if(b0($))return CJ($,X);if(d($))return KJ($,X);if(H0($))return jJ($,X);throw new Error("ValueEquals: Unable to compare value")}class j$ extends v{constructor($){super($)}}function bJ($,X,Z,Q){if(!N8(Z))m0.Set($,X,U8(Q));else{let W=Object.getOwnPropertyNames(Z),Y=Object.getOwnPropertyNames(Q);for(let z of W)if(!Y.includes(z))delete Z[z];for(let z of Y)if(!W.includes(z))Z[z]=null;for(let z of Y)b$($,`${X}/${z}`,Z[z],Q[z])}}function RJ($,X,Z,Q){if(!d(Z))m0.Set($,X,U8(Q));else{for(let W=0;W<Q.length;W++)b$($,`${X}/${W}`,Z[W],Q[W]);Z.splice(Q.length)}}function VJ($,X,Z,Q){if(b0(Z)&&Z.length===Q.length)for(let W=0;W<Z.length;W++)Z[W]=Q[W];else m0.Set($,X,U8(Q))}function EJ($,X,Z,Q){if(Z===Q)return;m0.Set($,X,Q)}function b$($,X,Z,Q){if(d(Q))return RJ($,X,Z,Q);if(b0(Q))return VJ($,X,Z,Q);if(N8(Q))return bJ($,X,Z,Q);if(H0(Q))return EJ($,X,Z,Q)}function LQ($){return b0($)||H0($)}function IJ($,X){return N8($)&&d(X)||d($)&&N8(X)}function OQ($,X){if(LQ($)||LQ(X))throw new j$("Only object and array types can be mutated at the root level");if(IJ($,X))throw new j$("Cannot assign due type mismatch of assignable values");b$($,"",$,X)}class n2 extends v{constructor($,X,Z){super("Unable to decode value as it does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class V6 extends v{constructor($,X,Z,Q){super(Q instanceof Error?Q.message:"Unknown error");this.schema=$,this.path=X,this.value=Z,this.error=Q}}function R8($,X,Z){try{return O8($)?$[K8].Decode(Z):Z}catch(Q){throw new V6($,X,Z,Q)}}function xJ($,X,Z,Q){return d(Q)?R8($,Z,Q.map((W,Y)=>Q1($.items,X,`${Z}/${Y}`,W))):R8($,Z,Q)}function kJ($,X,Z,Q){if(!N8(Q)||H0(Q))return R8($,Z,Q);let W=_6($),Y=W.map((q)=>q[0]),z={...Q};for(let[q,D]of W)if(q in z)z[q]=Q1(D,X,`${Z}/${q}`,z[q]);if(!O8($.unevaluatedProperties))return R8($,Z,z);let J=Object.getOwnPropertyNames(z),B=$.unevaluatedProperties,w={...z};for(let q of J)if(!Y.includes(q))w[q]=R8(B,`${Z}/${q}`,w[q]);return R8($,Z,w)}function TJ($,X,Z,Q){return R8($,Z,Q1($.not,X,Z,Q))}function gJ($,X,Z,Q){if(!N8(Q))return R8($,Z,Q);let W=M0($),Y={...Q};for(let w of W)if(w in Y)Y[w]=Q1($.properties[w],X,`${Z}/${w}`,Y[w]);if(!p($.additionalProperties))return R8($,Z,Y);let z=Object.getOwnPropertyNames(Y),J=$.additionalProperties,B={...Y};for(let w of z)if(!W.includes(w))B[w]=R8(J,`${Z}/${w}`,B[w]);return R8($,Z,B)}function fJ($,X,Z,Q){if(!N8(Q))return R8($,Z,Q);let W=Object.getOwnPropertyNames($.patternProperties)[0],Y=new RegExp(W),z={...Q};for(let q of Object.getOwnPropertyNames(Q))if(Y.test(q))z[q]=Q1($.patternProperties[W],X,`${Z}/${q}`,z[q]);if(!p($.additionalProperties))return R8($,Z,z);let J=Object.getOwnPropertyNames(z),B=$.additionalProperties,w={...z};for(let q of J)if(!Y.test(q))w[q]=R8(B,`${Z}/${q}`,w[q]);return R8($,Z,w)}function yJ($,X,Z,Q){let W=$8($,X);return R8($,Z,Q1(W,X,Z,Q))}function dJ($,X,Z,Q){let W=$8($,X);return R8($,Z,Q1(W,X,Z,Q))}function vJ($,X,Z,Q){return d(Q)&&d($.items)?R8($,Z,$.items.map((W,Y)=>Q1(W,X,`${Z}/${Y}`,Q[Y]))):R8($,Z,Q)}function hJ($,X,Z,Q){for(let W of $.anyOf){if(!W8(W,X,Q))continue;let Y=Q1(W,X,Z,Q);return R8($,Z,Y)}return R8($,Z,Q)}function Q1($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[A]){case"Array":return xJ(Y,W,Z,Q);case"Intersect":return kJ(Y,W,Z,Q);case"Not":return TJ(Y,W,Z,Q);case"Object":return gJ(Y,W,Z,Q);case"Record":return fJ(Y,W,Z,Q);case"Ref":return yJ(Y,W,Z,Q);case"Symbol":return R8(Y,Z,Q);case"This":return dJ(Y,W,Z,Q);case"Tuple":return vJ(Y,W,Z,Q);case"Union":return hJ(Y,W,Z,Q);default:return R8(Y,Z,Q)}}function E6($,X,Z){return Q1($,X,"",Z)}class o2 extends v{constructor($,X,Z){super("The encoded value does not match the expected schema");this.schema=$,this.value=X,this.error=Z}}class _Q extends v{constructor($,X,Z,Q){super(`${Q instanceof Error?Q.message:"Unknown error"}`);this.schema=$,this.path=X,this.value=Z,this.error=Q}}function p8($,X,Z){try{return O8($)?$[K8].Encode(Z):Z}catch(Q){throw new _Q($,X,Z,Q)}}function pJ($,X,Z,Q){let W=p8($,Z,Q);return d(W)?W.map((Y,z)=>W1($.items,X,`${Z}/${z}`,Y)):W}function mJ($,X,Z,Q){let W=p8($,Z,Q);if(!N8(Q)||H0(Q))return W;let Y=_6($),z=Y.map((D)=>D[0]),J={...W};for(let[D,O]of Y)if(D in J)J[D]=W1(O,X,`${Z}/${D}`,J[D]);if(!O8($.unevaluatedProperties))return p8($,Z,J);let B=Object.getOwnPropertyNames(J),w=$.unevaluatedProperties,q={...J};for(let D of B)if(!z.includes(D))q[D]=p8(w,`${Z}/${D}`,q[D]);return q}function uJ($,X,Z,Q){return p8($.not,Z,p8($,Z,Q))}function cJ($,X,Z,Q){let W=p8($,Z,Q);if(!N8(W))return W;let Y=M0($),z={...W};for(let q of Y)if(q in z)z[q]=W1($.properties[q],X,`${Z}/${q}`,z[q]);if(!p($.additionalProperties))return z;let J=Object.getOwnPropertyNames(z),B=$.additionalProperties,w={...z};for(let q of J)if(!Y.includes(q))w[q]=p8(B,`${Z}/${q}`,w[q]);return w}function iJ($,X,Z,Q){let W=p8($,Z,Q);if(!N8(Q))return W;let Y=Object.getOwnPropertyNames($.patternProperties)[0],z=new RegExp(Y),J={...W};for(let D of Object.getOwnPropertyNames(Q))if(z.test(D))J[D]=W1($.patternProperties[Y],X,`${Z}/${D}`,J[D]);if(!p($.additionalProperties))return p8($,Z,J);let B=Object.getOwnPropertyNames(J),w=$.additionalProperties,q={...J};for(let D of B)if(!z.test(D))q[D]=p8(w,`${Z}/${D}`,q[D]);return q}function lJ($,X,Z,Q){let W=$8($,X),Y=W1(W,X,Z,Q);return p8($,Z,Y)}function nJ($,X,Z,Q){let W=$8($,X),Y=W1(W,X,Z,Q);return p8($,Z,Y)}function oJ($,X,Z,Q){let W=p8($,Z,Q);return d($.items)?$.items.map((Y,z)=>W1(Y,X,`${Z}/${z}`,W[z])):[]}function tJ($,X,Z,Q){for(let W of $.anyOf){if(!W8(W,X,Q))continue;let Y=W1(W,X,Z,Q);return p8($,Z,Y)}for(let W of $.anyOf){let Y=W1(W,X,Z,Q);if(!W8($,X,Y))continue;return p8($,Z,Y)}return p8($,Z,Q)}function W1($,X,Z,Q){let W=typeof $.$id==="string"?[...X,$]:X,Y=$;switch($[A]){case"Array":return pJ(Y,W,Z,Q);case"Intersect":return mJ(Y,W,Z,Q);case"Not":return uJ(Y,W,Z,Q);case"Object":return cJ(Y,W,Z,Q);case"Record":return iJ(Y,W,Z,Q);case"Ref":return lJ(Y,W,Z,Q);case"This":return nJ(Y,W,Z,Q);case"Tuple":return oJ(Y,W,Z,Q);case"Union":return tJ(Y,W,Z,Q);default:return p8(Y,Z,Q)}}function I6($,X,Z){return W1($,X,"",Z)}function sJ($,X){return O8($)||m8($.items,X)}function rJ($,X){return O8($)||m8($.items,X)}function aJ($,X){return O8($)||m8($.returns,X)||$.parameters.some((Z)=>m8(Z,X))}function eJ($,X){return O8($)||m8($.returns,X)||$.parameters.some((Z)=>m8(Z,X))}function $M($,X){return O8($)||O8($.unevaluatedProperties)||$.allOf.some((Z)=>m8(Z,X))}function XM($,X){return O8($)||m8($.items,X)}function ZM($,X){return O8($)||m8($.not,X)}function QM($,X){return O8($)||Object.values($.properties).some((Z)=>m8(Z,X))||p($.additionalProperties)&&m8($.additionalProperties,X)}function WM($,X){return O8($)||m8($.item,X)}function YM($,X){let Z=Object.getOwnPropertyNames($.patternProperties)[0],Q=$.patternProperties[Z];return O8($)||m8(Q,X)||p($.additionalProperties)&&O8($.additionalProperties)}function zM($,X){if(O8($))return!0;return m8($8($,X),X)}function JM($,X){if(O8($))return!0;return m8($8($,X),X)}function MM($,X){return O8($)||!C8($.items)&&$.items.some((Z)=>m8(Z,X))}function BM($,X){return O8($)||$.anyOf.some((Z)=>m8(Z,X))}function m8($,X){let Z=c($.$id)?[...X,$]:X,Q=$;if($.$id&&R$.has($.$id))return!1;if($.$id)R$.add($.$id);switch($[A]){case"Array":return sJ(Q,Z);case"AsyncIterator":return rJ(Q,Z);case"Constructor":return aJ(Q,Z);case"Function":return eJ(Q,Z);case"Intersect":return $M(Q,Z);case"Iterator":return XM(Q,Z);case"Not":return ZM(Q,Z);case"Object":return QM(Q,Z);case"Promise":return WM(Q,Z);case"Record":return YM(Q,Z);case"Ref":return zM(Q,Z);case"This":return JM(Q,Z);case"Tuple":return MM(Q,Z);case"Union":return BM(Q,Z);default:return O8($)}}var R$=new Set;function t2($,X){return R$.clear(),m8($,X)}var m={};x1(m,{Patch:()=>_M,Mutate:()=>FM,Hash:()=>OM,Errors:()=>E$,Equal:()=>PM,Encode:()=>NM,Diff:()=>LM,Default:()=>AM,Decode:()=>DM,Create:()=>UM,Convert:()=>wM,Clone:()=>HM,Clean:()=>GM,Check:()=>V$,Cast:()=>qM});function qM(...$){return C6.apply(C6,$)}function UM(...$){return S0.apply(S0,$)}function V$(...$){return W8.apply(W8,$)}function GM(...$){return O$.apply(O$,$)}function wM(...$){return _$.apply(_$,$)}function HM($){return U8($)}function DM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]];if(!V$(X,Z,Q))throw new n2(X,Q,E$(X,Z,Q).First());return t2(X,Z)?E6(X,Z,Q):Q}function AM(...$){return F$.apply(F$,$)}function NM(...$){let[X,Z,Q]=$.length===3?[$[0],$[1],$[2]]:[$[0],[],$[1]],W=t2(X,Z)?I6(X,Z,Q):Q;if(!V$(X,Z,W))throw new o2(X,W,E$(X,Z,W).First());return W}function E$(...$){return d2.apply(d2,$)}function PM($,X){return l2($,X)}function LM($,X){return NQ($,X)}function OM($){return b1($)}function _M($,X){return PQ($,X)}function FM($,X){OQ($,X)}function FQ($){return $.map((X)=>I$(X))}function SM($){return X0(FQ($))}function KM($){return J8(FQ($))}function CM($){return I$($)}function I$($){return T8($)?SM($.allOf):Z8($)?KM($.anyOf):f1($)?CM($.item):$}function x$($,X={}){return C(I$($),X)}function jM($){let X=[];for(let Z of $)X.push(...M0(Z));return sX(X)}function bM($){return $.filter((X)=>!Q2(X))}function RM($,X){let Z=[];for(let Q of $)Z.push(...k2(Q,[X]));return bM(Z)}function VM($,X){let Z={};for(let Q of X)Z[Q]=P6(RM($,Q));return Z}function k$($,X={}){let Z=jM($),Q=VM($,Z);return M8(Q,X)}function s2($={}){return{...$,[A]:"Date",type:"Date"}}function r2($={}){return{...$,[A]:"Null",type:"null"}}function a2($){return{...$,[A]:"Symbol",type:"symbol"}}function e2($={}){return{...$,[A]:"Undefined",type:"undefined"}}function $6($={}){return{...$,[A]:"Uint8Array",type:"Uint8Array"}}function EM($){return $.map((X)=>T$(X,!1))}function IM($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=O0(T$($[Z],!1));return X}function x6($,X){return X===!0?$:O0($)}function T$($,X){return n6($)?x6(O1(),X):t6($)?x6(O1(),X):Y0($)?O0(p0(EM($))):k1($)?$6():P2($)?s2():P8($)?x6(M8(IM($)),X):o6($)?x6(G1([],$1()),X):b8($)?e2():s6($)?r2():a6($)?a2():N2($)?d1():d0($)?Q8($):C1($)?Q8($):L8($)?Q8($):M8({})}function g$($,X={}){return C(T$($,!0),X)}function f$($,X={}){return p0(x8($.parameters),{...X})}function X6($,X){return $.map((Z)=>k0(Z,X))}function xM($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=k0($[Q],X);return Z}function kM($,X){return $.parameters=X6($.parameters,X),$.returns=k0($.returns,X),$}function TM($,X){return $.parameters=X6($.parameters,X),$.returns=k0($.returns,X),$}function gM($,X){return $.allOf=X6($.allOf,X),$}function fM($,X){return $.anyOf=X6($.anyOf,X),$}function yM($,X){if(b8($.items))return $;return $.items=X6($.items,X),$}function dM($,X){return $.items=k0($.items,X),$}function vM($,X){return $.properties=xM($.properties,X),$}function hM($,X){return $.item=k0($.item,X),$}function pM($,X){return $.items=k0($.items,X),$}function mM($,X){return $.items=k0($.items,X),$}function uM($,X){let Z=X.find((W)=>W.$id===$.$ref);if(Z===void 0)throw Error(`Unable to dereference schema with \$id ${$.$ref}`);let Q=k8(Z,["$id"]);return k0(Q,X)}function cM($,X){return S2($)?kM($,X):K2($)?TM($,X):T8($)?gM($,X):Z8($)?fM($,X):v0($)?yM($,X):w1($)?dM($,X):d8($)?vM($,X):f1($)?hM($,X):F2($)?pM($,X):C2($)?mM($,X):Z$($)?uM($,X):$}function k0($,X){return cM(C($),x8(X))}function y$($,X={}){if(b8($))throw new Error("Enum undefined or empty");let Z=globalThis.Object.getOwnPropertyNames($).filter((Y)=>isNaN(Y)).map((Y)=>$[Y]),W=[...new Set(Z)].map((Y)=>Q8(Y));return J8(W,{...X,[D0]:"Enum"})}function SQ($,X){return m1(v1($),X)}function iM($,X){let Z=$.filter((Q)=>R1(Q,X)===P.False);return Z.length===1?Z[0]:J8(Z)}function m1($,X,Z={}){if(N0($))return C(SQ($,X),Z);if(F8($))return C(KQ($,X),Z);return C(Z8($)?iM($.anyOf,X):R1($,X)!==P.False?z8():$,Z)}function lM($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=m1($[Q],X);return Z}function nM($,X){return lM($.properties,X)}function KQ($,X){let Z=nM($,X);return a(Z)}function CQ($,X){return u1(v1($),X)}function oM($,X){let Z=$.filter((Q)=>R1(Q,X)!==P.False);return Z.length===1?Z[0]:J8(Z)}function u1($,X,Z={}){if(N0($))return C(CQ($,X),Z);if(F8($))return C(jQ($,X),Z);return C(Z8($)?oM($.anyOf,X):R1($,X)!==P.False?$:z8(),Z)}function tM($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=u1($[Q],X);return Z}function sM($,X){return tM($.properties,X)}function jQ($,X){let Z=sM($,X);return a(Z)}function d$($,X={}){return C($.returns,X)}function v$($={}){return{...$,[A]:"Integer",type:"integer"}}function rM($,X,Z){return{[$]:u0(Q8($),X,Z)}}function aM($,X,Z){return $.reduce((Q,W)=>{return{...Q,...rM(W,X,Z)}},{})}function eM($,X,Z){return aM($.keys,X,Z)}function bQ($,X,Z){let Q=eM($,X,Z);return a(Q)}function $B($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toLowerCase(),Z].join("")}function XB($){let[X,Z]=[$.slice(0,1),$.slice(1)];return[X.toUpperCase(),Z].join("")}function ZB($){return $.toUpperCase()}function QB($){return $.toLowerCase()}function WB($,X,Z){let Q=z2($.pattern);if(!y1(Q))return{...$,pattern:RQ($.pattern,X)};let z=[...E2(Q)].map((w)=>Q8(w)),J=VQ(z,X),B=J8(J);return x2([B],Z)}function RQ($,X){return typeof $==="string"?X==="Uncapitalize"?$B($):X==="Capitalize"?XB($):X==="Uppercase"?ZB($):X==="Lowercase"?QB($):$:$.toString()}function VQ($,X){return $.map((Z)=>u0(Z,X))}function u0($,X,Z={}){return A0($)?bQ($,X,Z):N0($)?WB($,X,$):Z8($)?J8(VQ($.anyOf,X),Z):H1($)?Q8(RQ($.const,X),Z):$}function h$($,X={}){return u0($,"Capitalize",X)}function p$($,X={}){return u0($,"Lowercase",X)}function m$($,X={}){return u0($,"Uncapitalize",X)}function u$($,X={}){return u0($,"Uppercase",X)}function c$($,X){return{...X,[A]:"Not",not:C($)}}function YB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=c1($[W],X,Z);return Q}function zB($,X,Z){return YB($.properties,X,Z)}function EQ($,X,Z){let Q=zB($,X,Z);return a(Q)}function JB($,X){return $.map((Z)=>i$(Z,X))}function MB($,X){return $.map((Z)=>i$(Z,X))}function BB($,X){let{[X]:Z,...Q}=$;return Q}function qB($,X){return X.reduce((Z,Q)=>BB(Z,Q),$)}function i$($,X){return T8($)?X0(JB($.allOf,X)):Z8($)?J8(MB($.anyOf,X)):d8($)?M8(qB($.properties,X)):M8({})}function c1($,X,Z={}){if(A0(X))return IQ($,X,Z);if(F8($))return EQ($,X,Z);let Q=P0(X)?J0(X):X,W=k8($,[K8,"$id","required"]),Y=C(i$($,Q),Z);return{...W,...Y}}function UB($,X,Z){return{[X]:c1($,[X],Z)}}function GB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...UB($,W,Z)}},{})}function wB($,X,Z){return GB($,X.keys,Z)}function IQ($,X,Z){let Q=wB($,X,Z);return a(Q)}function l$($,X={}){return p0(x8($.parameters),{...X})}function xQ($){return $.map((X)=>kQ(X))}function HB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=$0($[Z]);return X}function kQ($){return T8($)?X0(xQ($.allOf)):Z8($)?J8(xQ($.anyOf)):d8($)?M8(HB($.properties)):M8({})}function Z6($,X={}){if(F8($))return TQ($,X);let Z=k8($,[K8,"$id","required"]),Q=C(kQ($),X);return{...Z,...Q}}function DB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=Z6($[Q],X);return Z}function AB($,X){return DB($.properties,X)}function TQ($,X){let Z=AB($,X);return a(Z)}function NB($,X,Z){let Q={};for(let W of globalThis.Object.getOwnPropertyNames($))Q[W]=i1($[W],X,Z);return Q}function PB($,X,Z){return NB($.properties,X,Z)}function gQ($,X,Z){let Q=PB($,X,Z);return a(Q)}function LB($,X){return $.map((Z)=>n$(Z,X))}function OB($,X){return $.map((Z)=>n$(Z,X))}function _B($,X){let Z={};for(let Q of X)if(Q in $)Z[Q]=$[Q];return Z}function n$($,X){return T8($)?X0(LB($.allOf,X)):Z8($)?J8(OB($.anyOf,X)):d8($)?M8(_B($.properties,X)):M8({})}function i1($,X,Z={}){if(A0(X))return fQ($,X,Z);if(F8($))return gQ($,X,Z);let Q=P0(X)?J0(X):X,W=k8($,[K8,"$id","required"]),Y=C(n$($,Q),Z);return{...W,...Y}}function FB($,X,Z){return{[X]:i1($,[X],Z)}}function SB($,X,Z){return X.reduce((Q,W)=>{return{...Q,...FB($,W,Z)}},{})}function KB($,X,Z){return SB($,X.keys,Z)}function fQ($,X,Z){let Q=KB($,X,Z);return a(Q)}function o$($){return O0($0($))}function Q6($,X,Z){return{...Z,[A]:"Record",type:"object",patternProperties:{[$]:C(X)}}}function t$($,X,Z){let Q={};for(let W of $)Q[W]=C(X);return M8(Q,{...Z,[D0]:"Record"})}function CB($,X,Z){return L6($)?t$(J0($),X,Z):Q6($.pattern,X,Z)}function jB($,X,Z){return t$(J0(J8($)),X,Z)}function bB($,X,Z){return t$([$.toString()],X,Z)}function RB($,X,Z){return Q6($.source,X,Z)}function VB($,X,Z){let Q=b8($.pattern)?j1:$.pattern;return Q6(Q,X,Z)}function EB($,X,Z){return Q6(A1,X,Z)}function IB($,X,Z){return Q6(A1,X,Z)}function s$($,X,Z={}){return Z8($)?jB($.anyOf,X,Z):N0($)?CB($,X,Z):H1($)?bB($.const,X,Z):T1($)?EB($,X,Z):g1($)?IB($,X,Z):Q$($)?RB($,X,Z):j2($)?VB($,X,Z):z8(Z)}var xB=0;function r$($,X={}){if(b8(X.$id))X.$id=`T${xB++}`;let Z=$({[A]:"This",$ref:`${X.$id}`});return Z.$id=X.$id,C({...X,[D0]:"Recursive",...Z})}function a$($,X={}){if(L8($))return{...X,[A]:"Ref",$ref:$};if(b8($.$id))throw new Error("Reference target type must specify an $id");return{...X,[A]:"Ref",$ref:$.$id}}function e$($,X={}){let Z=L8($)?new globalThis.RegExp($):$;return{...X,[A]:"RegExp",type:"RegExp",source:Z.source,flags:Z.flags}}function yQ($){return $.map((X)=>dQ(X))}function kB($){let X={};for(let Z of globalThis.Object.getOwnPropertyNames($))X[Z]=k8($[Z],[t8]);return X}function dQ($){return T8($)?X0(yQ($.allOf)):Z8($)?J8(yQ($.anyOf)):d8($)?M8(kB($.properties)):M8({})}function W6($,X={}){if(F8($))return vQ($,X);else{let Z=k8($,[K8,"$id","required"]),Q=C(dQ($),X);return{...Z,...Q}}}function TB($,X){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames($))Z[Q]=W6($[Q],X);return Z}function gB($,X){return TB($.properties,X)}function vQ($,X){let Z=gB($,X);return a(Z)}function fB($){return T8($)?x8($.allOf):Z8($)?x8($.anyOf):v0($)?x8($.items??[]):[]}function $X($){return x8(fB($))}function XX($,X={}){return C($.returns,X)}function ZX($){return JSON.parse(JSON.stringify($))}class hQ{constructor($){this.schema=$}Decode($){return new pQ(this.schema,$)}}class pQ{constructor($,X){this.schema=$,this.decode=X}EncodeTransform($,X){let W={Encode:(Y)=>X[K8].Encode($(Y)),Decode:(Y)=>this.decode(X[K8].Decode(Y))};return{...X,[K8]:W}}EncodeSchema($,X){let Z={Decode:this.decode,Encode:$};return{...X,[K8]:Z}}Encode($){let X=C(this.schema);return W2(X)?this.EncodeTransform($,X):this.EncodeSchema($,X)}}function QX($){return new hQ($)}function WX($={}){return{...$,[A]:"Void",type:"void"}}var YX={};x1(YX,{Void:()=>WX,Uppercase:()=>u$,Unsafe:()=>A2,Unknown:()=>$1,Union:()=>J8,Undefined:()=>e2,Uncapitalize:()=>m$,Uint8Array:()=>$6,Tuple:()=>p0,Transform:()=>QX,TemplateLiteral:()=>x2,Symbol:()=>a2,String:()=>L0,Strict:()=>ZX,ReturnType:()=>XX,Rest:()=>$X,Required:()=>W6,RegExp:()=>e$,Ref:()=>a$,Recursive:()=>r$,Record:()=>s$,ReadonlyOptional:()=>o$,Readonly:()=>O0,Promise:()=>g2,Pick:()=>i1,Partial:()=>Z6,Parameters:()=>l$,Optional:()=>$0,Omit:()=>c1,Object:()=>M8,Number:()=>h0,Null:()=>r2,Not:()=>c$,Never:()=>z8,Mapped:()=>M$,Lowercase:()=>p$,Literal:()=>Q8,KeyOf:()=>y2,Iterator:()=>T2,Intersect:()=>X0,Integer:()=>v$,InstanceType:()=>d$,Index:()=>h1,Function:()=>G1,Extract:()=>u1,Extends:()=>p1,Exclude:()=>m1,Enum:()=>y$,Deref:()=>k0,Date:()=>s2,ConstructorParameters:()=>f$,Constructor:()=>_2,Const:()=>g$,Composite:()=>k$,Capitalize:()=>h$,Boolean:()=>I2,BigInt:()=>d1,Awaited:()=>x$,AsyncIterator:()=>O2,Array:()=>L2,Any:()=>O1});var U2=YX;class BX{constructor($,X,Z,Q){this.schema=$,this.references=X,this.checkFunc=Z,this.code=Q,this.hasTransform=t2($,X)}Code(){return this.code}Errors($){return d2(this.schema,this.references,$)}Check($){return this.checkFunc($)}Decode($){if(!this.checkFunc($))throw new n2(this.schema,$,this.Errors($).First());return this.hasTransform?E6(this.schema,this.references,$):$}Encode($){let X=this.hasTransform?I6(this.schema,this.references,$):$;if(!this.checkFunc(X))throw new o2(this.schema,$,this.Errors($).First());return X}}var _1;(function($){function X(Y){return Y===36}$.DollarSign=X;function Z(Y){return Y===95}$.IsUnderscore=Z;function Q(Y){return Y>=65&&Y<=90||Y>=97&&Y<=122}$.IsAlpha=Q;function W(Y){return Y>=48&&Y<=57}$.IsNumeric=W})(_1||(_1={}));var k6;(function($){function X(Y){if(Y.length===0)return!1;return _1.IsNumeric(Y.charCodeAt(0))}function Z(Y){if(X(Y))return!1;for(let z=0;z<Y.length;z++){let J=Y.charCodeAt(z);if(!(_1.IsAlpha(J)||_1.IsNumeric(J)||_1.DollarSign(J)||_1.IsUnderscore(J)))return!1}return!0}function Q(Y){return Y.replace(/'/g,"\\'")}function W(Y,z){return Z(z)?`${Y}.${z}`:`${Y}['${Q(z)}']`}$.Encode=W})(k6||(k6={}));var zX;(function($){function X(Z){let Q=[];for(let W=0;W<Z.length;W++){let Y=Z.charCodeAt(W);if(_1.IsNumeric(Y)||_1.IsAlpha(Y))Q.push(Z.charAt(W));else Q.push(`_${Y}_`)}return Q.join("").replace(/__/g,"_")}$.Encode=X})(zX||(zX={}));var JX;(function($){function X(Z){return Z.replace(/'/g,"\\'")}$.Escape=X})(JX||(JX={}));class mQ extends v{constructor($){super("Unknown type");this.schema=$}}class MX extends v{constructor($){super("Preflight validation check failed to guard for the given schema");this.schema=$}}var l1;(function($){function X(z,J,B){return I8.ExactOptionalPropertyTypes?`('${J}' in ${z} ? ${B} : true)`:`(${k6.Encode(z,J)} !== undefined ? ${B} : true)`}$.IsExactOptionalProperty=X;function Z(z){return!I8.AllowArrayObject?`(typeof ${z} === 'object' && ${z} !== null && !Array.isArray(${z}))`:`(typeof ${z} === 'object' && ${z} !== null)`}$.IsObjectLike=Z;function Q(z){return!I8.AllowArrayObject?`(typeof ${z} === 'object' && ${z} !== null && !Array.isArray(${z}) && !(${z} instanceof Date) && !(${z} instanceof Uint8Array))`:`(typeof ${z} === 'object' && ${z} !== null && !(${z} instanceof Date) && !(${z} instanceof Uint8Array))`}$.IsRecordLike=Q;function W(z){return I8.AllowNaN?`typeof ${z} === 'number'`:`Number.isFinite(${z})`}$.IsNumberLike=W;function Y(z){return I8.AllowNullVoid?`(${z} === undefined || ${z} === null)`:`${z} === undefined`}$.IsVoidLike=Y})(l1||(l1={}));var F1;(function($){function X(U){return U[A]==="Any"||U[A]==="Unknown"}function*Z(U,E,H){yield"true"}function*Q(U,E,H){yield`Array.isArray(${H})`;let[h,I]=[c8("value","any"),c8("acc","number")];if(f(U.maxItems))yield`${H}.length <= ${U.maxItems}`;if(f(U.minItems))yield`${H}.length >= ${U.minItems}`;let k=L(U.items,E,"value");if(yield`${H}.every((${h}) => ${k})`,p(U.contains)||f(U.minContains)||f(U.maxContains)){let _8=p(U.contains)?U.contains:z8(),Q0=L(_8,E,"value"),q1=f(U.minContains)?[`(count >= ${U.minContains})`]:[],y0=f(U.maxContains)?[`(count <= ${U.maxContains})`]:[],o0=`const count = value.reduce((${I}, ${h}) => ${Q0} ? acc + 1 : acc, 0)`,U6=["(count > 0)",...q1,...y0].join(" && ");yield`((${h}) => { ${o0}; return ${U6}})(${H})`}if(U.uniqueItems===!0)yield`((${h}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${H})`}function*W(U,E,H){yield`(typeof value === 'object' && Symbol.asyncIterator in ${H})`}function*Y(U,E,H){if(yield`(typeof ${H} === 'bigint')`,l8(U.exclusiveMaximum))yield`${H} < BigInt(${U.exclusiveMaximum})`;if(l8(U.exclusiveMinimum))yield`${H} > BigInt(${U.exclusiveMinimum})`;if(l8(U.maximum))yield`${H} <= BigInt(${U.maximum})`;if(l8(U.minimum))yield`${H} >= BigInt(${U.minimum})`;if(l8(U.multipleOf))yield`(${H} % BigInt(${U.multipleOf})) === 0`}function*z(U,E,H){yield`(typeof ${H} === 'boolean')`}function*J(U,E,H){yield*B1(U.returns,E,`${H}.prototype`)}function*B(U,E,H){if(yield`(${H} instanceof Date) && Number.isFinite(${H}.getTime())`,f(U.exclusiveMaximumTimestamp))yield`${H}.getTime() < ${U.exclusiveMaximumTimestamp}`;if(f(U.exclusiveMinimumTimestamp))yield`${H}.getTime() > ${U.exclusiveMinimumTimestamp}`;if(f(U.maximumTimestamp))yield`${H}.getTime() <= ${U.maximumTimestamp}`;if(f(U.minimumTimestamp))yield`${H}.getTime() >= ${U.minimumTimestamp}`;if(f(U.multipleOfTimestamp))yield`(${H}.getTime() % ${U.multipleOfTimestamp}) === 0`}function*w(U,E,H){yield`(typeof ${H} === 'function')`}function*q(U,E,H){if(yield`Number.isInteger(${H})`,f(U.exclusiveMaximum))yield`${H} < ${U.exclusiveMaximum}`;if(f(U.exclusiveMinimum))yield`${H} > ${U.exclusiveMinimum}`;if(f(U.maximum))yield`${H} <= ${U.maximum}`;if(f(U.minimum))yield`${H} >= ${U.minimum}`;if(f(U.multipleOf))yield`(${H} % ${U.multipleOf}) === 0`}function*D(U,E,H){let h=U.allOf.map((I)=>L(I,E,H)).join(" && ");if(U.unevaluatedProperties===!1){let I=T(`${new RegExp(N1(U))};`),k=`Object.getOwnPropertyNames(${H}).every(key => ${I}.test(key))`;yield`(${h} && ${k})`}else if(p(U.unevaluatedProperties)){let I=T(`${new RegExp(N1(U))};`),k=`Object.getOwnPropertyNames(${H}).every(key => ${I}.test(key) || ${L(U.unevaluatedProperties,E,`${H}[key]`)})`;yield`(${h} && ${k})`}else yield`(${h})`}function*O(U,E,H){yield`(typeof value === 'object' && Symbol.iterator in ${H})`}function*M(U,E,H){if(typeof U.const==="number"||typeof U.const==="boolean")yield`(${H} === ${U.const})`;else yield`(${H} === '${JX.Escape(U.const)}')`}function*F(U,E,H){yield"false"}function*S(U,E,H){yield`(!${L(U.not,E,H)})`}function*_(U,E,H){yield`(${H} === null)`}function*b(U,E,H){if(yield l1.IsNumberLike(H),f(U.exclusiveMaximum))yield`${H} < ${U.exclusiveMaximum}`;if(f(U.exclusiveMinimum))yield`${H} > ${U.exclusiveMinimum}`;if(f(U.maximum))yield`${H} <= ${U.maximum}`;if(f(U.minimum))yield`${H} >= ${U.minimum}`;if(f(U.multipleOf))yield`(${H} % ${U.multipleOf}) === 0`}function*x(U,E,H){if(yield l1.IsObjectLike(H),f(U.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${U.minProperties}`;if(f(U.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${U.maxProperties}`;let h=Object.getOwnPropertyNames(U.properties);for(let I of h){let k=k6.Encode(H,I),_8=U.properties[I];if(U.required&&U.required.includes(I)){if(yield*B1(_8,E,k),P1(_8)||X(_8))yield`('${I}' in ${H})`}else{let Q0=L(_8,E,k);yield l1.IsExactOptionalProperty(H,I,Q0)}}if(U.additionalProperties===!1)if(U.required&&U.required.length===h.length)yield`Object.getOwnPropertyNames(${H}).length === ${h.length}`;else{let I=`[${h.map((k)=>`'${k}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${H}).every(key => ${I}.includes(key))`}if(typeof U.additionalProperties==="object"){let I=L(U.additionalProperties,E,`${H}[key]`),k=`[${h.map((_8)=>`'${_8}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${H}).every(key => ${k}.includes(key) || ${I}))`}}function*V(U,E,H){yield`(typeof value === 'object' && typeof ${H}.then === 'function')`}function*r(U,E,H){if(yield l1.IsRecordLike(H),f(U.minProperties))yield`Object.getOwnPropertyNames(${H}).length >= ${U.minProperties}`;if(f(U.maxProperties))yield`Object.getOwnPropertyNames(${H}).length <= ${U.maxProperties}`;let[h,I]=Object.entries(U.patternProperties)[0],k=T(`${new RegExp(h)}`),_8=L(I,E,"value"),Q0=p(U.additionalProperties)?L(U.additionalProperties,E,H):U.additionalProperties===!1?"false":"true",q1=`(${k}.test(key) ? ${_8} : ${Q0})`;yield`(Object.entries(${H}).every(([key, value]) => ${q1}))`}function*u(U,E,H){let h=$8(U,E);if(K.functions.has(U.$ref))return yield`${R(U.$ref)}(${H})`;yield*B1(h,E,H)}function*S8(U,E,H){let h=T(`${new RegExp(U.source,U.flags)};`);if(yield`(typeof ${H} === 'string')`,f(U.maxLength))yield`${H}.length <= ${U.maxLength}`;if(f(U.minLength))yield`${H}.length >= ${U.minLength}`;yield`${h}.test(${H})`}function*A8(U,E,H){if(yield`(typeof ${H} === 'string')`,f(U.maxLength))yield`${H}.length <= ${U.maxLength}`;if(f(U.minLength))yield`${H}.length >= ${U.minLength}`;if(U.pattern!==void 0)yield`${T(`${new RegExp(U.pattern)};`)}.test(${H})`;if(U.format!==void 0)yield`format('${U.format}', ${H})`}function*G8(U,E,H){yield`(typeof ${H} === 'symbol')`}function*Y8(U,E,H){yield`(typeof ${H} === 'string')`,yield`${T(`${new RegExp(U.pattern)};`)}.test(${H})`}function*t(U,E,H){yield`${R(U.$ref)}(${H})`}function*E8(U,E,H){if(yield`Array.isArray(${H})`,U.items===void 0)return yield`${H}.length === 0`;yield`(${H}.length === ${U.maxItems})`;for(let h=0;h<U.items.length;h++)yield`${L(U.items[h],E,`${H}[${h}]`)}`}function*G0(U,E,H){yield`${H} === undefined`}function*I1(U,E,H){yield`(${U.anyOf.map((I)=>L(I,E,H)).join(" || ")})`}function*m6(U,E,H){if(yield`${H} instanceof Uint8Array`,f(U.maxByteLength))yield`(${H}.length <= ${U.maxByteLength})`;if(f(U.minByteLength))yield`(${H}.length >= ${U.minByteLength})`}function*e1(U,E,H){yield"true"}function*Z0(U,E,H){yield l1.IsVoidLike(H)}function*u6(U,E,H){let h=K.instances.size;K.instances.set(h,U),yield`kind('${U[A]}', ${h}, ${H})`}function*B1(U,E,H,h=!0){let I=c(U.$id)?[...E,U]:E,k=U;if(h&&c(U.$id)){let _8=R(U.$id);if(K.functions.has(_8))return yield`${_8}(${H})`;else{let Q0=y(_8,U,E,"value",!1);return K.functions.set(_8,Q0),yield`${_8}(${H})`}}switch(k[A]){case"Any":return yield*Z(k,I,H);case"Array":return yield*Q(k,I,H);case"AsyncIterator":return yield*W(k,I,H);case"BigInt":return yield*Y(k,I,H);case"Boolean":return yield*z(k,I,H);case"Constructor":return yield*J(k,I,H);case"Date":return yield*B(k,I,H);case"Function":return yield*w(k,I,H);case"Integer":return yield*q(k,I,H);case"Intersect":return yield*D(k,I,H);case"Iterator":return yield*O(k,I,H);case"Literal":return yield*M(k,I,H);case"Never":return yield*F(k,I,H);case"Not":return yield*S(k,I,H);case"Null":return yield*_(k,I,H);case"Number":return yield*b(k,I,H);case"Object":return yield*x(k,I,H);case"Promise":return yield*V(k,I,H);case"Record":return yield*r(k,I,H);case"Ref":return yield*u(k,I,H);case"RegExp":return yield*S8(k,I,H);case"String":return yield*A8(k,I,H);case"Symbol":return yield*G8(k,I,H);case"TemplateLiteral":return yield*Y8(k,I,H);case"This":return yield*t(k,I,H);case"Tuple":return yield*E8(k,I,H);case"Undefined":return yield*G0(k,I,H);case"Union":return yield*I1(k,I,H);case"Uint8Array":return yield*m6(k,I,H);case"Unknown":return yield*e1(k,I,H);case"Void":return yield*Z0(k,I,H);default:if(!j8.Has(k[A]))throw new mQ(U);return yield*u6(k,I,H)}}let K={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function L(U,E,H,h=!0){return`(${[...B1(U,E,H,h)].join(" && ")})`}function R(U){return`check_${zX.Encode(U)}`}function T(U){let E=`local_${K.variables.size}`;return K.variables.set(E,`const ${E} = ${U}`),E}function y(U,E,H,h,I=!0){let[k,_8]=["\n",(o0)=>"".padStart(o0," ")],Q0=c8("value","any"),q1=l("boolean"),y0=[...B1(E,H,h,I)].map((o0)=>`${_8(4)}${o0}`).join(` &&${k}`);return`function ${U}(${Q0})${q1} {${k}${_8(2)}return (${k}${y0}${k}${_8(2)})\n}`}function c8(U,E){let H=K.language==="typescript"?`: ${E}`:"";return`${U}${H}`}function l(U){return K.language==="typescript"?`: ${U}`:""}function f0(U,E,H){let h=y("check",U,E,"value"),I=c8("value","any"),k=l("boolean"),_8=[...K.functions.values()],Q0=[...K.variables.values()],q1=c(U.$id)?`return function check(${I})${k} {\n  return ${R(U.$id)}(value)\n}`:`return ${h}`;return[...Q0,..._8,q1].join("\n")}function y8(...U){let E={language:"javascript"},[H,h,I]=U.length===2&&d(U[1])?[U[0],U[1],E]:U.length===2&&!d(U[1])?[U[0],[],U[1]]:U.length===3?[U[0],U[1],U[2]]:U.length===1?[U[0],[],E]:[null,[],E];if(K.language=I.language,K.variables.clear(),K.functions.clear(),K.instances.clear(),!p(H))throw new MX(H);for(let k of h)if(!p(k))throw new MX(k);return f0(H,h,I)}$.Code=y8;function j0(U,E=[]){let H=y8(U,E,{language:"javascript"}),h=globalThis.Function("kind","format","hash",H),I=new Map(K.instances);function k(y0,o0,U6){if(!j8.Has(y0)||!I.has(o0))return!1;let pW=j8.Get(y0),mW=I.get(o0);return pW(mW,U6)}function _8(y0,o0){if(!w8.Has(y0))return!1;return w8.Get(y0)(o0)}function Q0(y0){return b1(y0)}let q1=h(k,_8,Q0);return new BX(U,E,q1,H)}$.Compile=j0})(F1||(F1={}));var jW=D2(qX(),1),bW=D2(qX(),1),RW=D2(T6(),1);var r1=D2(T6(),1),dW=D2(T6(),1);var G2=($,X)=>{let Z=X?.length?{}:null;if(Z)for(let Q of X)Z[Q.part.charCodeAt(0)]=Q;return{part:$,store:null,inert:Z,params:null,wildcardStore:null}},tQ=($,X)=>({...$,part:X}),sQ=($)=>({name:$,store:null,inert:null}),GX=class ${root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(X,Z,Q,{ignoreError:W=!1,ignoreHistory:Y=!1}={}){if(typeof Z!=="string")throw new TypeError("Route path must be a string");if(Z==="")Z="/";else if(Z[0]!=="/")Z=`/${Z}`;let z=Z[Z.length-1]==="*",J=Z.match($.regex.optionalParams);if(J){let O=Z.replaceAll("?","");this.add(X,O,Q,{ignoreError:W});for(let M=0;M<J.length;M++){let F=Z.replace("/"+J[M],"");this.add(X,F,Q,{ignoreError:!0})}return Q}if(J)Z=Z.replaceAll("?","");if(this.history.find(([O,M,F])=>O===X&&M===Z))return Q;if(z||J&&Z.charCodeAt(Z.length-1)===63)Z=Z.slice(0,-1);if(!Y)this.history.push([X,Z,Q]);let B=Z.split($.regex.static),w=Z.match($.regex.params)||[];if(B[B.length-1]==="")B.pop();let q;if(!this.root[X])q=this.root[X]=G2("/");else q=this.root[X];let D=0;for(let O=0;O<B.length;++O){let M=B[O];if(O>0){let F=w[D++].slice(1);if(q.params===null)q.params=sQ(F);else if(q.params.name!==F)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${F}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);let S=q.params;if(S.inert===null){q=S.inert=G2(M);continue}q=S.inert}for(let F=0;;){if(F===M.length){if(F<q.part.length){let S=tQ(q,q.part.slice(F));Object.assign(q,G2(M,[S]))}break}if(F===q.part.length){if(q.inert===null)q.inert={};let S=q.inert[M.charCodeAt(F)];if(S){q=S,M=M.slice(F),F=0;continue}let _=G2(M.slice(F));q.inert[M.charCodeAt(F)]=_,q=_;break}if(M[F]!==q.part[F]){let S=tQ(q,q.part.slice(F)),_=G2(M.slice(F));Object.assign(q,G2(q.part.slice(0,F),[S,_])),q=_;break}++F}}if(D<w.length){let M=w[D].slice(1);if(q.params===null)q.params=sQ(M);else if(q.params.name!==M)if(W)return Q;else throw new Error(`Cannot create route "${Z}" with parameter "${M}" because a route already exists with a different parameter name ("${q.params.name}") in the same location`);if(q.params.store===null)q.params.store=Q;return q.params.store}if(z){if(q.wildcardStore===null)q.wildcardStore=Q;return q.wildcardStore}if(q.store===null)q.store=Q;return q.store}find(X,Z){let Q=this.root[X];if(!Q)return null;return PX(Z,Z.length,Q,0)}},PX=($,X,Z,Q)=>{let W=Z.part,Y=W.length,z=Q+Y;if(Y>1){if(z>X)return null;if(Y<15){for(let J=1,B=Q+1;J<Y;++J,++B)if(W.charCodeAt(J)!==$.charCodeAt(B))return null}else if($.slice(Q,z)!==W)return null}if(z===X){if(Z.store!==null)return{store:Z.store,params:{}};if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":""}};return null}if(Z.inert!==null){let J=Z.inert[$.charCodeAt(z)];if(J!==void 0){let B=PX($,X,J,z);if(B!==null)return B}}if(Z.params!==null){let{store:J,name:B,inert:w}=Z.params,q=$.indexOf("/",z);if(q!==z){if(q===-1||q>=X){if(J!==null){let D={};return D[B]=$.substring(z,X),{store:J,params:D}}}else if(w!==null){let D=PX($,X,w,q);if(D!==null)return D.params[B]=$.substring(z,q),D}}}if(Z.wildcardStore!==null)return{store:Z.wildcardStore,params:{"*":$.substring(z,X)}};return null},J6=($)=>{let X=typeof $==="object"?$.fn.toString():typeof $==="string"?$.toString():$,Z=X.indexOf(")");if(X.charCodeAt(Z+2)===61&&X.charCodeAt(Z+5)!==123)return!0;return X.includes("return")},eB=($)=>{if($.startsWith("async"))$=$.slice(5);$=$.trimStart();let X=-1;if($.charCodeAt(0)===40){if(X=$.indexOf("=>",$.indexOf(")")),X!==-1){let W=X;while(W>0)if($.charCodeAt(--W)===41)break;let Y=$.slice(X+2);if(Y.charCodeAt(0)===32)Y=Y.trimStart();return[$.slice(1,W),Y,{isArrowReturn:Y.charCodeAt(0)!==123}]}}if($.startsWith("function")){X=$.indexOf("(");let W=$.indexOf(")");return[$.slice(X+1,W),$.slice(W+2),{isArrowReturn:!1}]}let Z=$.indexOf("(");if(Z!==-1){let W=$.indexOf("\n",2),Y=$.slice(0,W),z=Y.lastIndexOf(")")+1,J=$.slice(W+1);return[Y.slice(Z,z),"{"+J,{isArrowReturn:!1}]}let Q=$.split("\n",2);return[Q[0],Q[1],{isArrowReturn:!1}]},$q=($)=>{let X=$.indexOf("{");if(X===-1)return[-1,0];let Z=X+1,Q=1;for(;Z<$.length;Z++){let W=$.charCodeAt(Z);if(W===123)Q++;else if(W===125)Q--;if(Q===0)break}if(Q!==0)return[0,$.length];return[X,Z+1]},Xq=($)=>{let X=$.lastIndexOf("}");if(X===-1)return[-1,0];let Z=X-1,Q=1;for(;Z>=0;Z--){let W=$.charCodeAt(Z);if(W===125)Q++;else if(W===123)Q--;if(Q===0)break}if(Q!==0)return[-1,0];return[Z,X+1]},PW=($)=>{while(!0){let X=$.indexOf(":");if(X===-1)break;let Z=$.indexOf(",",X);if(Z===-1)Z=$.indexOf("}",X)-1;if(Z===-2)Z=$.length;$=$.slice(0,X)+$.slice(Z)}return $},LW=($)=>{let X=!1;if($.charCodeAt(0)===40)$=$.slice(1,-1);if($.charCodeAt(0)===123)X=!0,$=$.slice(1,-1);$=$.replace(/( |\t|\n)/g,"").trim();let Z=[];while(!0){let[W,Y]=$q($);if(W===-1)break;if(Z.push($.slice(0,W-1)),$.charCodeAt(Y)===44)Y++;$=$.slice(Y)}if($=PW($),$)Z=Z.concat($.split(","));let Q=[];for(let W of Z){if(W.indexOf(",")===-1){Q.push(W);continue}for(let Y of W.split(","))Q.push(Y.trim())}return Z=Q,{hasParenthesis:X,parameters:Z}},Zq=($,X)=>{let{parameters:Z,hasParenthesis:Q}=LW($);if(!X.query&&Z.includes("query"))X.query=!0;if(!X.headers&&Z.includes("headers"))X.headers=!0;if(!X.body&&Z.includes("body"))X.body=!0;if(!X.cookie&&Z.includes("cookie"))X.cookie=!0;if(!X.set&&Z.includes("set"))X.set=!0;if(!X.server&&Z.includes("server"))X.server=!0;if(Q)return`{ ${Z.join(", ")} }`;return Z.join(", ")},Qq=($,X,Z)=>{let Q=X.indexOf($+"\n",Z),W=X.indexOf($+"	",Z),Y=X.indexOf($+",",Z),z=X.indexOf($+";",Z),J=X.indexOf($+" ",Z);return[Q,W,Y,z,J].filter((B)=>B>0).sort((B,w)=>B-w)[0]||-1},OW=($,X,Z=0)=>{if(Z>5)return[];let Q=[],W=X;while(!0){let Y=Qq(" = "+$,W);if(Y===-1){let B=W.indexOf(" = "+$);if(B+3+$.length!==W.length)break;Y=B}let z=W.slice(0,Y),J=z.slice(z.lastIndexOf(" ")+1);if(J==="}"){let[B,w]=Xq(z);Q.push(PW(W.slice(B,w))),W=W.slice(Y+3+$.length);continue}while(J.charCodeAt(0)===44)J=J.slice(1);while(J.charCodeAt(0)===9)J=J.slice(1);if(!J.includes("("))Q.push(J);W=W.slice(Y+3+$.length)}for(let Y of Q){if(Y.charCodeAt(0)===123)continue;let z=OW(Y,X);if(z.length>0)Q.push(...z)}return Q},Wq=($)=>{if(!$)return;if($.charCodeAt(0)!==123)return $;if($=$.slice(2,-2),!$.includes(",")){if($.includes("..."))return $.slice($.indexOf("...")+3);return}let Z=$.indexOf("...");if(Z===-1)return;return $.slice(Z+3).trimEnd()},Yq=($,X,Z)=>{let Q=(W,Y)=>$.includes(Y+"."+W)||$.includes(Y+'["'+W+'"]')||$.includes(Y+"['"+W+"']");for(let W of X){if(!W)continue;if(W.charCodeAt(0)===123){let Y=LW(W).parameters;if(!Z.query&&Y.includes("query"))Z.query=!0;if(!Z.headers&&Y.includes("headers"))Z.headers=!0;if(!Z.body&&Y.includes("body"))Z.body=!0;if(!Z.cookie&&Y.includes("cookie"))Z.cookie=!0;if(!Z.set&&Y.includes("set"))Z.set=!0;if(!Z.query&&Y.includes("server"))Z.server=!0;continue}if(!Z.query&&Q("query",W))Z.query=!0;if($.includes("return "+W)||$.includes("return "+W+".query"))Z.query=!0;if(!Z.headers&&Q("headers",W))Z.headers=!0;if(!Z.body&&Q("body",W))Z.body=!0;if(!Z.cookie&&Q("cookie",W))Z.cookie=!0;if(!Z.set&&Q("set",W))Z.set=!0;if(!Z.server&&Q("server",W))Z.server=!0;if(Z.query&&Z.headers&&Z.body&&Z.cookie&&Z.set&&Z.server)break}return X},zq=($,X,Z)=>{try{let Q=new RegExp(`(?:\\w)\\((?:.*)?${$}`,"gs");Q.test(X);let W=X.charCodeAt(Q.lastIndex);if(W===41||W===44)return Z.query=!0,Z.headers=!0,Z.body=!0,Z.cookie=!0,Z.set=!0,Z.server=!0,!0;return!1}catch(Q){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(X),console.log("--- context ---"),console.log($),!0}},_W=($,X={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{let Z=[];if($.handler&&typeof $.handler==="function")Z.push($.handler);if($.request?.length)Z.push(...$.request);if($.beforeHandle?.length)Z.push(...$.beforeHandle);if($.parse?.length)Z.push(...$.parse);if($.error?.length)Z.push(...$.error);if($.transform?.length)Z.push(...$.transform);if($.afterHandle?.length)Z.push(...$.afterHandle);if($.mapResponse?.length)Z.push(...$.mapResponse);if($.afterResponse?.length)Z.push(...$.afterResponse);for(let Q of Z){if(!Q)continue;let W="fn"in Q?Q.fn:Q,[Y,z,{isArrowReturn:J}]=eB(W.toString()),B=Zq(Y,X),w=Wq(B);if(w){let q=OW(w,z);if(q.splice(0,-1,w),!zq(w,z,X))Yq(z,q,X);if(!X.query&&z.includes("return "+w+".query"))X.query=!0}if(X.query&&X.headers&&X.body&&X.cookie&&X.set&&X.server)break}return X},SX={date:FW,time:LX(!0),"date-time":rQ(!0),"iso-time":LX(!1),"iso-date-time":rQ(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:Hq,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:_q,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:Dq,int32:{type:"number",validate:Pq},int64:{type:"number",validate:Lq},float:{type:"number",validate:eQ},double:{type:"number",validate:eQ},password:!0,binary:!0};function Jq($){return $%4===0&&($%100!==0||$%400===0)}var Mq=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,Bq=[0,31,28,31,30,31,30,31,31,30,31,30,31];function FW($){let X=Mq.exec($);if(!X)return!1;let Z=+X[1],Q=+X[2],W=+X[3];return Q>=1&&Q<=12&&W>=1&&W<=(Q===2&&Jq(Z)?29:Bq[Q])}var qq=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function LX($){return function X(Z){let Q=qq.exec(Z);if(!Q)return!1;let W=+Q[1],Y=+Q[2],z=+Q[3],J=Q[4],B=Q[5]==="-"?-1:1,w=+(Q[6]||0),q=+(Q[7]||0);if(w>23||q>59||$&&!J)return!1;if(W<=23&&Y<=59&&z<60)return!0;let D=Y-q*B,O=W-w*B-(D<0?1:0);return(O===23||O===-1)&&(D===59||D===-1)&&z<61}}var Uq=/t|\s/i;function rQ($){let X=LX($);return function Z(Q){let W=Q.split(Uq);return W.length===2&&FW(W[0])&&X(W[1])}}var Gq=/\/|:/,wq=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function Hq($){return Gq.test($)&&wq.test($)}var aQ=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function Dq($){return aQ.lastIndex=0,aQ.test($)}var Aq=-2147483648,Nq=2147483647;function Pq($){return Number.isInteger($)&&$<=Nq&&$>=Aq}function Lq($){return Number.isInteger($)}function eQ(){return!0}var Oq=/[^\\]\\Z/;function _q($){if(Oq.test($))return!1;try{return new RegExp($),!0}catch(X){return!1}}var SW=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,KW=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,CW=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,Fq=SX.date,Sq=SX["date-time"];if(!w8.Has("date"))r0.Format("date",($)=>{let X=$.replace(/"/g,"");if(SW.test(X)||KW.test(X)||CW.test(X)||Fq(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});if(!w8.Has("date-time"))r0.Format("date-time",($)=>{let X=$.replace(/"/g,"");if(SW.test(X)||KW.test(X)||CW.test(X)||Sq(X)){let Z=new Date(X);if(!Number.isNaN(Z.getTime()))return!0}return!1});Object.entries(SX).forEach(($)=>{let[X,Z]=$;if(!w8.Has(X)){if(Z instanceof RegExp)r0.Format(X,(Q)=>Z.test(Q));else if(typeof Z==="function")r0.Format(X,Z)}});var g=Object.assign({},U2),$W=($)=>{if(typeof $==="string")switch($.slice(-1)){case"k":return+$.slice(0,$.length-1)*1024;case"m":return+$.slice(0,$.length-1)*1048576;default:return+$}return $},OX=($,X)=>{if(!(X instanceof Blob))return!1;if($.minSize&&X.size<$W($.minSize))return!1;if($.maxSize&&X.size>$W($.maxSize))return!1;if($.extension)if(typeof $.extension==="string"){if(!X.type.startsWith($.extension))return!1}else{for(let Z=0;Z<$.extension.length;Z++)if(X.type.startsWith($.extension[Z]))return!0;return!1}return!0},Kq=j8.Get("Files")??r0.Type("File",OX),Cq=j8.Get("Files")??r0.Type("Files",($,X)=>{if(!Array.isArray(X))return OX($,X);if($.minItems&&X.length<$.minItems)return!1;if($.maxItems&&X.length>$.maxItems)return!1;for(let Z=0;Z<X.length;Z++)if(!OX($,X[Z]))return!1;return!0});if(!w8.Has("numeric"))w8.Set("numeric",($)=>!!$&&!isNaN(+$));if(!w8.Has("boolean"))w8.Set("boolean",($)=>$==="true"||$==="false");if(!w8.Has("ObjectString"))w8.Set("ObjectString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});if(!w8.Has("ArrayString"))w8.Set("ArrayString",($)=>{let X=$.charCodeAt(0);if(X===9||X===10||X===32)X=$.trimStart().charCodeAt(0);if(X!==123&&X!==91)return!1;try{return JSON.parse($),!0}catch{return!1}});j8.Set("UnionEnum",($,X)=>{return(typeof X==="number"||typeof X==="string"||X===null)&&$.enum.includes(X)});var n0={Numeric:($)=>{let X=U2.Number($);return g.Transform(g.Union([g.String({format:"numeric",default:0}),g.Number($)],$)).Decode((Z)=>{let Q=+Z;if(isNaN(Q))return Z;if($&&!m.Check(X,Q))throw new D8("property",X,Q);return Q}).Encode((Z)=>Z)},Date:($)=>{let X=U2.Date($);return g.Transform(g.Union([U2.Date($),g.String({format:"date",default:new Date().toISOString()}),g.String({format:"date-time",default:new Date().toISOString()})],$)).Decode((Z)=>{if(Z instanceof Date)return Z;let Q=new Date(Z);if(!m.Check(X,Q))throw new D8("property",X,Q);return Q}).Encode((Z)=>{if(typeof Z==="string")return new Date(Z);return Z})},BooleanString:($)=>{let X=U2.Boolean($);return g.Transform(g.Union([g.String({format:"boolean",default:!1}),g.Boolean($)],$)).Decode((Z)=>{if(typeof Z==="string")return Z==="true";if($&&!m.Check(X,Z))throw new D8("property",X,Z);return Z}).Encode((Z)=>Z)},ObjectString:($,X)=>{let Z=g.Object($,X),Q=JSON.stringify(m.Create(Z)),W;try{W=F1.Compile(Z)}catch{}return g.Transform(g.Union([g.String({format:"ObjectString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==123)throw new D8("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new D8("property",Z,Y)}if(W){if(!W.Check(Y))throw new D8("property",Z,Y);return W.Decode(Y)}if(!m.Check(Z,Y))throw new D8("property",Z,Y);return m.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new D8("property",Z,Y)}if(!m.Check(Z,Y))throw new D8("property",Z,Y);return JSON.stringify(Y)})},ArrayString:($={},X)=>{let Z=g.Array($,X),Q=JSON.stringify(m.Create(Z)),W;try{W=F1.Compile(Z)}catch{}return g.Transform(g.Union([g.String({format:"ArrayString",default:Q}),Z])).Decode((Y)=>{if(typeof Y==="string"){if(Y.charCodeAt(0)!==91)throw new D8("property",Z,Y);try{Y=JSON.parse(Y)}catch{throw new D8("property",Z,Y)}if(W){if(!W.Check(Y))throw new D8("property",Z,Y);return W.Decode(Y)}if(!m.Check(Z,Y))throw new D8("property",Z,Y);return m.Decode(Z,Y)}return Y}).Encode((Y)=>{if(typeof Y==="string")try{Y=JSON.parse(Y)}catch{throw new D8("property",Z,Y)}if(!m.Check(Z,Y))throw new D8("property",Z,Y);return JSON.stringify(Y)})},File:Kq,Files:($={})=>g.Transform(Cq($)).Decode((X)=>{if(Array.isArray(X))return X;return[X]}).Encode((X)=>X),Nullable:($)=>g.Union([$,g.Null()]),MaybeEmpty:($)=>g.Union([$,g.Null(),g.Undefined()]),Cookie:($,{domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:z,sameSite:J,secure:B,secrets:w,sign:q,...D}={})=>{let O=g.Object($,D);return O.config={domain:X,expires:Z,httpOnly:Q,maxAge:W,path:Y,priority:z,sameSite:J,secure:B,secrets:w,sign:q},O},UnionEnum:($,X={})=>{let Z=$.every((Q)=>typeof Q==="string")?{type:"string"}:$.every((Q)=>typeof Q==="number")?{type:"number"}:$.every((Q)=>Q===null)?{type:"null"}:{};if($.some((Q)=>typeof Q==="object"&&Q!==null))throw new Error("This type does not support objects or arrays");return{default:$[0],...X,[A]:"UnionEnum",...Z,enum:$}}};g.BooleanString=n0.BooleanString;g.ObjectString=n0.ObjectString;g.ArrayString=n0.ArrayString;g.Numeric=n0.Numeric;g.File=($={})=>n0.File({default:"File",...$,extension:$?.type,type:"string",format:"binary"});g.Files=($={})=>n0.Files({...$,elysiaMeta:"Files",default:"Files",extension:$?.type,type:"array",items:{...$,default:"Files",type:"string",format:"binary"}});g.Nullable=($)=>n0.Nullable($);g.MaybeEmpty=n0.MaybeEmpty;g.Cookie=n0.Cookie;g.Date=n0.Date;g.UnionEnum=n0.UnionEnum;var H2=class{constructor($,X,Z={}){this.name=$,this.jar=X,this.initial=Z}get cookie(){return this.jar[this.name]??this.initial}set cookie($){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=$}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie($){this.cookie=$}get value(){return this.cookie.value}set value($){this.setCookie.value=$}get expires(){return this.cookie.expires}set expires($){this.setCookie.expires=$}get maxAge(){return this.cookie.maxAge}set maxAge($){this.setCookie.maxAge=$}get domain(){return this.cookie.domain}set domain($){this.setCookie.domain=$}get path(){return this.cookie.path}set path($){this.setCookie.path=$}get secure(){return this.cookie.secure}set secure($){this.setCookie.secure=$}get httpOnly(){return this.cookie.httpOnly}set httpOnly($){this.setCookie.httpOnly=$}get sameSite(){return this.cookie.sameSite}set sameSite($){this.setCookie.sameSite=$}get priority(){return this.cookie.priority}set priority($){this.setCookie.priority=$}get partitioned(){return this.cookie.partitioned}set partitioned($){this.setCookie.partitioned=$}get secrets(){return this.cookie.secrets}set secrets($){this.setCookie.secrets=$}update($){return this.setCookie=Object.assign(this.cookie,typeof $==="function"?$(this.cookie):$),this}set($){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof $==="function"?$(this.cookie):$),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}},XW=($,X,Z)=>{if(!$.cookie)$.cookie={};return new Proxy(X,{get(Q,W){if(W in X)return new H2(W,$.cookie,Object.assign({},Z??{},X[W]));return new H2(W,$.cookie,Object.assign({},Z))}})},VW=async($,X,{secrets:Z,sign:Q,...W}={})=>{if(!X)return XW($,{},W);let Y=typeof Z==="string";if(Q&&Q!==!0&&!Array.isArray(Q))Q=[Q];let z={},J=bW.parse(X);for(let[B,w]of Object.entries(J)){let q=RW.default(w);if(Q===!0||Q?.includes(B)){if(!Z)throw new Error("No secret is provided to cookie plugin");if(Y){let D=await BW(q,Z);if(D===!1)throw new wW(B);q=D}else{let D=!0;for(let O=0;O<Z.length;O++){let M=await BW(q,Z[O]);if(M!==!1){D=!0,q=M;break}}if(!D)throw new wW(B)}}z[B]={value:q}}return XW($,z,W)},EW="toJSON"in new Headers,l0=($)=>{if(!$)return!1;for(let X in $)return!0;return!1},M6=($,X)=>{let Z=$.size;if(!X&&Z||Z&&X&&X.status!==206&&X.status!==304&&X.status!==412&&X.status!==416){if(X&&l0(X.headers)){if(X.headers instanceof Headers){if(EW)X.headers=X.headers.toJSON();else for(let[Q,W]of X.headers.entries())if(Q in X.headers)X.headers[Q]=W}return new Response($,{status:X.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`},X.headers)})}return new Response($,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${Z-1}/${Z}`,"transfer-encoding":"chunked"}})}return new Response($)},IW=($,X)=>{if(!$)return $;$.delete("set-cookie");for(let Z=0;Z<X.length;Z++){let Q=X[Z].indexOf("=");$.append("set-cookie",`${X[Z].slice(0,Q)}=${X[Z].slice(Q+1)||""}`)}return $},xW=($)=>{if(!$||!l0($))return;let X=[];for(let[Z,Q]of Object.entries($)){if(!Z||!Q)continue;let W=Q.value;if(W===void 0||W===null)continue;X.push(jW.serialize(Z,typeof W==="object"?JSON.stringify(W):W+"",Q))}if(X.length===0)return;if(X.length===1)return X[0];return X},z1=async($,X,Z)=>{let Q=$.next();if(Q instanceof Promise)Q=await Q;if(Q.done){if(X)return V8(Q.value,X,Z);return K1(Q.value,Z)}return new Response(new ReadableStream({async start(W){let Y=!1;if(Z?.signal.addEventListener("abort",()=>{Y=!0;try{W.close()}catch{}}),Q.value!==void 0&&Q.value!==null)if(typeof Q.value==="object")try{W.enqueue(Buffer.from(JSON.stringify(Q.value)))}catch{W.enqueue(Buffer.from(Q.value.toString()))}else W.enqueue(Buffer.from(Q.value.toString()));for await(let z of $){if(Y)break;if(z===void 0||z===null)continue;if(typeof z==="object")try{W.enqueue(Buffer.from(JSON.stringify(z)))}catch{W.enqueue(Buffer.from(z.toString()))}else W.enqueue(Buffer.from(z.toString()));await new Promise((J)=>setTimeout(()=>J(),0))}try{W.close()}catch{}}}),{...X,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8",...X?.headers}})};async function*B6($){let X=$.body;if(!X)return;let Z=X.getReader(),Q=new TextDecoder;try{while(!0){let{done:W,value:Y}=await Z.read();if(W)break;yield Q.decode(Y)}}finally{Z.releaseLock()}}var V8=($,X,Z)=>{if(l0(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=q6[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&l0(X.cookie)){let Q=xW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=IW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return M6($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,V8($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return new Response("",X);return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return z1(B6($),X,Z);return $;case"Error":return J1($,X);case"Promise":return $.then((W)=>V8(W,X));case"Function":return V8($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"Cookie":if($ instanceof H2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let z of X.headers.getSetCookie())$.headers.append("set-cookie",z)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if(EW)X.headers=$.headers.toJSON();else for(let[Y,z]of $.headers.entries())if(Y in X.headers)X.headers[Y]=z;return $}if($ instanceof Promise)return $.then((W)=>V8(W,X));if($ instanceof Error)return J1($,X);if($ instanceof M1)return X.status=$.code,V8($.response,X,Z);if(typeof $?.next==="function")return z1($,X,Z);if(typeof $?.then==="function")return $.then((W)=>V8(W,X));if(typeof $?.toResponse==="function")return V8($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return M6($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,V8($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z1(B6($),X,Z);return $;case"Error":return J1($,X);case"Promise":return $.then((Q)=>{let W=K1(Q,Z);if(W!==void 0)return W;return new Response("")});case"Function":return K1($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof H2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($,X);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>V8(Q,X));if($ instanceof Error)return J1($,X);if($ instanceof M1)return X.status=$.code,V8($.response,X,Z);if(typeof $?.next==="function")return z1($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>V8(Q,X));if(typeof $?.toResponse==="function")return V8($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},u8=($,X,Z)=>{if($===void 0||$===null)return;if(l0(X.headers)||X.status!==200||X.redirect||X.cookie){if(typeof X.status==="string")X.status=q6[X.status];if(X.redirect){if(X.headers.Location=X.redirect,!X.status||X.status<300||X.status>=400)X.status=302}if(X.cookie&&l0(X.cookie)){let Q=xW(X.cookie);if(Q)X.headers["set-cookie"]=Q}if(X.headers["set-cookie"]&&Array.isArray(X.headers["set-cookie"]))X.headers=IW(new Headers(X.headers),X.headers["set-cookie"]);switch($?.constructor?.name){case"String":return new Response($,X);case"Blob":return M6($,X);case"Array":return Response.json($,X);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,u8($.response,X,Z);case"ReadableStream":if(!X.headers["content-type"]?.startsWith("text/event-stream"))X.headers["content-type"]="text/event-stream; charset=utf-8";return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,X);case void 0:if(!$)return;return Response.json($,X);case"Response":let Q=!1;if(X.headers instanceof Headers)for(let W of X.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let Y of X.headers.getSetCookie())$.headers.append("set-cookie",Y)}else $.headers.append(W,X.headers?.get(W)??"");else for(let W in X.headers)$.headers.append(W,X.headers[W]);if($.status!==X.status)X.status=$.status;if($.headers.get("transfer-encoding")==="chunked")return z1(B6($),X,Z);return $;case"Promise":return $.then((W)=>{let Y=u8(W,X);if(Y!==void 0)return Y});case"Error":return J1($,X);case"Function":return u8($(),X);case"Number":case"Boolean":return new Response($.toString(),X);case"FormData":return new Response($);case"Cookie":if($ instanceof H2)return new Response($.value,X);return new Response($?.toString(),X);default:if($ instanceof Response){let W=!1;if(X.headers instanceof Headers)for(let Y of X.headers.keys())if(Y==="set-cookie"){if(W)continue;W=!0;for(let z of X.headers.getSetCookie())$.headers.append("set-cookie",z)}else $.headers.append(Y,X.headers?.get(Y)??"");else for(let Y in X.headers)$.headers.append(Y,X.headers[Y]);if($.status!==X.status)X.status=$.status;return $}if($ instanceof Promise)return $.then((W)=>u8(W,X));if($ instanceof Error)return J1($,X);if($ instanceof M1)return X.status=$.code,u8($.response,X,Z);if(typeof $?.next==="function")return z1($,X,Z);if(typeof $?.then==="function")return $.then((W)=>u8(W,X));if(typeof $?.toResponse==="function")return u8($.toResponse(),X);if("charCodeAt"in $){let W=$.charCodeAt(0);if(W===123||W===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($,X)}}else switch($?.constructor?.name){case"String":return new Response($);case"Blob":return M6($,X);case"Array":return Response.json($);case"Object":return Response.json($,X);case"ElysiaCustomStatusResponse":return X.status=$.code,u8($.response,X,Z);case"ReadableStream":return Z?.signal.addEventListener("abort",{handleEvent(){if(!Z?.signal.aborted)$.cancel(Z)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z1(B6($));return $;case"Promise":return $.then((Q)=>{let W=u8(Q,X);if(W!==void 0)return W});case"Error":return J1($,X);case"Function":return K1($(),Z);case"Number":case"Boolean":return new Response($.toString());case"Cookie":if($ instanceof H2)return new Response($.value,X);return new Response($?.toString(),X);case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Q)=>u8(Q,X));if($ instanceof Error)return J1($,X);if($ instanceof M1)return X.status=$.code,u8($.response,X,Z);if(typeof $?.next==="function")return z1($,X,Z);if(typeof $?.then==="function")return $.then((Q)=>u8(Q,X));if(typeof $?.toResponse==="function")return u8($.toResponse(),X);if("charCodeAt"in $){let Q=$.charCodeAt(0);if(Q===123||Q===91){if(!X.headers["Content-Type"])X.headers["Content-Type"]="application/json";return new Response(JSON.stringify($),X)}}return new Response($)}},K1=($,X)=>{switch($?.constructor?.name){case"String":return new Response($);case"Blob":return M6($);case"Array":return Response.json($);case"Object":return Response.json($);case"ElysiaCustomStatusResponse":return V8($.response,{status:$.code,headers:{}});case"ReadableStream":return X?.signal.addEventListener("abort",{handleEvent(){if(!X?.signal.aborted)$.cancel(X)}},{once:!0}),new Response($,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!$)return new Response("");return new Response(JSON.stringify($),{headers:{"content-type":"application/json"}});case"Response":if($.headers.get("transfer-encoding")==="chunked")return z1(B6($));return $;case"Error":return J1($);case"Promise":return $.then((Z)=>K1(Z,X));case"Function":return K1($(),X);case"Number":case"Boolean":return new Response($.toString());case"FormData":return new Response($);default:if($ instanceof Response)return $;if($ instanceof Promise)return $.then((Z)=>K1(Z,X));if($ instanceof Error)return J1($);if($ instanceof M1)return V8($.response,{status:$.code,headers:{}});if(typeof $?.next==="function")return z1($,void 0,X);if(typeof $?.then==="function")return $.then((Z)=>V8(Z,set));if(typeof $?.toResponse==="function")return K1($.toResponse());if("charCodeAt"in $){let Z=$.charCodeAt(0);if(Z===123||Z===91)return new Response(JSON.stringify($),{headers:{"Content-Type":"application/json"}})}return new Response($)}},J1=($,X)=>new Response(JSON.stringify({name:$?.name,message:$?.message,cause:$?.cause}),{status:X?.status!==200?X?.status??500:500,headers:X?.headers}),jq=($,X,Z={})=>{if(typeof $==="function")return;let Q=V8($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0)return Q.clone.bind(Q)},bq=($,X,Z={})=>{if(typeof $==="function"||$ instanceof Blob)return;let Q=V8($,{headers:Z});if(X.parse.length===0&&X.transform.length===0&&X.beforeHandle.length===0&&X.afterHandle.length===0){if(!Q.headers.has("content-type"))Q.headers.append("content-type","text/plain;charset=utf-8");return Q.clone.bind(Q)}},g6=($,X)=>{let Z=new URL($);return Z.pathname=X,Z.toString()},Rq=($)=>typeof $==="function"&&/^\s*class\s+/.test($.toString())||$.toString().startsWith("[object ")&&$.toString()!=="[object Object]"||l0(Object.getPrototypeOf($)),wX=($)=>$&&typeof $==="object"&&!Array.isArray($),U0=($,X,{skipKeys:Z,override:Q=!0}={})=>{if(!wX($)||!wX(X))return $;for(let[W,Y]of Object.entries(X)){if(Z?.includes(W))continue;if(!wX(Y)||!(W in $)||Rq(Y)){if(Q||!(W in $))$[W]=Y;continue}$[W]=U0($[W],Y,{skipKeys:Z,override:Q})}return $},Vq=($,X)=>{let{properties:Z,...Q}=$??{},{properties:W,...Y}=X??{};return U0(Q,Y)},h8=($=[],X=[])=>{if(!$)return[];if(!X)return $;let Z=[],Q=[];if(!Array.isArray($))$=[$];if(!Array.isArray(X))X=[X];for(let W of $)if(Z.push(W),W.checksum)Q.push(W.checksum);for(let W of X)if(!Q.includes(W.checksum))Z.push(W);return Z},Eq=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],Iq=Eq.reduce(($,X)=>($[X]=!0,$),{}),kW=($,X)=>{let Z=(Q)=>typeof Q==="object"&&Object.keys(Q).every(_X);if(Z($)&&Z(X))return{...$,...X};else if($&&!Z($)&&Z(X))return{200:$,...X};return X??$},Y6=($,X)=>{return{body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:kW($?.response,X?.response)}},T0=($,X)=>{return{...$,...X,body:X?.body??$?.body,headers:X?.headers??$?.headers,params:X?.params??$?.params,query:X?.query??$?.query,cookie:X?.cookie??$?.cookie,response:kW($?.response,X?.response),type:$?.type||X?.type,detail:U0(X?.detail??{},$?.detail??{}),parse:h8($?.parse,X?.parse),transform:h8($?.transform,X?.transform),beforeHandle:h8($?.beforeHandle,X?.beforeHandle),afterHandle:h8($?.afterHandle,X?.afterHandle),mapResponse:h8($?.mapResponse,X?.mapResponse),afterResponse:h8($?.afterResponse,X?.afterResponse),trace:h8($?.trace,X?.trace),error:h8($?.error,X?.error)}},ZW=($,X,Z=!0)=>{if(!Array.isArray(X))return e8($,X,Z);for(let Q of X)$=e8($,Q,Z);return $},e8=($,X,Z=!0)=>{if(!$)return $;if(X.untilObjectFound&&!Z&&$.type==="object")return $;let Q=X.from[A];if($.oneOf){for(let z=0;z<$.oneOf.length;z++)$.oneOf[z]=e8($.oneOf[z],X,Z);return $}if($.anyOf){for(let z=0;z<$.anyOf.length;z++)$.anyOf[z]=e8($.anyOf[z],X,Z);return $}if($.allOf){for(let z=0;z<$.allOf.length;z++)$.allOf[z]=e8($.allOf[z],X,Z);return $}if($.not){for(let z=0;z<$.not.length;z++)$.not[z]=e8($.not[z],X,Z);return $}let W=Z&&!!X.excludeRoot;if($[A]===Q){let{anyOf:z,oneOf:J,allOf:B,not:w,properties:q,items:D,...O}=$,M=X.to(O),F,S=(_)=>{if(q&&_.type==="object"){let x={};for(let[V,r]of Object.entries(q))x[V]=e8(r,X,!1);return{...O,..._,properties:x}}if(D&&_.type==="array")return{...O,..._,items:e8(D,X,!1)};let b={...O,..._};if(delete b.required,q&&_.type==="string"&&_.format==="ObjectString"&&_.default==="{}")F=g.ObjectString(q,O),b.default=JSON.stringify(m.Create(g.Object(q))),b.properties=q;if(D&&_.type==="string"&&_.format==="ArrayString"&&_.default==="[]")F=g.ArrayString(D,O),b.default=JSON.stringify(m.Create(g.Array(D))),b.items=D;return b};if(W){if(q){let _={};for(let[b,x]of Object.entries(q))_[b]=e8(x,X,!1);return{...O,properties:_}}else if(D?.map)return{...O,items:D.map((_)=>e8(_,X,!1))};return O}if(M.anyOf)for(let _=0;_<M.anyOf.length;_++)M.anyOf[_]=S(M.anyOf[_]);else if(M.oneOf)for(let _=0;_<M.oneOf.length;_++)M.oneOf[_]=S(M.oneOf[_]);else if(M.allOf)for(let _=0;_<M.allOf.length;_++)M.allOf[_]=S(M.allOf[_]);else if(M.not)for(let _=0;_<M.not.length;_++)M.not[_]=S(M.not[_]);if(F)M[K8]=F[K8];if(M.anyOf||M.oneOf||M.allOf||M.not)return M;if(q){let _={};for(let[b,x]of Object.entries(q))_[b]=e8(x,X,!1);return{...O,...M,properties:_}}else if(D?.map)return{...O,...M,items:D.map((_)=>e8(_,X,!1))};return{...O,...M}}let Y=$?.properties;if(Y&&Z&&X.rootOnly!==!0)for(let[z,J]of Object.entries(Y))switch(J[A]){case Q:let{anyOf:B,oneOf:w,allOf:q,not:D,type:O,...M}=J,F=X.to(M);if(F.anyOf)for(let S=0;S<F.anyOf.length;S++)F.anyOf[S]={...M,...F.anyOf[S]};else if(F.oneOf)for(let S=0;S<F.oneOf.length;S++)F.oneOf[S]={...M,...F.oneOf[S]};else if(F.allOf)for(let S=0;S<F.allOf.length;S++)F.allOf[S]={...M,...F.allOf[S]};else if(F.not)for(let S=0;S<F.not.length;S++)F.not[S]={...M,...F.not[S]};Y[z]={...M,...e8(M,X,!1)};break;case"Object":case"Union":Y[z]=e8(J,X,!1);break;default:if(J.items)for(let S=0;S<J.items.length;S++)J.items[S]=e8(J.items[S],X,!1);else if(J.anyOf||J.oneOf||J.allOf||J.not)Y[z]=e8(J,X,!1);break}return $},q0=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1,coerce:Y=!1,additionalCoerce:z=[]}={})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let J=typeof $==="string"?X[$]:$;if(Y||z)if(Y)J=ZW(J,[{from:g.Number(),to:(q)=>g.Numeric(q),untilObjectFound:!0},{from:g.Boolean(),to:(q)=>g.BooleanString(q),untilObjectFound:!0},...Array.isArray(z)?z:[z]]);else J=ZW(J,[...Array.isArray(z)?z:[z]]);if(J.type==="object"&&"additionalProperties"in J===!1)J.additionalProperties=W;let B=(q)=>m.Clean(J,q);if(Z){let q={schema:J,references:"",checkFunc:()=>{},code:"",Check:(D)=>m.Check(J,D),Errors:(D)=>m.Errors(J,D),Code:()=>"",Clean:B,Decode:(D)=>m.Decode(J,D),Encode:(D)=>m.Encode(J,D)};if(Q&&J.additionalProperties===!1)q.Clean=B;if(J.config){if(q.config=J.config,q?.schema?.config)delete q.schema.config}return q.parse=(D)=>{try{return q.Decode(D)}catch(O){throw[...q.Errors(D)].map(Y1)}},q.safeParse=(D)=>{try{return{success:!0,data:q.Decode(D),error:null}}catch(O){let M=[...w.Errors(D)].map(Y1);return{success:!1,data:null,error:M[0]?.summary,errors:M}}},q}let w=F1.Compile(J,Object.values(X));if(w.Clean=B,J.config){if(w.config=J.config,w?.schema?.config)delete w.schema.config}return w.parse=(q)=>{try{return w.Decode(q)}catch(D){throw[...w.Errors(q)].map(Y1)}},w.safeParse=(q)=>{try{return{success:!0,data:w.Decode(q),error:null}}catch(D){let O=[...w.Errors(q)].map(Y1);return{success:!1,data:null,error:O[0]?.summary,errors:O}}},w},QW=($,{models:X={},dynamic:Z=!1,normalize:Q=!1,additionalProperties:W=!1})=>{if(!$)return;if(typeof $==="string"&&!($ in X))return;let Y=typeof $==="string"?X[$]:$,z=(B,w)=>{let q=(O)=>{if(!O||typeof O!=="object")return m.Clean(B,O);if(Array.isArray(O))O=m.Clean(B,O);else O=m.Clean(B,O);return O};if(Z)return{schema:B,references:"",checkFunc:()=>{},code:"",Check:(O)=>m.Check(B,O),Errors:(O)=>m.Errors(B,O),Code:()=>"",Decode:(O)=>m.Decode(B,O),Encode:(O)=>m.Encode(B,O)};let D=F1.Compile(B,w);if(Q&&B.additionalProperties===!1)D.Clean=q;return D};if(A in Y){if("additionalProperties"in Y===!1)Y.additionalProperties=W;return{200:z(Y,Object.values(X))}}let J={};return Object.keys(Y).forEach((B)=>{let w=Y[+B];if(typeof w==="string"){if(w in X){let q=X[w];q.type==="object"&&"additionalProperties"in q,J[+B]=A in q?z(q,Object.values(X)):q}return}if(w.type==="object"&&"additionalProperties"in w===!1)w.additionalProperties=W;J[+B]=A in w?z(w,Object.values(X)):w}),J},xq=typeof Bun!=="undefined",kq=xq&&typeof Bun.hash==="function",z6=($)=>{if(kq)return Bun.hash($);let X=9;for(let Z=0;Z<$.length;)X=Math.imul(X^$.charCodeAt(Z++),387420489);return X=X^X>>>9},HX,n1=()=>{if(!HX)HX=[{from:g.Object({}),to:()=>g.ObjectString({}),excludeRoot:!0},{from:g.Array(g.Any()),to:()=>g.ArrayString(g.Any())}];return HX},DX,WW=()=>{if(!DX)DX=[{from:g.Number(),to:($)=>g.Numeric($),rootOnly:!0},{from:g.Boolean(),to:($)=>g.BooleanString($),rootOnly:!0}];return DX},TW=({validator:$,defaultConfig:X={},config:Z,dynamic:Q,models:W})=>{let Y=q0($,{dynamic:Q,models:W,additionalProperties:!0,coerce:!0,additionalCoerce:n1()});if(l0(X))if(Y)Y.config=Vq(Y.config,Z);else Y=q0(g.Cookie({}),{dynamic:Q,models:W,additionalProperties:!0}),Y.config=X;return Y},c0=($,X)=>{if(!X)return;if(!Array.isArray(X)){let Q=X;if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local";return Q}let Z=[...X];for(let Q of Z){if($&&!Q.checksum)Q.checksum=$;if(Q.scope==="scoped")Q.scope="local"}return Z},YW=($,X,Z)=>{return{start:h8($.start,c0(Z,X?.start)),request:h8($.request,c0(Z,X?.request)),parse:h8($.parse,c0(Z,X?.parse)),transform:h8($.transform,c0(Z,X?.transform)),beforeHandle:h8($.beforeHandle,c0(Z,X?.beforeHandle)),afterHandle:h8($.afterHandle,c0(Z,X?.afterHandle)),mapResponse:h8($.mapResponse,c0(Z,X?.mapResponse)),afterResponse:h8($.afterResponse,c0(Z,X?.afterResponse)),trace:h8($.trace,c0(Z,X?.trace)),error:h8($.error,c0(Z,X?.error)),stop:h8($.stop,c0(Z,X?.stop))}},Tq=($,X,{skipIfHasType:Z=!1}={})=>{if(!$)return $;if(!Array.isArray($)){if(Z)$.scope??=X;else $.scope=X;return $}for(let Q of $)if(Z)Q.scope??=X;else Q.scope=X;return $},E1=($)=>{if(!$)return $;if(!Array.isArray($))switch($.scope){case"global":case"scoped":return{...$};default:return{fn:$}}let X=[];for(let Z of $)switch(Z.scope){case"global":case"scoped":X.push({...Z});break}return X},zW=($)=>{return{...$,type:$?.type,detail:$?.detail,parse:E1($?.parse),transform:E1($?.transform),beforeHandle:E1($?.beforeHandle),afterHandle:E1($?.afterHandle),mapResponse:E1($?.mapResponse),afterResponse:E1($?.afterResponse),error:E1($?.error),trace:E1($?.trace)}},q6={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},JW=Object.fromEntries(Object.entries(q6).map(([$,X])=>[X,$]));function gq($){let X=$;while(X.endsWith("="))X=X.slice(0,-1);return X}var MW=new TextEncoder,d6=async($,X)=>{if(typeof $!=="string")throw new TypeError("Cookie value must be provided as a string.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=await crypto.subtle.importKey("raw",MW.encode(X),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Q=await crypto.subtle.sign("HMAC",Z,MW.encode($));return $+"."+gq(Buffer.from(Q).toString("base64"))},BW=async($,X)=>{if(typeof $!=="string")throw new TypeError("Signed cookie string must be provided.");if(X===null)throw new TypeError("Secret key must be provided.");let Z=$.slice(0,$.lastIndexOf("."));return await d6(Z,X)===$?Z:!1},fq=($,X)=>{if(!$||typeof $!=="object"||!X)return;for(let[Z,Q]of Object.entries(X)){if(Z in Iq||!(Z in $))continue;let W=$[Z];if(typeof W==="function")W(Q),delete X[Z]}},yq=({globalHook:$,localHook:X})=>(Z)=>(Q,W)=>{if(typeof Q==="function")Q={fn:Q};if("fn"in Q||Array.isArray(Q)){if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(Array.isArray(Q))X[Z]=X[Z].concat(Q);else X[Z].push(Q);return}let{insert:Y="after",stack:z="local"}=Q;if(typeof W==="function")W={fn:W};if(z==="global")if(!Array.isArray(W))if(Y==="before")$[Z].unshift(W);else $[Z].push(W);else if(Y==="before")$[Z]=W.concat($[Z]);else $[Z]=$[Z].concat(W);else{if(!X[Z])X[Z]=[];if(typeof X[Z]==="function")X[Z]=[X[Z]];if(!Array.isArray(W))if(Y==="before")X[Z].unshift(W);else X[Z].push(W);else if(Y==="before")X[Z]=W.concat(X[Z]);else X[Z]=X[Z].concat(W)}},dq=($)=>{if(typeof $==="number")return $;if($.length<16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X))return null;return X}if($.length===16){if($.trim().length===0)return null;let X=Number($);if(Number.isNaN(X)||X.toString()!==$)return null;return X}return null},_X=($)=>dq($)!==null,vq=class{constructor($=console.error){this.onError=$,this.root=null,this.promises=[]}get size(){return this.promises.length}add($){return this.promises.push($),this.root||=this.drain(),$}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch($){this.onError($)}this.promises.shift()}this.root=null}then($,X){return(this.root??Promise.resolve()).then($,X)}},g0=($)=>{if(!$)return $;if(!Array.isArray($)){if(typeof $==="function")return{fn:$};else if("fn"in $)return $}let X=[];for(let Z of $)if(typeof Z==="function")X.push({fn:Z});else if("fn"in Z)X.push(Z);return X},hq=($)=>{return{...$,start:g0($?.start),request:g0($?.request),parse:g0($?.parse),transform:g0($?.transform),beforeHandle:g0($?.beforeHandle),afterHandle:g0($?.afterHandle),mapResponse:g0($?.mapResponse),afterResponse:g0($?.afterResponse),trace:g0($?.trace),error:g0($?.error),stop:g0($?.stop)}},qW=($)=>{return{...$,start:$.start?.map((X)=>X.fn),request:$.request?.map((X)=>X.fn),parse:$.parse?.map((X)=>X.fn),transform:$.transform?.map((X)=>X.fn),beforeHandle:$.beforeHandle?.map((X)=>X.fn),afterHandle:$.afterHandle?.map((X)=>X.fn),afterResponse:$.afterResponse?.map((X)=>X.fn),mapResponse:$.mapResponse?.map((X)=>X.fn),trace:$.trace?.map((X)=>X.fn),error:$.error?.map((X)=>X.fn),stop:$.stop?.map((X)=>X.fn)}},AX=($)=>({body:$.body,cookie:$.cookie,headers:$.headers,query:$.query,set:$.set,server:$.server}),gW=($,X=302)=>Response.redirect($,X),sR=Symbol("ElysiaFormData"),p6=Symbol("ElysiaRequestId");var fW=()=>crypto.getRandomValues(new Uint32Array(1))[0],UW=($)=>{let X=[];for(let Z=0;Z<$.length;Z++){let Q=$[Z];if(Q.checksum){if(X.includes(Q.checksum))$.splice(Z,1),Z--;X.push(Q.checksum)}}return $},a8=($,X="scoped")=>{if(X==="scoped"){for(let Z of $)if("scope"in Z&&Z.scope==="local")Z.scope="scoped";return}for(let Z of $)if("scope"in Z)Z.scope="global"},GW=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,v6=Symbol("ElysiaErrorCode"),h6=(GW?.NODE_ENV??GW?.ENV)==="production",M1=class{constructor($,X){let Z=X??($ in JW?JW[$]:$);this.code=q6[$]??$,this.response=Z}},pq=($,X)=>new M1($,X),mq=class extends Error{constructor($){super($??"INTERNAL_SERVER_ERROR");this.code="INTERNAL_SERVER_ERROR",this.status=500}},KX=class extends Error{constructor($){super($??"NOT_FOUND");this.code="NOT_FOUND",this.status=404}},uq=class extends Error{constructor(){super("Failed to parse body");this.code="PARSE",this.status=400}},wW=class extends Error{constructor($,X){super(X??`"${$}" has invalid cookie signature`);this.key=$,this.code="INVALID_COOKIE_SIGNATURE",this.status=400}},Y1=($)=>{if(!$)return{summary:void 0};let{message:X,path:Z,value:Q,type:W}=$,Y=Z.slice(1).replaceAll("/","."),z=Z==="";switch(W){case 42:return{...$,summary:z?"Value should not be provided":`Property '${Y}' should not be provided`};case 45:return{...$,summary:z?"Value is missing":`Property '${Y}' is missing`};case 50:let J=X.indexOf("'"),B=X.slice(J+1,X.indexOf("'",J+1));return{...$,summary:z?"Value should be an email":`Property '${Y}' should be ${B}`};case 54:return{...$,summary:`${X.slice(0,9)} property '${Y}' to be ${X.slice(8)} but found: ${Q}`};case 62:let w=$.schema.anyOf.map((q)=>`'${q?.format??q.type}'`).join(", ");return{...$,summary:z?`Value should be one of ${w}`:`Property '${Y}' should be one of: ${w}`};default:return{summary:X,...$}}},D8=class $ extends Error{constructor(X,Z,Q){if(Q&&typeof Q==="object"&&Q instanceof M1)Q=Q.response;let W=h6?void 0:("Errors"in Z)?Z.Errors(Q).First():m.Errors(Z,Q).First(),Y=W?.schema.error!==void 0?typeof W.schema.error==="function"?W.schema.error({type:X,validator:Z,value:Q,get errors(){return[...Z.Errors(Q)].map(Y1)}}):W.schema.error:void 0,z=W?.path||"root",J="";if(Y!==void 0)J=typeof Y==="object"?JSON.stringify(Y):Y+"";else if(h6)J=JSON.stringify({type:"validation",on:X,summary:Y1(W).summary,message:W?.message,found:Q});else{let B=Z?.schema??Z,w="Errors"in Z?[...Z.Errors(Q)].map(Y1):[...m.Errors(Z,Q)].map(Y1),q;try{q=m.Create(B)}catch(D){q={type:"Could not create expected value",message:D?.message,error:D}}J=JSON.stringify({type:"validation",on:X,summary:w[0]?.summary,property:z,message:W?.message,expected:q,found:Q,errors:w},null,2)}super(J);this.type=X,this.validator=Z,this.value=Q,this.code="VALIDATION",this.status=422,Object.setPrototypeOf(this,$.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(Y1):[...m.Errors(this.validator,this.value)].map(Y1)}static simplifyModel(X){let Z="schema"in X?X.schema:X;try{return m.Create(Z)}catch{return Z}}get model(){return $.simplifyModel(this.validator)}toResponse(X){return new Response(this.message,{status:400,headers:{...X,"content-type":"application/json"}})}},HW={open($){$.data.open?.($)},message($,X){$.data.message?.($,X)},drain($){$.data.drain?.($)},close($,X,Z){$.data.close?.($,X,Z)}},f6=class{constructor($,X){if(this.raw=$,this.data=X,this.validator=$.data.validator,$.data.id)this.id=$.data.id;else this.id=fW().toString()}get id(){return this.raw.data.id}set id($){this.raw.data.id=$}get publish(){return($,X=void 0,Z)=>{if(this.validator?.Check(X)===!1)throw new D8("message",this.validator,X);if(typeof X==="object")X=JSON.stringify(X);return this.raw.publish($,X,Z),this}}get send(){return($)=>{if(this.validator?.Check($)===!1)throw new D8("message",this.validator,$);if(Buffer.isBuffer($))return this.raw.send($),this;if(typeof $==="object")$=JSON.stringify($);return this.raw.send($),this}}get subscribe(){return($)=>{return this.raw.subscribe($),this}}get unsubscribe(){return($)=>{return this.raw.unsubscribe($),this}}get cork(){return($)=>{return this.raw.cork($),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}},DW="1.1.24",w2=/\+/g;function yW($){let X={};if(typeof $!=="string")return X;let Z="",Q="",W=-1,Y=-1,z=0,J=$.length;for(let B=0;B<J;B++)switch($.charCodeAt(B)){case 38:let w=Y>W;if(!w)Y=B;if(Z=$.slice(W+1,Y),w||Z.length>0){if(z&1)Z=Z.replace(w2," ");if(z&2)Z=r1.default(Z)||Z;if(!X[Z]){if(w){if(Q=$.slice(Y+1,B),z&4)Q=Q.replace(w2," ");if(z&8)Q=r1.default(Q)||Q}X[Z]=Q}}Z="",Q="",W=B,Y=B,z=0;break;case 61:if(Y<=W)Y=B;else z|=8;break;case 43:if(Y>W)z|=4;else z|=1;break;case 37:if(Y>W)z|=8;else z|=2;break}if(W<J){let B=Y>W;if(Z=$.slice(W+1,B?Y:J),B||Z.length>0){if(z&1)Z=Z.replace(w2," ");if(z&2)Z=r1.default(Z)||Z;if(!X[Z]){if(B){if(Q=$.slice(Y+1,J),z&4)Q=Q.replace(w2," ");if(z&8)Q=r1.default(Q)||Q}X[Z]=Q}}}return X}var FX=($)=>{let X={};if(typeof $!=="string")return X;let Z=$.length,Q="",W="",Y=-1,z=-1,J=!1,B=!1,w=!1,q=!1,D=!1,O=0;for(let M=0;M<Z+1;M++){if(M!==Z)O=$.charCodeAt(M);else O=38;switch(O){case 38:{if(D=z>Y,!D)z=M;if(Q=$.slice(Y+1,z),D||Q.length>0){if(w)Q=Q.replace(w2," ");if(J)Q=r1.default(Q)||Q;if(D){if(W=$.slice(z+1,M),q)W=W.replace(w2," ");if(B)W=r1.default(W)||W}let F=X[Q];if(F===void 0)X[Q]=W;else if(F.pop)F.push(W);else X[Q]=[F,W]}W="",Y=M,z=M,J=!1,B=!1,w=!1,q=!1;break}case 61:if(z<=Y)z=M;else B=!0;break;case 43:if(z>Y)q=!0;else w=!0;break;case 37:if(z>Y)B=!0;else J=!0;break}}return X},CX=Symbol("ElysiaTrace"),S1=()=>{let{promise:$,resolve:X}=Promise.withResolvers(),{promise:Z,resolve:Q}=Promise.withResolvers(),{promise:W,resolve:Y}=Promise.withResolvers(),z=[],J=[];return[(B)=>{if(B)z.push(B);return $},(B)=>{let w=[],q=[],D=null;for(let M=0;M<(B.total??0);M++){let{promise:F,resolve:S}=Promise.withResolvers(),{promise:_,resolve:b}=Promise.withResolvers(),{promise:x,resolve:V}=Promise.withResolvers(),r=[],u=[];w.push((S8)=>{if(S8)r.push(S8);return F}),q.push((S8)=>{let A8={...S8,end:_,error:x,index:M,onStop(G8){if(G8)u.push(G8);return _}};S(A8);for(let G8=0;G8<r.length;G8++)r[G8](A8);return(G8=null)=>{let Y8=performance.now();if(G8)D=G8;let t={end:Y8,error:G8,get elapsed(){return Y8-S8.begin}};for(let E8=0;E8<u.length;E8++)u[E8](t);b(Y8),V(G8)}})}let O={...B,end:Z,error:W,onEvent(M){for(let F=0;F<w.length;F++)w[F](M)},onStop(M){if(M)J.push(M);return Z}};X(O);for(let M=0;M<z.length;M++)z[M](O);return{resolveChild:q,resolve(M=null){let F=performance.now();if(!M&&D)M=D;let S={end:F,error:M,get elapsed(){return F-B.begin}};for(let _=0;_<J.length;_++)J[_](S);Q(F),Y(M)}}}]},cq=($)=>{return(X)=>{let[Z,Q]=S1(),[W,Y]=S1(),[z,J]=S1(),[B,w]=S1(),[q,D]=S1(),[O,M]=S1(),[F,S]=S1(),[_,b]=S1(),[x,V]=S1();return $({id:X[p6],context:X,set:X.set,onRequest:Z,onParse:W,onTransform:z,onBeforeHandle:B,onHandle:q,onAfterHandle:O,onMapResponse:_,onAfterResponse:x,onError:F}),{request:Q,parse:Y,transform:J,beforeHandle:w,handle:D,afterHandle:M,error:S,mapResponse:b,afterResponse:V}}},iq=new Headers().toJSON,vW={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},C0=($)=>{if(!$)return!1;let X=$?.schema;return!!X&&vW.optional in X},i0=($)=>{if(!$)return!1;let X=$?.schema??$;if(X.anyOf)return X.anyOf.some(i0);if(X.someOf)return X.someOf.some(i0);if(X.allOf)return X.allOf.some(i0);if(X.not)return X.not.some(i0);if(X.type==="object"){let Z=X.properties;if("additionalProperties"in X)return X.additionalProperties;if("patternProperties"in X)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if(W.type==="object"){if(i0(W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(i0(W.anyOf[Y]))return!0}return W.additionalProperties}return!1}return!1},jX=({context:$="c",trace:X,addFn:Z})=>{if(!X.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Q=0;Q<X.length;Q++)Z(`let report${Q}, reportChild${Q}, reportErr${Q}, reportErrChild${Q}; let trace${Q} = ${$}[ELYSIA_TRACE]?.[${Q}] ?? trace[${Q}](${$});
`);return(Q,{name:W,total:Y=0}={})=>{if(!W)W="anonymous";let z=Q==="error"?"reportErr":"report";for(let J=0;J<X.length;J++)Z(`
${z}${J} = trace${J}.${Q}({id,event: '${Q}',name: '${W}',begin: performance.now(),total: ${Y}})
`);return{resolve(){for(let J=0;J<X.length;J++)Z(`
${z}${J}.resolve()
`)},resolveChild(J){for(let B=0;B<X.length;B++)Z(`${z}Child${B} = ${z}${B}.resolveChild?.shift()?.({id,event: '${Q}',name: '${J}',begin: performance.now()})
`);return(B)=>{for(let w=0;w<X.length;w++)if(B)Z(`
                             	if (${B} instanceof Error)
                    				${z}Child${w}?.(${B})
                           		else
                             		${z}Child${w}?.()
`);else Z(`${z}Child${w}?.()
`)}}}}},lq=({injectResponse:$="",normalize:X=!1,validator:Z})=>({composeValidation:(Q,W=`c.${Q}`)=>`c.set.status = 422; throw new ValidationError('${Q}', validator.${Q}, ${W})`,composeResponseValidation:(Q="r")=>{let W="\n"+$+"\n";W+=`if(${Q} instanceof ElysiaCustomStatusResponse) {
			c.set.status = ${Q}.code
			${Q} = ${Q}.response
		}

		const isResponse = ${Q} instanceof Response

`,W+=`switch(c.set.status) {
`;for(let[Y,z]of Object.entries(Z.response)){if(W+=`	case ${Y}:
				if (!isResponse) {
`,X&&"Clean"in z&&!i0(z))W+=`${Q} = validator.response['${Y}'].Clean(${Q})
`;W+=`if(validator.response['${Y}'].Check(${Q}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${Y}'], ${Q})
				}

				c.set.status = ${Y}
			}

			break

`}return W+="\n}\n",W}}),eR=Symbol.for("TypeBox.Kind"),o1=($,X)=>{if(!X)return;if(X.type==="object"){let Z=X.properties;if(!Z)return!1;for(let Q of Object.keys(Z)){let W=Z[Q];if($ in W)return!0;if(W.type==="object"){if(o1($,W))return!0}else if(W.anyOf){for(let Y=0;Y<W.anyOf.length;Y++)if(o1($,W.anyOf[Y]))return!0}}return!1}return $ in X},NX=Symbol.for("TypeBox.Transform"),t1=($)=>{if(!$)return;if($.type==="object"&&$.properties){let X=$.properties;for(let Z of Object.keys(X)){let Q=X[Z];if(Q.type==="object"){if(t1(Q))return!0}else if(Q.anyOf){for(let Y=0;Y<Q.anyOf.length;Y++)if(t1(Q.anyOf[Y]))return!0}if(NX in Q)return!0}return!1}return NX in $||$.properties&&NX in $.properties},nq=/(?:return|=>) \S+\(/g,s1=($)=>{return($?.fn??$).constructor.name==="AsyncFunction"},v8=($)=>{let X=$?.fn??$;if(X.constructor.name==="AsyncFunction")return!0;let Z=X.toString();if(Z.includes("=> response.clone("))return!1;if(Z.includes("await"))return!0;if(Z.includes("async"))return!0;return!!Z.match(nq)},y6=($)=>{let X=$?.fn??$;return X.constructor.name==="AsyncGeneratorFunction"||X.constructor.name==="GeneratorFunction"},oq=({app:$,path:X,method:Z,localHook:Q,hooks:W,validator:Y,handler:z,allowMeta:J=!1,inference:B})=>{let w=typeof z==="function";if(!w){if(z=V8(z,{headers:$.setHeaders??{}}),W.parse.length===0&&W.transform.length===0&&W.beforeHandle.length===0&&W.afterHandle.length===0)return Function("a","return function () { return a.clone() }")(z)}let q=w?"handler(c)":"handler",D=W.afterResponse.length>0,O=W.trace.length>0,M="";if(B=_W(Object.assign(Q,{handler:z}),B),B.server)M+=`
Object.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})
`;if(B.body)M+=`let isParsing = false
`;Y.createBody?.(),Y.createQuery?.(),Y.createHeaders?.(),Y.createParams?.(),Y.createCookie?.(),Y.createResponse?.();let F=B.query||!!Y.query,S=Z!=="$INTERNALWS"&&Z!=="GET"&&Z!=="HEAD"&&(B.body||!!Y.body||W.parse.length),_=$.setHeaders,b=_&&!!Object.keys(_).length,x=B.headers||Y.headers,V=B.cookie||!!Y.cookie,r=V?TW({validator:Y.cookie,defaultConfig:$.config.cookie,dynamic:!!$.config.aot,config:Y.cookie?.config??{},models:$.definitions.type}):void 0,u=r?.config,S8="";if(u?.sign){if(!u.secrets)throw new Error(`t.Cookie required secret which is not set in (${Z}) ${X}.`);let K=!u.secrets?void 0:typeof u.secrets==="string"?u.secrets:u.secrets[0];if(S8+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,u.sign===!0)S8+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${K}')
			}`;else for(let L of u.sign)S8+=`if(_setCookie['${L}']?.value) { c.set.cookie['${L}'].value = await signCookie(_setCookie['${L}'].value, '${K}') }
`;S8+="}\n"}let A8=$.config.normalize,{composeValidation:G8,composeResponseValidation:Y8}=lq({normalize:A8,validator:Y});if(x)M+=iq?`c.headers = c.request.headers.toJSON()
`:`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(V){let K=(R,T)=>{let y=u?.[R]??T;if(!y)return typeof T==="string"?`${R}: "${T}",`:`${R}: ${T},`;if(typeof y==="string")return`${R}: '${y}',`;if(y instanceof Date)return`${R}: new Date(${y.getTime()}),`;return`${R}: ${y},`},L=u?`{
			secrets: ${u.secrets!==void 0?typeof u.secrets==="string"?`'${u.secrets}'`:"["+u.secrets.reduce((R,T)=>R+`'${T}',`,"")+"]":"undefined"},
			sign: ${u.sign===!0?!0:u.sign!==void 0?"["+u.sign.reduce((R,T)=>R+`'${T}',`,"")+"]":"undefined"},
			${K("domain")}
			${K("expires")}
			${K("httpOnly")}
			${K("maxAge")}
			${K("path","/")}
			${K("priority")}
			${K("sameSite")}
			${K("secure")}
		}`:"undefined";if(x)M+=`
c.cookie = await parseCookie(c.set, c.headers.cookie, ${L})
`;else M+=`
c.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${L})
`}if(F){let K=[];if(Y.query&&Y.query.schema.type==="object"){let L=Y.query.schema.properties;if(!i0(Y.query))for(let[R,T]of Object.entries(L)){let y=T;if(y&&vW.optional in y&&y.type==="array"&&y.items)y=y.items;let{type:c8,anyOf:l}=y,f0=c8==="array"||l?.some((y8)=>y8.type==="string"&&y8.format==="ArrayString");K.push({key:R,isArray:f0,isNestedObjectArray:f0&&y.items?.type==="object"||!!y.items?.anyOf?.some((y8)=>y8.type==="object"||y8.type==="array"),isObject:c8==="object"||l?.some((y8)=>y8.type==="string"&&y8.format==="ArrayString"),anyOf:!!l})}}if(!K.length)M+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQueryFromURL(c.url.slice(c.qi + 1))
			}`;else M+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${K.map(({key:L,isArray:R,isObject:T,isNestedObjectArray:y,anyOf:c8},l)=>{let f0=`${l===0?"let":""} memory = url.indexOf('&${L}=')
							let a${l}
`;if(R)return f0+(y?`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${l} === undefined)
												a${l} = ''
											else
												a${l} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
											else temp = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${l} += temp

											if(memory === -1) break

											memory = url.indexOf('&${L}=', memory)
											if(memory === -1) break
										}

										try {
										    if(a${l}.charCodeAt(0) === 91)
												a${l} = JSON.parse(a${l})
											else
												a${l} = JSON.parse('[' + a${l} + ']')
										} catch {}
`:`while (memory !== -1) {
											const start = memory + ${L.length+2}
											memory = url.indexOf('&', start)

											if(a${l} === undefined)
												a${l} = []

											if(memory === -1) {
												a${l}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g, ' '))
												break
											}
											else a${l}.push(decodeURIComponent(url.slice(start, memory)).replace(/\\+/g, ' '))

											memory = url.indexOf('&${L}=', memory)
											if(memory === -1) break
										}
`);if(T)return f0+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${l} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else a${l} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

										if (a${l} !== undefined) {
											try {
												a${l} = JSON.parse(a${l})
											} catch {}
										}
									}`;return f0+`if (memory !== -1) {
										const start = memory + ${L.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${l} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else {
											a${l} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											${c8?`
											let deepMemory = url.indexOf('&${L}=', memory)

											if(deepMemory !== -1) {
												a${l} = [a${l}]
												let first = true

												while(true) {
													const start = deepMemory + ${L.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
													else value = decodeURIComponent(url.slice(start, deepMemory).replace(/\\+/g, ' '))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${l}.push(JSON.parse(value))
														} catch {
														 	a${l}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
												`:""}
										}
									}`}).join("\n")}

				c.query = {
					${K.map(({key:L},R)=>`'${L}': a${R}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}if(O)M+="\nconst id = c[ELYSIA_REQUEST_ID]\n";let t=jX({trace:W.trace,addFn:(K)=>{M+=K}});M+="\ntry {\n";let E8=typeof z==="function"&&v8(z),G0=O||W.afterResponse.length>0?"c.response = ":"",I1=V||S||E8||W.parse.length>0||W.afterHandle.some(v8)||W.beforeHandle.some(v8)||W.transform.some(v8)||W.mapResponse.some(v8),m6=(typeof z==="function"?y6(z):!1)||W.beforeHandle.some(y6)||W.afterHandle.some(y6)||W.transform.some(y6),e1=B.cookie||B.set||x||O||Y.response||w&&b||m6,Z0=", c.request";M+=`c.route = \`${X}\`
`;let u6=t("parse",{total:W.parse.length});if(S){let K=W.parse.length||B.body||Y.body;if(M+="isParsing = true\n",W.type&&!W.parse.length)switch(W.type){case"json":case"application/json":if(C0(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":if(M+=`c.body = {}
`,C0(Y.body))M+="let form; try { form = await c.request.formData() } catch {}";else M+="const form = await c.request.formData()";M+=`
if(form)
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						} else form = {}
`;break}else if(K){if(M+="\n",M+=x?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",M+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)

					c.contentType = contentType
`,W.parse.length){M+=`let used = false
`;let L=t("parse",{total:W.parse.length});for(let R=0;R<W.parse.length;R++){let T=L.resolveChild(W.parse[R].fn.name),y=`bo${R}`;if(R!==0)M+=`if(!used) {
`;if(M+=`let ${y} = parse[${R}](c, contentType)
`,M+=`if(${y} instanceof Promise) ${y} = await ${y}
`,M+=`if(${y} !== undefined) { c.body = ${y}; used = true }
`,T(),R!==0)M+="}"}L.resolve()}if(M+="\ndelete c.contentType\n",W.parse.length)M+="if (!used) {";if(W.type&&!Array.isArray(W.type))switch(W.type){case"json":case"application/json":if(C0(Y.body))M+="try { c.body = await c.request.json() } catch {}";else M+="c.body = await c.request.json()";break;case"text":case"text/plain":M+=`c.body = await c.request.text()
`;break;case"urlencoded":case"application/x-www-form-urlencoded":M+=`c.body = parseQuery(await c.request.text())
`;break;case"arrayBuffer":case"application/octet-stream":M+=`c.body = await c.request.arrayBuffer()
`;break;case"formdata":case"multipart/form-data":M+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}
`;break}else M+=`
					switch (contentType) {
						case 'application/json':
							${C0(Y.body)?"try { c.body = await c.request.json() } catch {}":"c.body = await c.request.json()"}
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(W.parse.length)M+="}";M+="}\n"}M+="\nisParsing = false\n"}if(u6.resolve(),W?.transform){let K=t("transform",{total:W.transform.length});if(W.transform.length)M+="\nlet transformed\n";for(let L=0;L<W.transform.length;L++){let R=W.transform[L],T=K.resolveChild(R.fn.name);if(M+=v8(R)?`transformed = await transform[${L}](c)
`:`transformed = transform[${L}](c)
`,R.subType==="mapDerive")M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else M+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else
					Object.assign(c, transformed)
`;T()}K.resolve()}if(Y){if(M+="\n",Y.headers){if(A8&&"Clean"in Y.headers&&!i0(Y.headers))M+="c.headers = validator.headers.Clean(c.headers);\n";if(o1("default",Y.headers.schema))for(let[K,L]of Object.entries(m.Default(Y.headers.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`c.headers['${K}'] ??= ${R}
`}if(C0(Y.headers))M+="if(isNotEmpty(c.headers)) {";if(M+=`if(validator.headers.Check(c.headers) === false) {
				${G8("headers")}
			}`,t1(Y.headers.schema))M+=`c.headers = validator.headers.Decode(c.headers)
`;if(C0(Y.headers))M+="}"}if(Y.params){if(o1("default",Y.params.schema))for(let[K,L]of Object.entries(m.Default(Y.params.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`c.params['${K}'] ??= ${R}
`}if(M+=`if(validator.params.Check(c.params) === false) {
				${G8("params")}
			}`,t1(Y.params.schema))M+=`
c.params = validator.params.Decode(c.params)
`}if(Y.query){if(A8&&"Clean"in Y.query&&!i0(Y.query))M+="c.query = validator.query.Clean(c.query);\n";if(o1("default",Y.query.schema))for(let[K,L]of Object.entries(m.Default(Y.query.schema,{}))){let R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(R!==void 0)M+=`if(c.query['${K}'] === undefined) c.query['${K}'] = ${R}
`}if(C0(Y.query))M+="if(isNotEmpty(c.query)) {";if(M+=`if(validator.query.Check(c.query) === false) {
          		${G8("query")}
			}`,t1(Y.query.schema))M+=`
c.query = validator.query.Decode(Object.assign({}, c.query))
`;if(C0(Y.query))M+="}"}if(Y.body){if(A8&&"Clean"in Y.body&&!i0(Y.body))M+="c.body = validator.body.Clean(c.body);\n";let K=t1(Y.body.schema);if(K||C0(Y.body))M+=`
const isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))
`;if(o1("default",Y.body.schema)){let L=m.Default(Y.body.schema,Y.body.schema.type==="object"?{}:void 0),R=typeof L==="object"?JSON.stringify(L):typeof L==="string"?`'${L}'`:L;if(M+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${R}, c.body)
					} else { c.body = ${R} }`,C0(Y.body))M+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${G8("body")}
             			}
                    }`;else M+=`
    				if(validator.body.Check(c.body) === false) {
        				${G8("body")}
         			}
                }`}else if(C0(Y.body))M+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${G8("body")}
          		}`;else M+=`if(validator.body.Check(c.body) === false) {
         			${G8("body")}
          		}`;if(K)M+=`
if(isNotEmptyObject) c.body = validator.body.Decode(c.body)
`}if(l0(r?.schema?.properties??r?.schema?.schema??{})){if(M+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value
`,o1("default",r.schema))for(let[K,L]of Object.entries(m.Default(r.schema,{})))M+=`cookieValue['${K}'] = ${typeof L==="object"?JSON.stringify(L):L}
`;if(C0(Y.cookie))M+="if(isNotEmpty(c.cookie)) {";if(M+=`if(validator.cookie.Check(cookieValue) === false) {
				${G8("cookie","cookieValue")}
			}`,t1(Y.cookie.schema))M+=`
for(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value
`;if(C0(Y.cookie))M+="}"}}if(W?.beforeHandle){let K=t("beforeHandle",{total:W.beforeHandle.length}),L=!1;for(let R=0;R<W.beforeHandle.length;R++){let T=W.beforeHandle[R],y=K.resolveChild(T.fn.name),c8=J6(T);if(T.subType==="resolve"||T.subType==="mapResolve"){if(!L)L=!0,M+="\nlet resolved\n";if(M+=v8(T)?`resolved = await beforeHandle[${R}](c);
`:`resolved = beforeHandle[${R}](c);
`,T.subType==="mapResolve")M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else M+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else
						Object.assign(c, resolved)
`}else if(!c8)M+=v8(T)?`await beforeHandle[${R}](c);
`:`beforeHandle[${R}](c);
`,y();else{if(M+=v8(T)?`be = await beforeHandle[${R}](c);
`:`be = beforeHandle[${R}](c);
`,y("be"),M+=`if(be !== undefined) {
`,K.resolve(),W.afterHandle?.length){t("handle",{name:w?z.name:void 0}).resolve();let y8=t("afterHandle",{total:W.afterHandle.length});for(let j0=0;j0<W.afterHandle.length;j0++){let U=W.afterHandle[j0],E=J6(U),H=y8.resolveChild(U.fn.name);if(M+=`c.response = be
`,!E)M+=v8(U.fn)?`await afterHandle[${j0}](c, be)
`:`afterHandle[${j0}](c, be)
`;else M+=v8(U.fn)?`af = await afterHandle[${j0}](c)
`:`af = afterHandle[${j0}](c)
`,M+=`if(af !== undefined) { c.response = be = af }
`;H("af")}y8.resolve()}if(Y.response)M+=Y8("be");let f0=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+=`
c.response = be
`;for(let y8=0;y8<W.mapResponse.length;y8++){let j0=W.mapResponse[y8],U=f0.resolveChild(j0.fn.name);M+=`
if(mr === undefined) {
							mr = ${s1(j0)?"await":""} onMapResponse[${y8}](c)
							if(mr !== undefined) be = c.response = mr
						}
`,U()}}f0.resolve(),M+=S8,M+=`return mapEarlyResponse(${G0} be, c.set ${Z0})}
`}}K.resolve()}if(W?.afterHandle.length){let K=t("handle",{name:w?z.name:void 0});if(W.afterHandle.length)M+=E8?`let r = c.response = await ${q};
`:`let r = c.response = ${q};
`;else M+=E8?`let r = await ${q};
`:`let r = ${q};
`;K.resolve();let L=t("afterHandle",{total:W.afterHandle.length});for(let T=0;T<W.afterHandle.length;T++){let y=W.afterHandle[T],c8=J6(y),l=L.resolveChild(y.fn.name);if(!c8)M+=v8(y.fn)?`await afterHandle[${T}](c)
`:`afterHandle[${T}](c)
`,l();else if(M+=v8(y.fn)?`af = await afterHandle[${T}](c)
`:`af = afterHandle[${T}](c)
`,l("af"),Y.response)M+="if(af !== undefined) {",L.resolve(),M+=Y8("af"),M+="c.response = af }";else M+="if(af !== undefined) {",L.resolve(),M+=`c.response = af}
`}if(L.resolve(),M+=`r = c.response
`,Y.response)M+=Y8();M+=S8;let R=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let y=W.mapResponse[T],c8=R.resolveChild(y.fn.name);M+=`
mr = ${s1(y)?"await":""} onMapResponse[${T}](c)
				if(mr !== undefined) r = c.response = mr
`,c8()}if(R.resolve(),e1)M+=`return mapResponse(${G0} r, c.set ${Z0})
`;else M+=`return mapCompactResponse(${G0} r ${Z0})
`}else{let K=t("handle",{name:w?z.name:void 0});if(Y.response||W.mapResponse.length){if(M+=E8?`let r = await ${q};
`:`let r = ${q};
`,K.resolve(),Y.response)M+=Y8();t("afterHandle").resolve();let L=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let R=0;R<W.mapResponse.length;R++){let T=W.mapResponse[R],y=L.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
						mr = ${s1(T)?"await":""} onMapResponse[${R}](c)
    					if(mr !== undefined) r = c.response = mr
					}
`,y()}}if(L.resolve(),M+=S8,z instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${G0} ${q}.clone(), c.set ${Z0})
				else
					return ${q}.clone()`:`return ${q}.clone()`,M+="\n";else if(e1)M+=`return mapResponse(${G0} r, c.set ${Z0})
`;else M+=`return mapCompactResponse(${G0} r ${Z0})
`}else if(V||O){M+=E8?`let r = await ${q};
`:`let r = ${q};
`,K.resolve(),t("afterHandle").resolve();let L=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length){M+="\nc.response = r\n";for(let R=0;R<W.mapResponse.length;R++){let T=W.mapResponse[R],y=L.resolveChild(T.fn.name);M+=`
if(mr === undefined) {
							mr = ${s1(T)?"await":""} onMapResponse[${R}](c)
    						if(mr !== undefined) r = c.response = mr
						}
`,y()}}if(L.resolve(),M+=S8,e1)M+=`return mapResponse(${G0} r, c.set ${Z0})
`;else M+=`return mapCompactResponse(${G0} r ${Z0})
`}else{K.resolve();let L=E8?`await ${q}`:q;if(t("afterHandle").resolve(),z instanceof Response)M+=B.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${G0} ${q}.clone(), c.set ${Z0})
				else
					return ${q}.clone()`:`return ${q}.clone()`,M+="\n";else if(e1)M+=`return mapResponse(${G0} ${L}, c.set ${Z0})
`;else M+=`return mapCompactResponse(${G0} ${L} ${Z0})
`}}if(M+=`
} catch(error) {`,S)M+=`
if(isParsing) error = new ParseError()
`;if(!I1)M+=`
return (async () => {
`;if(M+=`
const set = c.set
if (!set.status || set.status < 300) set.status = error?.status || 500
`,O)for(let K=0;K<W.trace.length;K++)M+=`report${K}?.resolve(error);reportChild${K}?.(error);
`;let B1=t("error",{total:W.error.length});if(W.error.length){M+=`
				c.error = error
				if(error instanceof TypeBoxError) {
					c.code = "VALIDATION"
					c.set.status = 422
				} else
					c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let K=0;K<W.error.length;K++){let L=B1.resolveChild(W.error[K].fn.name);if(v8(W.error[K]))M+=`
er = await handleErrors[${K}](c)
`;else M+=`
er = handleErrors[${K}](c)
if (er instanceof Promise) er = await er
`;L();let R=t("mapResponse",{total:W.mapResponse.length});if(W.mapResponse.length)for(let T=0;T<W.mapResponse.length;T++){let y=W.mapResponse[T],c8=R.resolveChild(y.fn.name);M+=`
c.response = er

							er = ${s1(y)?"await":""} onMapResponse[${T}](c)
							if(er instanceof Promise) er = await er
`,c8()}if(R.resolve(),M+=`er = mapEarlyResponse(er, set ${Z0})
`,M+="if (er) {",O){for(let T=0;T<W.trace.length;T++)M+=`
report${T}.resolve()
`;B1.resolve()}M+=`return er
}
`}}if(B1.resolve(),M+=`return handleError(c, error, true)
`,!I1)M+="})()";if(M+="}",D||O){if(M+=" finally { ",!I1)M+=";(async () => {";let K=t("afterResponse",{total:W.afterResponse.length});if(D)for(let L=0;L<W.afterResponse.length;L++){let R=K.resolveChild(W.afterResponse[L].fn.name);M+=`
await afterResponse[${L}](c);
`,R()}if(K.resolve(),!I1)M+="})();";M+="}"}M=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			parseQueryFromURL,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer,
		TypeBoxError
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${I1?"async":""} function handle(c) {
		${W.beforeHandle.length?"let be":""}
		${W.afterHandle.length?"let af":""}
		${W.mapResponse.length?"let mr":""}

		${J?"c.schema = schema; c.defs = definitions":""}
		${M}
	}`;try{return Function("hooks",M)({handler:z,hooks:qW(W),validator:Y,handleError:$.handleError,utils:{mapResponse:V8,mapCompactResponse:K1,mapEarlyResponse:u8,parseQuery:FX,parseQueryFromURL:yW,isNotEmpty:l0},error:{NotFoundError:KX,ValidationError:D8,InternalServerError:mq,ParseError:uq},schema:$.router.history,definitions:$.definitions.type,ERROR_CODE:v6,parseCookie:VW,signCookie:d6,decodeURIComponent:dW.default,ElysiaCustomStatusResponse:M1,ELYSIA_TRACE:CX,ELYSIA_REQUEST_ID:p6,getServer:()=>$.getServer(),TypeBoxError:v})}catch{let K=qW(W);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof z==="function"?z.toString():z,hooks:{...K,transform:K?.transform?.map?.((L)=>L.toString()),resolve:K?.resolve?.map?.((L)=>L.toString()),beforeHandle:K?.beforeHandle?.map?.((L)=>L.toString()),afterHandle:K?.afterHandle?.map?.((L)=>L.toString()),mapResponse:K?.mapResponse?.map?.((L)=>L.toString()),parse:K?.parse?.map?.((L)=>L.toString()),error:K?.error?.map?.((L)=>L.toString()),afterResponse:K?.afterResponse?.map?.((L)=>L.toString()),stop:K?.stop?.map?.((L)=>L.toString())},validator:Y,definitions:$.definitions.type}),console.log("---"),process.exit(1)}},AW=($)=>{let X=$.config.handler?.standardHostname??!0,Z="",Q="",W=$.setHeaders;for(let S of Object.keys($.singleton.decorator))Z+=`,${S}: app.singleton.decorator.${S}`;let Y=$.router,z=$.event.trace.length>0,J=`
	const route = router.find(request.method, path) ${Y.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${$.event.error.length?"app.handleError(ctx, notFound)":$.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params
`;J+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)
`;let B="";for(let[S,{code:_,all:b,static:x}]of Object.entries(Y.static.http.map)){if(x)B+=`case '${S}':
switch(request.method) {
${_}
${b??"default: break map"}}

`;B+=`case '${S}':
switch(request.method) {
${_}
${b??"default: break map"}}

`}let w=$.event.request.some(v8);if(Q+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${$.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${$.event.error.length?"":`
const error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });
`}

	${$.event.trace.length?`const ${$.event.trace.map((S,_)=>`tr${_} = app.event.trace[${_}].fn`).join(",")}`:""}

	${w?"async":""} function map(request) {
`,$.event.request.length)Q+="let re";if(Q+=`
const url = request.url
		const s = url.indexOf('/', ${X?11:7})
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)
`,Q+=`${z?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(W??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${$.inference.server?`, get server() {
							return getServer()
						}`:""}
			${z?",[ELYSIA_REQUEST_ID]: id":""}
			${Z}
		}
`,$.event.trace.length)Q+=`
ctx[ELYSIA_TRACE] = [${$.event.trace.map((S,_)=>`tr${_}(ctx)`).join(",")}]
`;let D=jX({context:"ctx",trace:$.event.trace,addFn(S){Q+=S}})("request",{attribute:"ctx",total:$.event.request.length});if($.event.request.length){Q+=`
 try {
`;for(let S=0;S<$.event.request.length;S++){let _=$.event.request[S],b=J6(_),x=v8(_),V=D.resolveChild($.event.request[S].fn.name);if(b)Q+=`re = mapEarlyResponse(
					${x?"await":""} onRequest[${S}](ctx),
					ctx.set,
					request
				)
`,V("re"),Q+=`if(re !== undefined) return re
`;else Q+=`${x?"await":""} onRequest[${S}](ctx)
`,V()}Q+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}D.resolve();let O=$.router.static.ws,M=$.router.ws;if(Object.keys(O).length||M.history.length){Q+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[S,_]of Object.entries(O))Q+=`
					case '${S}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${_}](ctx)

						break`;Q+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}
`}if(Q+=`
		map: switch(path) {
			${B}

			default:
				break
		}

		${J}
	}
`,$.extender.higherOrderFunctions.length){let S="map";for(let _=0;_<$.extender.higherOrderFunctions.length;_++)S=`hoc[${_}](${S}, request)`;Q+=`return function hocMap(request) { return ${S}(request) }`}else Q+="return map";let F=hW($);return $.handleError=F,Function("data",Q)({app:$,mapEarlyResponse:u8,NotFoundError:KX,randomId:fW,handleError:F,error:pq,redirect:gW,ELYSIA_TRACE:CX,ELYSIA_REQUEST_ID:p6,getServer:()=>$.getServer()})},hW=($)=>{let X=$.event,Z="";Z+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${$.event.error.find(v8)||$.event.mapResponse.find(v8)?"async":""} function(context, error, skipGlobal) {`;let Q=$.event.trace.length>0;if(Q)Z+="\nconst id = context[ELYSIA_REQUEST_ID]\n";let W=jX({context:"context",trace:X.trace,addFn:(J)=>{Z+=J}});Z+=`
		const set = context.set
		let r

		if(!context.code)
			context.code = error.code ?? error[ERROR_CODE]

		if(!(context.error instanceof Error))
			context.error = error

		if(error instanceof ElysiaCustomStatusResponse) {
			error.status = error.code
			error.message = error.response
		}
`;let Y=Q||X.afterResponse.length>0||X.afterResponse.length>0?"context.response = ":"";for(let J=0;J<$.event.error.length;J++){let B=$.event.error[J],w=`${v8(B)?"await ":""}onError[${J}](context)`;if(Z+="\nif(skipGlobal !== true) {\n",J6(B)){Z+=`r = ${w}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r instanceof ElysiaCustomStatusResponse) {
					error.status = error.code
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status
`;let q=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let D=0;D<X.mapResponse.length;D++){let O=X.mapResponse[D],M=q.resolveChild(O.fn.name);Z+=`
context.response = r
						r = ${s1(O)?"await":""} onMapResponse[${D}](context)
`,M()}q.resolve(),Z+=`return mapResponse(${Y} r, set, context.request)}
`}else Z+=w+"\n";Z+="\n}\n"}Z+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
	    const reportedError = error.error ?? error
		set.status = reportedError.status ?? 422
		return new Response(
			reportedError.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)
`;let z=W("mapResponse",{total:X.mapResponse.length,name:"context"});if(X.mapResponse.length)for(let J=0;J<X.mapResponse.length;J++){let B=X.mapResponse[J],w=z.resolveChild(B.fn.name);Z+=`
context.response = error
			error = ${s1(B)?"await":""} onMapResponse[${J}](context)
`,w()}return z.resolve(),Z+=`
return mapResponse(${Y} error, set, context.request)
}
}`,Function("inject",Z)({app:$,mapResponse:V8,ERROR_CODE:v6,ElysiaCustomStatusResponse:M1,ELYSIA_TRACE:CX,ELYSIA_REQUEST_ID:p6})},NW=($)=>async(X)=>{let Z=X.url,Q=Z.indexOf("/",11),W=Z.indexOf("?",Q+1),Y=W===-1?Z.substring(Q):Z.substring(Q,W),z={cookie:{},status:200,headers:{}},J=Object.assign({},$.singleton.decorator,{set:z,store:$.singleton.store,request:X,path:Y,qi:W,redirect:gW});try{for(let b=0;b<$.event.request.length;b++){let x=$.event.request[b].fn,V=x(J);if(V instanceof Promise)V=await V;if(V=u8(V,z),V)return J.response=V}let B=$.router.dynamic.find(X.method,Y)??$.router.dynamic.find("ALL",Y);if(!B)throw new KX;let{handle:w,hooks:q,validator:D,content:O}=B.store,M;if(X.method!=="GET"&&X.method!=="HEAD")if(O)switch(O){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=FX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let b=await X.formData();for(let x of b.keys()){if(M[x])continue;let V=b.getAll(x);if(V.length===1)M[x]=V[0];else M[x]=V}break}else{let b=X.headers.get("content-type");if(b){let x=b.indexOf(";");if(x!==-1)b=b.slice(0,x);J.contentType=b;for(let V=0;V<q.parse.length;V++){let r=q.parse[V].fn,u=r(J,b);if(u instanceof Promise)u=await u;if(u){M=u;break}}if(delete J.contentType,M===void 0)switch(b){case"application/json":M=await X.json();break;case"text/plain":M=await X.text();break;case"application/x-www-form-urlencoded":M=FX(await X.text());break;case"application/octet-stream":M=await X.arrayBuffer();break;case"multipart/form-data":M={};let V=await X.formData();for(let r of V.keys()){if(M[r])continue;let u=V.getAll(r);if(u.length===1)M[r]=u[0];else M[r]=u}break}}}J.body=M,J.params=B?.params||void 0,J.query=W===-1?{}:yW(Z.substring(W+1)),J.headers={};for(let[b,x]of X.headers.entries())J.headers[b]=x;let F=Object.assign({},$.config?.cookie,D?.cookie?.config),S=X.headers.get("cookie");J.cookie=await VW(J.set,S,F?{secrets:F.secrets!==void 0?typeof F.secrets==="string"?F.secrets:F.secrets.join(","):void 0,sign:F.sign===!0?!0:F.sign!==void 0?typeof F.sign==="string"?F.sign:F.sign.join(","):void 0}:void 0);for(let b=0;b<q.transform.length;b++){let x=q.transform[b],V=x.fn(J);if(x.subType==="derive")if(V instanceof Promise)Object.assign(J,await V);else Object.assign(J,V);else if(V instanceof Promise)await V}if(D){if(D.createHeaders?.()){let b={};for(let x in X.headers)b[x]=X.headers.get(x);if(D.headers.Check(b)===!1)throw new D8("header",D.headers,b)}else if(D.headers?.Decode)J.headers=D.headers.Decode(J.headers);if(D.createParams?.()?.Check(J.params)===!1)throw new D8("params",D.params,J.params);else if(D.params?.Decode)J.params=D.params.Decode(J.params);if(D.createQuery?.()?.Check(J.query)===!1)throw new D8("query",D.query,J.query);else if(D.query?.Decode)J.query=D.query.Decode(J.query);if(D.createCookie?.()){let b={};for(let[x,V]of Object.entries(J.cookie))b[x]=V.value;if(D.cookie.Check(b)===!1)throw new D8("cookie",D.cookie,b);else if(D.cookie?.Decode)b=D.cookie.Decode(b)}if(D.createBody?.()?.Check(M)===!1)throw new D8("body",D.body,M);else if(D.body?.Decode)J.body=D.body.Decode(M)}for(let b=0;b<q.beforeHandle.length;b++){let x=q.beforeHandle[b],V=x.fn(J);if(x.subType==="resolve"){if(V instanceof Promise)Object.assign(J,await V);else Object.assign(J,V);continue}else if(V instanceof Promise)V=await V;if(V!==void 0){J.response=V;for(let u=0;u<q.afterHandle.length;u++){let S8=q.afterHandle[u].fn(J);if(S8 instanceof Promise)S8=await S8;if(S8)V=S8}let r=u8(V,J.set);if(r)return J.response=r}}let _=w(J);if(_ instanceof Promise)_=await _;if(!q.afterHandle.length){let b=_ instanceof M1?_.code:z.status?typeof z.status==="string"?q6[z.status]:z.status:200,x=D?.createResponse?.()?.[b];if(x?.Check(_)===!1)throw new D8("response",x,_);else if(x?.Decode)_=x.Decode(_)}else{J.response=_;for(let b=0;b<q.afterHandle.length;b++){let x=q.afterHandle[b].fn(J);if(x instanceof Promise)x=await x;let V=u8(x,J.set);if(V!==void 0){let r=D?.response?.[V.status];if(r?.Check(V)===!1)throw new D8("response",r,V);else if(r?.Decode)_=r.Decode(_);return J.response=V}}}if(J.set.cookie&&F?.sign){let b=!F.secrets?void 0:typeof F.secrets==="string"?F.secrets:F.secrets[0];if(F.sign===!0)for(let[x,V]of Object.entries(J.set.cookie))J.set.cookie[x].value=await d6(V.value,"${secret}");else{let x=D?.cookie?.schema?.properties;for(let V of F.sign){if(!(V in x))continue;if(J.set.cookie[V]?.value)J.set.cookie[V].value=await d6(J.set.cookie[V].value,b)}}}return J.response=V8(_,J.set)}catch(B){let w=B instanceof V6&&B.error?B.error:B;if(w.status)z.status=w.status;return $.handleError(J,w)}finally{for(let B of $.event.afterResponse)await B.fn(J)}},tq=($)=>async(X,Z)=>{let Q=Object.assign(X,{error:Z,code:Z.code});Q.set=X.set;for(let W=0;W<$.event.error.length;W++){let z=$.event.error[W].fn(Q);if(z instanceof Promise)z=await z;if(z!==void 0&&z!==null)return X.response=V8(z,X.set)}return new Response(typeof Z.cause==="string"?Z.cause:Z.message,{headers:X.set.headers,status:Z.status??500})},ZV=class ${constructor(X={}){if(this.server=null,this.dependencies={},this._routes={},this._types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}},this._ephemeral={},this._volatile={},this.version=DW,this.singleton={decorator:{},store:{},derive:{},resolve:{}},this.definitions={type:{},error:{}},this.extender={macros:[],higherOrderFunctions:[]},this.validator={global:null,scoped:null,local:null,getCandidate(){return Y6(Y6(this.global,this.scoped),this.local)}},this.event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]},this.telemetry={stack:void 0},this.router={http:new GX,ws:new GX,dynamic:new GX,static:{http:{static:{},handlers:[],map:{},all:""},ws:{}},history:[]},this.routeTree=new Map,this.inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1},this.handle=async(Z)=>this.fetch(Z),this.fetch=(Z)=>{return(this.fetch=this.config.aot?AW(this):NW(this))(Z)},this.handleError=async(Z,Q)=>(this.handleError=this.config.aot?hW(this):tq(this))(Z,Q),this.outerErrorHandler=(Z)=>new Response(Z.message||Z.name||"Error",{status:Z?.status??500}),this.listen=(Z,Q)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof Z==="string"){if(!_X(Z))throw new Error("Port must be a numeric value");Z=parseInt(Z)}let W=this.fetch,Y=typeof Z==="object"?{development:!h6,reusePort:!0,...this.config.serve||{},...Z||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...HW||{}},fetch:W,error:this.outerErrorHandler}:{development:!h6,reusePort:!0,...this.config.serve||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...HW||{}},port:Z,fetch:W,error:this.outerErrorHandler};this.server=Bun?.serve(Y);for(let z=0;z<this.event.start.length;z++)this.event.start[z].fn(this);if(Q)Q(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let z=0;z<this.event.stop.length;z++)this.event.stop[z].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this},this.stop=async(Z)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(Z),this.server=null,this.event.stop.length)for(let Q=0;Q<this.event.stop.length;Q++)this.event.stop[Q].fn(this)}},X.tags)if(!X.detail)X.detail={tags:X.tags};else X.detail.tags=X.tags;if(X.nativeStaticResponse===void 0)X.nativeStaticResponse=!0;if(this.config={},this.applyConfig(X??{}),X?.analytic&&(X?.name||X?.seed!==void 0))this.telemetry.stack=new Error().stack}static{this.version=DW}get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}getServer(){return this.server}get promisedModules(){if(!this._promisedModules)this._promisedModules=new vq;return this._promisedModules}env(X,Z=Bun?.env??process.env){if(q0(X,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(Z)===!1){let W=new D8("env",X,Z);throw new Error(W.all.map((Y)=>Y.summary).join("\n"))}return this}wrap(X){return this.extender.higherOrderFunctions.push({checksum:z6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X}),this}applyMacro(X){if(this.extender.macros.length){let Z=yq({globalHook:this.event,localHook:X}),Q={events:{global:this.event,local:X},onParse:Z("parse"),onTransform:Z("transform"),onBeforeHandle:Z("beforeHandle"),onAfterHandle:Z("afterHandle"),mapResponse:Z("mapResponse"),onAfterResponse:Z("afterResponse"),onError:Z("error")};for(let W of this.extender.macros)fq(W.fn(Q),X)}}applyConfig(X){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...X,cookie:{path:"/",...X?.cookie},experimental:X?.experimental??{},seed:X?.seed===void 0?"":X?.seed},this}get models(){let X={};for(let[Z,Q]of Object.entries(this.definitions.type))X[Z]=q0(Q);return X}add(X,Z,Q,W,{allowMeta:Y=!1,skipPrefix:z=!1}={allowMeta:!1,skipPrefix:!1}){if(W=hq(W),Z!==""&&Z.charCodeAt(0)!==47)Z="/"+Z;if(this.config.prefix&&!z&&!this.config.scoped)Z=this.config.prefix+Z;if(W?.type)switch(W.type){case"text":W.type="text/plain";break;case"json":W.type="application/json";break;case"formdata":W.type="multipart/form-data";break;case"urlencoded":W.type="application/x-www-form-urlencoded";break;case"arrayBuffer":W.type="application/octet-stream";break;default:break}let J=this.definitions.type,B=!this.config.aot,w={...this.validator.getCandidate()},q={body:W?.body??w?.body,headers:W?.headers??w?.headers,params:W?.params??w?.params,query:W?.query??w?.query,cookie:W?.cookie??w?.cookie,response:W?.response??w?.response},D=()=>q.cookie?TW({validator:q.cookie,defaultConfig:this.config.cookie,config:q.cookie?.config??{},dynamic:B,models:J}):void 0,O=this.config.normalize,M=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:q0(q.body,{dynamic:B,models:J,normalize:O,additionalCoerce:WW()}),headers:q0(q.headers,{dynamic:B,models:J,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:n1()}),params:q0(q.params,{dynamic:B,models:J,coerce:!0,additionalCoerce:n1()}),query:q0(q.query,{dynamic:B,models:J,normalize:O,coerce:!0,additionalCoerce:n1()}),cookie:D(),response:QW(q.response,{dynamic:B,models:J,normalize:O})}:{createBody(){if(this.body)return this.body;return this.body=q0(q.body,{dynamic:B,models:J,normalize:O,additionalCoerce:WW()})},createHeaders(){if(this.headers)return this.headers;return this.headers=q0(q.headers,{dynamic:B,models:J,additionalProperties:!O,coerce:!0,additionalCoerce:n1()})},createParams(){if(this.params)return this.params;return this.params=q0(q.params,{dynamic:B,models:J,coerce:!0,additionalCoerce:n1()})},createQuery(){if(this.query)return this.query;return this.query=q0(q.query,{dynamic:B,models:J,coerce:!0,additionalCoerce:n1()})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=D()},createResponse(){if(this.response)return this.response;return this.response=QW(q.response,{dynamic:B,models:J,normalize:O})}},F=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(W=T0(W,w),W.tags)if(!W.detail)W.detail={tags:W.tags};else W.detail.tags=W.tags;if(l0(this.config.detail))W.detail=U0(Object.assign({},this.config.detail),W.detail);this.applyMacro(W);let S=T0(this.event,W);if(this.config.aot===!1){if(this.router.dynamic.add(X,Z,{validator:M,hooks:S,content:W?.type,handle:Q}),this.config.strictPath===!1)this.router.dynamic.add(X,F,{validator:M,hooks:S,content:W?.type,handle:Q});this.router.history.push({method:X,path:Z,composed:null,handler:Q,hooks:S});return}let _=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,b=AX(this.inference),x=typeof Q!=="function"?jq(Q,S,this.setHeaders):void 0,V=typeof Q!=="function"?bq(Q,S,this.setHeaders):void 0;if(this.config.nativeStaticResponse===!0&&V&&(X==="GET"||X==="ALL"))this.router.static.http.static[Z]=V();let r=()=>oq({app:this,path:Z,method:X,localHook:T0(W),hooks:S,validator:M,handler:Q,allowMeta:Y,inference:b}),u=_?r():(Y8)=>{return r()(Y8)},S8=this.router.history.length;if(this.routeTree.has(X+Z))for(let Y8=0;Y8<this.router.history.length;Y8++){let t=this.router.history[Y8];if(t.path===Z&&t.method===X){let E8=this.router.history.splice(Y8,1)[0];if(E8&&this.routeTree.has(E8?.method+E8?.path))this.routeTree.delete(E8.method+E8.path)}}else this.routeTree.set(X+Z,S8);this.router.history.push({method:X,path:Z,composed:u,handler:Q,hooks:S});let A8=this.router.static.http,G8={handler:_?u:void 0,compile:r};if(X==="$INTERNALWS"){let Y8=this.config.strictPath?void 0:Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let t=A8.handlers.length;if(A8.handlers.push((E8)=>(A8.handlers[t]=r())(E8)),this.router.static.ws[Z]=t,Y8)this.router.static.ws[Y8]=t}else if(this.router.ws.add("ws",Z,G8),Y8)this.router.ws.add("ws",Y8,G8);return}if(Z.indexOf(":")===-1&&Z.indexOf("*")===-1){let Y8=A8.handlers.length;if(A8.handlers.push(x??((E8)=>(A8.handlers[Y8]=r())(E8))),!A8.map[Z])A8.map[Z]={code:""};let t=x?"":"ctx";if(X==="ALL")A8.map[Z].all=`default: return st[${Y8}](${t})
`;else A8.map[Z].code=`case '${X}': return st[${Y8}](${t})
${A8.map[Z].code}`;if(!this.config.strictPath){if(!A8.map[F])A8.map[F]={code:""};if(this.config.nativeStaticResponse===!0&&V&&(X==="GET"||X==="ALL"))this.router.static.http.static[F]=V();if(X==="ALL")A8.map[F].all=`default: return st[${Y8}](${t})
`;else A8.map[F].code=`case '${X}': return st[${Y8}](${t})
${A8.map[F].code}`}}else if(this.router.http.add(X,Z,G8),!this.config.strictPath){let Y8=Z.endsWith("/")?Z.slice(0,Z.length-1):Z+"/";if(this.config.nativeStaticResponse===!0&&x&&(X==="GET"||X==="ALL"))this.router.static.http.static[Y8]=x();this.router.http.add(X,Y8,G8)}}headers(X){if(!X)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=U0(this.setHeaders,X),this}onStart(X){return this.on("start",X),this}onRequest(X){return this.on("request",X),this}onParse(X,Z){if(!Z)return this.on("parse",X);return this.on(X,"parse",Z)}onTransform(X,Z){if(!Z)return this.on("transform",X);return this.on(X,"transform",Z)}resolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"resolve",fn:Z};return this.onBeforeHandle(X,Q)}mapResolve(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapResolve",fn:Z};return this.onBeforeHandle(X,Q)}onBeforeHandle(X,Z){if(!Z)return this.on("beforeHandle",X);return this.on(X,"beforeHandle",Z)}onAfterHandle(X,Z){if(!Z)return this.on("afterHandle",X);return this.on(X,"afterHandle",Z)}mapResponse(X,Z){if(!Z)return this.on("mapResponse",X);return this.on(X,"mapResponse",Z)}onAfterResponse(X,Z){if(!Z)return this.on("afterResponse",X);return this.on(X,"afterResponse",Z)}trace(X,Z){if(!Z)Z=X,X={as:"local"};if(!Array.isArray(Z))Z=[Z];for(let Q of Z)this.on(X,"trace",cq(Q));return this}error(X,Z){switch(typeof X){case"string":return Z.prototype[v6]=X,this.definitions.error[X]=Z,this;case"function":return this.definitions.error=X(this.definitions.error),this}for(let[Q,W]of Object.entries(X))W.prototype[v6]=Q,this.definitions.error[Q]=W;return this}onError(X,Z){if(!Z)return this.on("error",X);return this.on(X,"error",Z)}onStop(X){return this.on("stop",X),this}on(X,Z,Q){let W;switch(typeof X){case"string":W=X,Q=Z;break;case"object":if(W=Z,!Array.isArray(Z)&&typeof Z==="object")Q=Z;break}if(Array.isArray(Q))Q=g0(Q);else if(typeof Q==="function")Q=[{fn:Q}];else Q=[Q];let Y=Q;for(let z of Y)z.scope=typeof X==="string"?"local":X?.as??"local";if(W!=="trace")_W({[W]:Y.map((z)=>z.fn)},this.inference);for(let z of Y){let J=Tq(z,"global",{skipIfHasType:!0});switch(W){case"start":this.event.start.push(J);break;case"request":this.event.request.push(J);break;case"parse":this.event.parse.push(J);break;case"transform":this.event.transform.push(J);break;case"beforeHandle":this.event.beforeHandle.push(J);break;case"afterHandle":this.event.afterHandle.push(J);break;case"mapResponse":this.event.mapResponse.push(J);break;case"afterResponse":this.event.afterResponse.push(J);break;case"trace":this.event.trace.push(J);break;case"error":this.event.error.push(J);break;case"stop":this.event.stop.push(J);break}}return this}propagate(){return a8(this.event.parse),a8(this.event.transform),a8(this.event.beforeHandle),a8(this.event.afterHandle),a8(this.event.mapResponse),a8(this.event.afterResponse),a8(this.event.trace),a8(this.event.error),this}as(X){let Z={plugin:"scoped",global:"global"}[X];if(a8(this.event.parse,Z),a8(this.event.transform,Z),a8(this.event.beforeHandle,Z),a8(this.event.afterHandle,Z),a8(this.event.mapResponse,Z),a8(this.event.afterResponse,Z),a8(this.event.trace,Z),a8(this.event.error,Z),X==="plugin")this.validator.scoped=Y6(this.validator.scoped,this.validator.local),this.validator.local=null;else if(X==="global")this.validator.global=Y6(this.validator.global,Y6(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group(X,Z,Q){let W=new $({...this.config,prefix:""});W.singleton={...this.singleton},W.definitions={...this.definitions},W.getServer=()=>this.getServer(),W.inference=AX(this.inference),W.extender={...this.extender};let Y=typeof Z==="object",z=(Y?Q:Z)(W);if(this.singleton=U0(this.singleton,W.singleton),this.definitions=U0(this.definitions,W.definitions),z.event.request.length)this.event.request=[...this.event.request||[],...z.event.request||[]];if(z.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...z.event.mapResponse||[]];return this.model(z.definitions.type),Object.values(W.router.history).forEach(({method:J,path:B,handler:w,hooks:q})=>{if(B=(Y?"":this.config.prefix)+X+B,Y){let D=Z,O=q;this.add(J,B,w,T0(D,{...O||{},error:!O.error?z.event.error:Array.isArray(O.error)?[...O.error||{},...z.event.error||{}]:[O.error,...z.event.error||{}]}))}else this.add(J,B,w,T0(q,{error:z.event.error}),{skipPrefix:!0})}),this}guard(X,Z){if(!Z){if(typeof X==="object"){this.applyMacro(X);let Y=X.as??"local";if(this.validator[Y]={body:X.body??this.validator[Y]?.body,headers:X.headers??this.validator[Y]?.headers,params:X.params??this.validator[Y]?.params,query:X.query??this.validator[Y]?.query,response:X.response??this.validator[Y]?.response,cookie:X.cookie??this.validator[Y]?.cookie},X.parse)this.on({as:Y},"parse",X.parse);if(X.transform)this.on({as:Y},"transform",X.transform);if(X.beforeHandle)this.on({as:Y},"beforeHandle",X.beforeHandle);if(X.afterHandle)this.on({as:Y},"afterHandle",X.afterHandle);if(X.mapResponse)this.on({as:Y},"mapResponse",X.mapResponse);if(X.afterResponse)this.on({as:Y},"afterResponse",X.afterResponse);if(X.error)this.on({as:Y},"error",X.error);if(X.detail)if(this.config.detail)this.config.detail=U0(Object.assign({},this.config.detail),X.detail);else this.config.detail=X.detail;if(X?.tags)if(!this.config.detail)this.config.detail={tags:X.tags};else this.config.detail.tags=X.tags;return this}return this.guard({},X)}let Q=new $({...this.config,prefix:""});Q.singleton={...this.singleton},Q.definitions={...this.definitions},Q.inference=AX(this.inference),Q.extender={...this.extender};let W=Z(Q);if(this.singleton=U0(this.singleton,Q.singleton),this.definitions=U0(this.definitions,Q.definitions),W.getServer=()=>this.server,W.event.request.length)this.event.request=[...this.event.request||[],...W.event.request||[]];if(W.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]];return this.model(W.definitions.type),Object.values(Q.router.history).forEach(({method:Y,path:z,handler:J,hooks:B})=>{this.add(Y,z,J,T0(X,{...B||{},error:!B.error?W.event.error:Array.isArray(B.error)?[...B.error||{},...W.event.error||[]]:[B.error,...W.event.error||[]]}))}),this}use(X,Z){if(Z?.scoped)return this.guard({},(Q)=>Q.use(X));if(Array.isArray(X)){let Q=this;for(let W of X)Q=this.use(W);return Q}if(X instanceof Promise)return this.promisedModules.add(X.then((Q)=>{if(typeof Q==="function")return Q(this);if(Q instanceof $)return this._use(Q).compile();if(typeof Q.default==="function")return Q.default(this);if(Q.default instanceof $)return this._use(Q.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then((Q)=>Q.compile())),this;return this._use(X)}_use(X){if(typeof X==="function"){let Y=X(this);if(Y instanceof Promise)return this.promisedModules.add(Y.then((z)=>{if(z instanceof $){z.getServer=()=>this.getServer(),z.getGlobalRoutes=()=>this.getGlobalRoutes(),z.model(this.definitions.type),z.error(this.definitions.error);for(let{method:J,path:B,handler:w,hooks:q}of Object.values(z.router.history))this.add(J,B,w,T0(q,{error:z.event.error}));return z.compile(),z}if(typeof z==="function")return z(this);if(typeof z.default==="function")return z.default(this);return this._use(z)}).then((z)=>z.compile())),this;return Y}let{name:Z,seed:Q}=X.config;X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.model(this.definitions.type),X.error(this.definitions.error);let W=X.config.scoped;if(W){if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let z=Q!==void 0?z6(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:J})=>z===J))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:z,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:z,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton.decorator,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""}))})}X.extender.macros=this.extender.macros.concat(X.extender.macros);let Y=[];for(let z=0;z<X.extender.macros.length;z++){let J=this.extender.macros[z];if(Y.includes(J.checksum))X.extender.macros.splice(z,1),z--;Y.push(J.checksum)}if(X.onRequest((z)=>{Object.assign(z,this.singleton.decorator),Object.assign(z.store,this.singleton.store)}),X.event.trace.length)X.event.trace.push(...X.event.trace);if(!X.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if(X.event.error.length)X.event.error.push(...this.event.error);if(X.config.aot)X.compile();if(W===!0&&X.config.prefix){this.mount(X.config.prefix+"/",X.fetch);for(let z of X.router.history)this.routeTree.set(z.method+`${X.config.prefix}${z.path}`,this.router.history.length),this.router.history.push({...z,path:`${X.config.prefix}${z.path}`,hooks:T0(z.hooks,{error:this.event.error})})}else{this.mount(X.fetch);for(let z of X.router.history)this.routeTree.set(z.method+`${X.config.prefix}${z.path}`,this.router.history.length),this.router.history.push({...z,path:`${X.config.prefix}${z.path}`,hooks:T0(z.hooks,{error:this.event.error})})}return this}else{if(this.headers(X.setHeaders),Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let z=Q!==void 0?z6(Z+JSON.stringify(Q)):0;if(!this.dependencies[Z].some(({checksum:J})=>z===J))this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions);UW(this.extender.macros),UW(this.extender.higherOrderFunctions);let Y=[];for(let z=0;z<this.extender.higherOrderFunctions.length;z++){let J=this.extender.higherOrderFunctions[z];if(J.checksum){if(Y.includes(J.checksum))this.extender.higherOrderFunctions.splice(z,1),z--;Y.push(J.checksum)}}this.inference={body:this.inference.body||X.inference.body,cookie:this.inference.cookie||X.inference.cookie,headers:this.inference.headers||X.inference.headers,query:this.inference.query||X.inference.query,set:this.inference.set||X.inference.set,server:this.inference.server||X.inference.server}}this.decorate(X.singleton.decorator),this.state(X.singleton.store),this.model(X.definitions.type),this.error(X.definitions.error),X.extender.macros=this.extender.macros.concat(X.extender.macros);for(let{method:Y,path:z,handler:J,hooks:B}of Object.values(X.router.history))this.add(Y,z,J,T0(B,{error:X.event.error}));if(!W)if(Z){if(!(Z in this.dependencies))this.dependencies[Z]=[];let Y=Q!==void 0?z6(Z+JSON.stringify(Q)):0;if(this.dependencies[Z].some(({checksum:z})=>Y===z))return this;this.dependencies[Z].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:Y,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((z)=>z?.subType==="derive").map((z)=>({fn:z.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((z)=>z?.subType==="resolve").map((z)=>({fn:z.toString(),stack:new Error().stack??""}))}),this.event=YW(this.event,zW(X.event),Y)}else this.event=YW(this.event,zW(X.event));return this.validator.global=T0(this.validator.global,{...X.validator.global}),this.validator.local=T0(this.validator.local,{...X.validator.scoped}),this}macro(X){let Z={checksum:z6(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X};return this.extender.macros.push(Z),this}mount(X,Z){if(X instanceof $||typeof X==="function"||X.length===0||X==="/"){let Y=typeof X==="function"?X:X instanceof $?X.compile().fetch:Z instanceof $?Z.compile().fetch:Z,z=async({request:J,path:B})=>{if(J.method==="GET"||J.method==="HEAD"||!J.headers.get("content-type"))return Y(new Request(g6(J.url,B||"/"),J));return Y(new Request(g6(J.url,B||"/"),{...J,body:await J.arrayBuffer()}))};return this.all("/*",z,{type:"none"}),this}let Q=X.length;if(Z instanceof $)Z=Z.compile().fetch;let W=async({request:Y,path:z})=>{if(Y.method==="GET"||Y.method==="HEAD"||!Y.headers.get("content-type"))return Z(new Request(g6(Y.url,z.slice(Q)||"/"),Y));return Z(new Request(g6(Y.url,z.slice(Q)||"/"),{...Y,body:await Y.arrayBuffer()}))};return this.all(X,W,{type:"none"}),this.all(X+(X.endsWith("/")?"*":"/*"),W,{type:"none"}),this}get(X,Z,Q){return this.add("GET",X,Z,Q),this}post(X,Z,Q){return this.add("POST",X,Z,Q),this}put(X,Z,Q){return this.add("PUT",X,Z,Q),this}patch(X,Z,Q){return this.add("PATCH",X,Z,Q),this}delete(X,Z,Q){return this.add("DELETE",X,Z,Q),this}options(X,Z,Q){return this.add("OPTIONS",X,Z,Q),this}all(X,Z,Q){return this.add("ALL",X,Z,Q),this}head(X,Z,Q){return this.add("HEAD",X,Z,Q),this}connect(X,Z,Q){return this.add("CONNECT",X,Z,Q),this}route(X,Z,Q,W){return this.add(X.toUpperCase(),Z,Q,W,W?.config),this}ws(X,Z){let Q=Z.transformMessage?Array.isArray(Z.transformMessage)?Z.transformMessage:[Z.transformMessage]:void 0,W=null,Y=q0(Z?.body,{models:this.definitions.type,normalize:this.config.normalize}),z=q0(Z?.response,{models:this.definitions.type,normalize:this.config.normalize}),J=(B)=>{if(typeof B==="string"){let w=B?.charCodeAt(0);if(w===47||w===123)try{B=JSON.parse(B)}catch{}else if(_X(B))B=+B}if(Q?.length)for(let w=0;w<Q.length;w++){let q=Q[w](B);if(q!==void 0)B=q}return B};return this.route("$INTERNALWS",X,(B)=>{let{set:w,path:q,qi:D,headers:O,query:M,params:F}=B;if(W===null)W=this.getServer();if(W?.upgrade(B.request,{headers:typeof Z.upgrade==="function"?Z.upgrade(B):Z.upgrade,data:{validator:z,open(S){Z.open?.(new f6(S,B))},message:(S,_)=>{let b=J(_);if(Y?.Check(b)===!1)return void S.send(new D8("message",Y,b).message);Z.message?.(new f6(S,B),b)},drain(S){Z.drain?.(new f6(S,B))},close(S,_,b){Z.close?.(new f6(S,B),_,b)}}}))return;return w.status=400,"Expected a websocket connection"},{beforeHandle:Z.beforeHandle,transform:Z.transform,headers:Z.headers,params:Z.params,query:Z.query}),this}state(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.store)this.singleton.store[Z]=U0(this.singleton.store[Z],Q,{override:W==="override"});else this.singleton.store[Z]=Q;return this}if(Q===null)return this;return this.singleton.store=U0(this.singleton.store,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q}else this.singleton.store=Q(this.singleton.store);return this;default:if(W==="override"||!(Z in this.singleton.store))this.singleton.store[Z]=Q;return this}}decorate(X,Z,Q){if(Z===void 0)Q=X,X={as:"append"},Z="";else if(Q===void 0){if(typeof X==="string")Q=Z,Z=X,X={as:"append"};else if(typeof X==="object")Q=Z,Z=""}let{as:W}=X;if(typeof Z!=="string")return this;switch(typeof Q){case"object":if(Z){if(Z in this.singleton.decorator)this.singleton.decorator[Z]=U0(this.singleton.decorator[Z],Q,{override:W==="override"});else this.singleton.decorator[Z]=Q;return this}if(Q===null)return this;return this.singleton.decorator=U0(this.singleton.decorator,Q,{override:W==="override"}),this;case"function":if(Z){if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q}else this.singleton.decorator=Q(this.singleton.decorator);return this;default:if(W==="override"||!(Z in this.singleton.decorator))this.singleton.decorator[Z]=Q;return this}}derive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"derive",fn:Z};return this.onTransform(X,Q)}model(X,Z){switch(typeof X){case"object":return Object.entries(X).forEach(([Q,W])=>{if(!(Q in this.definitions.type))this.definitions.type[Q]=W}),this;case"function":return this.definitions.type=X(this.definitions.type),this}return this.definitions.type[X]=Z,this}mapDerive(X,Z){if(!Z)Z=X,X={as:"local"};let Q={subType:"mapDerive",fn:Z};return this.onTransform(X,Q)}affix(X,Z,Q){if(Q==="")return this;let W=["_","-"," "],Y=(w)=>w[0].toUpperCase()+w.slice(1),z=X==="prefix"?(w,q)=>W.includes(w.at(-1)??"")?w+q:w+Y(q):W.includes(Q.at(-1)??"")?(w,q)=>q+w:(w,q)=>q+Y(w),J=(w)=>{let q={};switch(w){case"decorator":for(let D in this.singleton.decorator)q[z(Q,D)]=this.singleton.decorator[D];this.singleton.decorator=q;break;case"state":for(let D in this.singleton.store)q[z(Q,D)]=this.singleton.store[D];this.singleton.store=q;break;case"model":for(let D in this.definitions.type)q[z(Q,D)]=this.definitions.type[D];this.definitions.type=q;break;case"error":for(let D in this.definitions.error)q[z(Q,D)]=this.definitions.error[D];this.definitions.error=q;break}},B=Array.isArray(Z)?Z:[Z];for(let w of B.some((q)=>q==="all")?["decorator","state","model","error"]:B)J(w);return this}prefix(X,Z){return this.affix("prefix",X,Z)}suffix(X,Z){return this.affix("suffix",X,Z)}compile(){if(this.fetch=this.config.aot?AW(this):NW(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}get modules(){return Promise.all(this.promisedModules.promises)}};var a1=($)=>{return};var sq={light:"light",dark:"dark"};a1(sq);var rq={log:"log",info:"info",warn:"warn",error:"error"};a1(rq);var bX={en:"en",fr:"fr"};a1(bX);var aq={};a1(aq);var eq={Event:"Event",Bordeaux:"Bordeaux",Dubai:"Dubai",Geneve:"Geneve",London:"London",Paris:"Paris","Rhone-Alpes":"Rhone-Alpes","Sud-Est":"Sud-Est",Toulouse:"Toulouse","Chabe DEV":"Chabe DEV"};a1(eq);var $U={Pending:"Pending","Driver ok":"Driver ok","In position":"In position",POB:"POB",Finished:"Finished"};a1($U);var XU={lang:bX.fr,Loading:"Chargement",Error:"Erreur","not found":"non trouv\xE9","is not implemented yet":"n'est pas encore impl\xE9ment\xE9","is not available in this demo":"n'est pas disponible dans cette d\xE9mo",Home:"Accueil",Logout:"D\xE9connexion",Copy:"Copier",Copied:"Copi\xE9","Press enter to add":"Appuyez sur Entr\xE9e pour ajouter","Filter by":"Filtrer par","Mission editable":"Missions modifiables","Internal Notes editable":"Notes internes modifiables","Demo settings":"Param\xE8tres de la d\xE9mo","As a demo, the data is fake.":"En tant que d\xE9mo, les donn\xE9es sont factices.","Used limos":"Limos utilis\xE9s",Confirm:"Confirmer","next day":"lendemain",Cancel:"Annuler",Close:"Fermer",Save:"Enregistrer","read only":"lecture seule","Updating columns...":"Mise \xE0 jour des colonnes...","Columns updated":"Colonnes mises \xE0 jour","Error updating columns":"Erreur lors de la mise \xE0 jour des colonnes","Filtered columns":"Colonnes filtr\xE9es","POB Report":"Rapport POB",Guest:"Invit\xE9",Status:"Statut",Driver:"Chauffeur","Pick-up":"D\xE9part","Drop-off":"Arriv\xE9e",TIME:"HEURE","Plate number":"Num\xE9ro de plaque",Details:"D\xE9tails","Mission Details":"D\xE9tails de la mission","Internal Notes":"Notes internes",Notes:"Notes",Service:"Service","Date & Time":"Date & Heure",Date:"Date","Start Time":"Heure de d\xE9but","End Time":"Heure de fin",Route:"Route",Passengers:"Passagers","License Plate":"Immatriculation",Vehicle:"V\xE9hicule",Observation:"Observation",Client:"Client",Partner:"Partenaire","Partner Name":"Nom du partenaire",Limo:"Limo","External ID":"ID externe","Internal Notes updated":"Notes internes mises \xE0 jour"},PV=XU;export{PV as default};
